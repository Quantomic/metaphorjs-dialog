(function(){var M={lib:{}},da=Array.prototype.slice,ea=function(r){return!(!r||r.constructor!==Object)},r=function(r){return"undefined"==typeof r},F=function a(){var b=!1,c=!1,d=da.call(arguments),e=d.shift(),n,g,v;"boolean"==typeof d[d.length-1]&&(b=d.pop());"boolean"==typeof d[d.length-1]&&(c=b,b=d.pop());for(;d.length;)if(n=d.shift())for(g in n)if(n.hasOwnProperty(g)&&!r(v=n[g]))if(c)if(e[g]&&ea(e[g])&&ea(v))a(e[g],v,b,c);else{if(!0===b||r(e[g])||null===e[g])ea(v)?(e[g]={},a(e[g],v,b,!0)):e[g]=
v}else if(!0===b||r(e[g])||null===e[g])e[g]=v;return e},ia=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),D=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},sa=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),
ja=function(a,b){return b?sa("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1},J=function(a,b){b&&!ja(a,b)&&(a.className+=" "+b)},W=function(a,b){b&&(a.className=a.className.replace(sa("(?:^|\\s)"+b+"(?!\\S)"),""))},Aa=Object.prototype.toString,Y=function(a){return null!=a&&"object"===typeof a},ta=function(a){return"number"==typeof a&&!isNaN(a)},Z=function(a){return!!(a&&Y(a)&&ta(a.length)&&"[object Array]"==Aa.call(a))},H=function(){var a={};return function(b,c,d){b=b._mjsid||(b._mjsid=ia());var e=
a[b];if(r(d))return e?e[c]:void 0;e||(e=a[b]={});return e[c]=d}}(),K=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},U=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},fa=function(){return!1},ga=function(){return!0},aa=function(a){if(a instanceof aa)return a;if(!(this instanceof aa))return new aa(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=
a.srcElement);var d,e=a.button;r(this.pageX)&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===e||(this.which=e&1?1:e&2?3:e&4?2:0);this.isDefaultPrevented=a.defaultPrevented||r(a.defaultPrevented)&&!1===a.returnValue?ga:fa;this.timeStamp=
a&&a.timeStamp||(new Date).getTime()};aa.prototype={isDefaultPrevented:fa,isPropagationStopped:fa,isImmediatePropagationStopped:fa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga;a&&a.stopImmediatePropagation&&
a.stopImmediatePropagation();this.stopPropagation()}};M.lib.NormalizedEvent=aa;var Q=function(a){return new aa(a)},E=function(a){return"string"==typeof a},ka=function(a){if(!a||r(a.length)||E(a))return a?[a]:[];for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b},L=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,n=/(~|>|\+)/,g=/ +/,v=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,
w=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,y=/\D/,R=/[^(]*\(([^)]*)\)/,m=/\(.*/,s=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,q=document,la=!!q.getElementsByClassName,O=!!q.querySelectorAll,f={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,h){var b=a.nodeIndex||0,l=h[3]=h[3]?("%"===h[2]?-1:1)*h[3]:0,z=h[1];if(b)return!((b+
l)%z);var f=a.parentNode.firstChild;b++;do if(1==f.nodeType&&(f.nodeIndex=++b)&&a===f&&(b+l)%z)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(a,h){var b=a.nodeIndexLast||0,l=h[3]?("%"===h[2]?-1:1)*h[3]:0,z=h[1];if(b)return!((b+l)%z);var f=a.parentNode.lastChild;b++;do if(1==f.nodeType&&(f.nodeLastIndex=b++)&&a===f&&(b+l)%z)return 0;while(f=f.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=
a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,h){return a.lang!==h&&q.documentElement.lang!==h},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},p={},k=function(a){return p[a]||(p[a]=new RegExp("(^| +)"+a+"($| +)"))},t={"":function(a,h){return!!a.getAttribute(h)},"=":function(a,h,b){return(h=a.getAttribute(h))&&h===b},"&=":function(a,h,b){return(h=a.getAttribute(h))&&
k(b).test(h)},"^=":function(a,h,b){return(h=a.getAttribute(h)+"")&&!h.indexOf(b)},"$=":function(a,h,b){return(h=a.getAttribute(h)+"")&&h.indexOf(b)==h.length-b.length},"*=":function(a,h,b){return(h=a.getAttribute(h)+"")&&-1!=h.indexOf(b)},"|=":function(a,h,b){return(h=a.getAttribute(h)+"")&&(h===b||!!h.indexOf(b+"-"))},"!=":function(a,h,b){return!(h=a.getAttribute(h))||!k(b).test(h)}};return function(k,h){h=h||q;var x=[],l=null,z,S,V,u,p,N,P;if(O)try{x=ka(h.querySelectorAll(k.replace(b,'="$1"')))}catch(r){l=
!0}if(!O||l)if(a.test(k))switch(l=0,k.charAt(0)){case "#":l=k.slice(1);x=q.getElementById(l);x.id!==l&&(x=q.all[l]);x=x?[x]:[];break;case ".":z=k.slice(1);if(la)x=ka((x=h.getElementsByClassName(z)).length?x:[]);else{z=" "+z+" ";S=h.getElementsByTagName("*");for(V=0;u=S[V++];)-1!=(" "+u.className+" ").indexOf(z)&&(x[l++]=u);x=l?x:[]}break;case ":":S=h.getElementsByTagName("*");V=0;p=k.replace(R,"$1");for(N=k.replace(m,"");u=S[V++];)f[N]&&!f[N](u,p)&&(x[l++]=u);x=l?x:[];break;case "[":S=h.getElementsByTagName("*");
V=0;u=s.exec(k);z=u[1];P=u[2]||"";for(p=u[3];u=S[V++];)t[P]&&(t[P](u,z,p)||"class"===z&&t[P](u,"className",p))&&(x[l++]=u);x=l?x:[];break;default:x=ka((x=h.getElementsByTagName(k)).length?x:[])}else{for(var E=k.split(c),D=E.length-1,H=!!D,I,K,A,L,F,G,J,M,U,C,Q,T;l=E[D--];){K=(I=l.replace(d,"$1%").replace(e,"$1&").replace(n," $1 ").split(g)).length;V=0;L=" ";for(S=[h];A=I[V++];)if(" "!==A&&">"!==A&&"~"!==A&&"+"!==A&&S){A=A.match(v);F=A[1]||"*";G=A[2];J=A[3]?" "+A[3]+" ":"";z=A[4];P=A[5]||"";N=A[7];
p="nth-child"===N||"nth-last-child"===N?w.exec("even"===A[8]&&"2n"||"odd"===A[8]&&"2n%1"||!y.test(A[8])&&"0n%"+A[8]||A[8]):A[8];M=[];l=U=0;for(Q=V==K;C=S[U++];)switch(L){case " ":T=C.getElementsByTagName(F);for(C=0;u=T[C++];)G&&u.id!==G||J&&-1==(" "+u.className+" ").indexOf(J)||!(!z||t[P]&&(t[P](u,z,A[6])||"class"===z&&t[P](u,"className",A[6])))||u.yeasss||(f[N]?f[N](u,p):N)||(Q&&(u.yeasss=1),M[l++]=u);break;case "~":for(F=F.toLowerCase();(C=C.nextSibling)&&!C.yeasss;)1!=C.nodeType||"*"!==F&&C.nodeName.toLowerCase()!==
F||G&&C.id!==G||J&&-1==(" "+C.className+" ").indexOf(J)||!(!z||t[P]&&(t[P](u,z,A[6])||"class"===z&&t[P](u,"className",A[6])))||C.yeasss||(f[N]?f[N](C,p):N)||(Q&&(C.yeasss=1),M[l++]=C);break;case "+":for(;(C=C.nextSibling)&&1!=C.nodeType;);!C||C.nodeName.toLowerCase()!==F.toLowerCase()&&"*"!==F||G&&C.id!==G||J&&-1==(" "+u.className+" ").indexOf(J)||!(!z||t[P]&&(t[P](u,z,A[6])||"class"===z&&t[P](u,"className",A[6])))||C.yeasss||(f[N]?f[N](C,p):N)||(Q&&(C.yeasss=1),M[l++]=C);break;case ">":for(T=C.getElementsByTagName(F),
V=0;u=T[V++];)u.parentNode!==C||G&&u.id!==G||J&&-1==(" "+u.className+" ").indexOf(J)||!(!z||t[P]&&(t[P](u,z,A[6])||"class"===z&&t[P](u,"className",A[6])))||u.yeasss||(f[N]?f[N](u,p):N)||(Q&&(u.yeasss=1),M[l++]=u)}S=M}else L=A;if(H){if(!S.concat){M=[];for(C=0;u=S[C];)M[C++]=u;S=M}x=S.concat(1==x.length?x[0]:x)}else x=S}for(l=x.length;l--;)x[l].yeasss=x[l].nodeIndex=x[l].nodeIndexLast=null}return x}}(),ma=function(a,b){var c=L(b,a.parentNode),d,e;d=-1;for(e=c.length;++d<e;)if(c[d]===a)return!0;return!1},
ua=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",e="transitionDuration",n=null;(function(){var g=document.createElement("div"),v=!1,w,y,R;if(void 0!==g.style.animationName)v=!0;else for(y=0,R=a.length;y<R;y++)if(w=a[y],void 0!==g.style[w+"AnimationName"]){v=!0;b=w+"AnimationDelay";c=w+"AnimationDuration";d=w+"TransitionDelay";e=w+"TransitionDuration";break}return v})()&&(n={animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:e});
return function(){return n}}(),Ba=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,d){var e,m,s=c.length;for(e=0;e<s;e++)m=a(c[e])+a(d[e]),b=Math.max(m,b);return b},c=ua(),d=c?c.animationDuration:null,e=c?c.animationDelay:null,n=c?c.transitionDuration:null,g=c?c.transitionDelay:null;return function(a){if(!c)return 0;var w=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var y=(w[d]||"").split(","),R=(w[e]||"").split(","),
m=(w[n]||"").split(","),w=(w[g]||"").split(",");a=Math.max(a,b(a,y,R));return a=Math.max(a,b(a,m,w))}}(),I=function(a){return"function"===typeof a},T=function(a){var b;return a&&(Y(a)||I(a))?I(b=a.then)?b:!1:!1},na=function(a,b){var c={};a||(a=r(global)?window:global);this.register=function(d,e){var n;n=d;var g=n.split("."),v,w=g.pop();v=g.join(".");var y=g.length,R,m=a;if(c[v])n=[c[v],w,n];else{if(0<y)for(v=0;v<y;v++){R=g[v];if(b&&0==v)if(R==b){m=a;continue}else n=b+"."+n;r(m[R])&&(m[R]={});m=m[R]}else b&&
(n=b+"."+n);n=[m,w,n]}g=n[0];w=n[1];Y(g)&&r(g[w])&&(g[w]=e,c[n[2]]=e);return e};this.exists=function(a){return!r(c[a])};this.get=function(d,e){if(!r(c[d]))return c[d];if(b&&!r(c[b+"."+d]))return c[b+"."+d];if(!e){var n=d.split("."),g,v=n.length,w,y=a;for(g=0;g<v;g++)if(w=n[g],b&&0==g&&w==b)y=a;else{if(r(y[w]))return;y=y[w]}y&&(c[d]=y);return y}};this.add=function(a,e){b&&0!==a.indexOf(b)&&(a=b+"."+a);r(c[a])&&(c[a]=e);return e};this.remove=function(a){delete c[a]}};na.prototype={register:null,exists:null,
get:null,add:null,remove:null};M.lib.Namespace=na;var va=(new na(M,"MetaphorJs")).get,ba=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var v=a.shift();c(function(){v[0].apply(v[1],v[2]);a.length?d():b=!1},0)},e=function(c,w,y){y=y||[];a.push([c,w,y]);b||d()},n=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},g=function(a,b){if(a instanceof g)return a;if(!(this instanceof g))return new g(a,b);this._fulfills=
[];this._rejects=[];this._dones=[];this._fails=[];if(!r(a))if(T(a)||!I(a))this.resolve(a);else try{a.call(b,D(this.resolve,this),D(this.reject,this))}catch(c){this.reject(c)}};g.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;
delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=T(a)){a instanceof g?a.then(D(this._processResolveValue,this),D(this._processRejectReason,this)):(new g(c,a)).then(D(this._processResolveValue,this),D(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],
b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&
this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new g,d=this._state;0==d||0!=this._wait?(a&&I(a)?this._fulfills.push([n(a,c),null]):this._fulfills.push([c.resolve,c]),b&&I(b)?this._rejects.push([n(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&I(a)?e(n(a,c),null,[this._value]):c.resolve(this._value):2==d&&
(b&&I(b)?e(n(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)b[0].call(b[1]||null,this._value)},done:function(a,b){var c=this._state;1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)b[0].call(b[1]||null,this._reason)},fail:function(a,b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):
0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:D(this.then,this),done:D(this.done,this),fail:D(this.fail,this),always:D(this.always,this)}},after:function(a){var b=this;if(T(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};I(a.done)?a.done(c):a.then(c)}return b}};g.resolve=function(a){return new g(a)};g.reject=function(a){var b=
new g;b.reject(a);return b};g.all=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=Array(c),m=c,s,q,e=function(a,f){d[f]=a;m--;0==m&&b.resolve(d)};for(s=0;s<c;s++)(function(c){q=a[s];q instanceof g?q.done(function(a){e(a,c)}).fail(b.reject,b):T(q)||I(q)?(new g(q)).done(function(a){e(a,c)}).fail(b.reject,b):e(q,c)})(s);return b};g.when=function(){return g.all(arguments)};g.allResolved=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d=[],m=c,s,q,e=function(a){d.push(a);
n()},n=function(){m--;0==m&&b.resolve(d)};for(s=0;s<c;s++)q=a[s],q instanceof g?q.done(e).fail(n):T(q)||I(q)?(new g(q)).done(e).fail(n):e(q);return b};g.race=function(a){if(!a.length)return g.resolve(null);var b=new g,c=a.length,d,m;for(d=0;d<c&&(m=a[d],m instanceof g?m.done(b.resolve,b).fail(b.reject,b):T(m)||I(m)?(new g(m)).done(b.resolve,b).fail(b.reject,b):b.resolve(m),b.isPending());d++);return b};return g}();M.lib.Promise=ba;var Ca=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],
leave:["mjs-leave"],move:["mjs-move"]},b=0,c=!!ua(),d=window.requestAnimationFrame?window.requestAnimationFrame:function(a){window.setTimeout(a,0)},e=function(a,b,c){var e=function(){(new Date).getTime()-b>=c?a():d(e)};d(e)},n=function w(a,b,c,s,q,g,O){var f=function(){var b=H(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==O?!1:(q.reject(a),!0)},p=function(){if(!f()){var s=c;c++;if(c==b.length){q.resolve(a);H(a,"mjsAnimationQueue").shift();var h=H(a,"mjsAnimationQueue");h.length?(h=h[0],n(h.el,
h.stages,0,h.start,h.deferred,!1,h.id)):H(a,"mjsAnimationQueue",null)}else H(a,"mjsAnimationQueue")[0].position=c,w(a,b,c,null,q);W(a,b[s]);W(a,b[s]+"-active")}},k=function(){if(!f()){J(a,b[c]+"-active");var s=Ba(a);s?e(p,(new Date).getTime(),s):p()}},t=function(){if(!f()){J(a,b[c]);var q;s&&(q=s(a),s=null);T(q)?q.done(k):d(k)}};g?d(t):t()},g=function(d,e,g,m){var s=new ba,q=H(d,"mjsAnimationQueue")||[],r=++b,O=d.getAttribute("mjs-animate"),f,p,k,t,B,h,x;e=e||O;m&&null===O&&(e=null);if(e){E(e)?"["==
e.substr(0,1)?f=(new Function("","return "+e))():(f=a[e],e=va&&va("animate."+e,!0)):I(e)?p=e:Z(e)&&(E(e[0])?f=e:(k=e[0],t=e[1]));ea(e)&&(f=e.stages,p=e.fn,k=e.before,t=e.after,B=e.options?F({},e.options):{},h=e.context||null,x=e.duration||null,g=g||B.start);if(c&&f)return q.push({el:d,stages:f,start:g,deferred:s,position:0,id:r}),H(d,"mjsAnimationQueue",q),1==q.length&&n(d,f,0,g,s,!0,r),s;B=B||{};g&&(B.start=function(){g(d)});B.complete=function(){s.resolve(d)};x&&(B.duration=x);if(p&&I(p))return k&&
F(d.style,k,!0,!1),g&&g(d),H(d,"mjsAnimationQueue",p.call(h,d,function(){s.resolve(d)})),s;if(window.jQuery){e=$(d);k&&e.css(k);H(d,"mjsAnimationQueue","stop");if(p&&E(p))return e[p](B),s;if(t)return e.animate(t,B),s}}g?(p=g(d),T(p)?p.done(function(){s.resolve(d)}):s.resolve(d)):s.resolve(d);return s};g.addAnimationType=function(b,c){a[b]=c};return g}(),wa=function(a){var b=H(a,"mjsAnimationQueue"),c;Z(b)&&b.length?(c=b[0])&&c.stages&&(b=c.position,c=c.stages,W(a,c[b]),W(a,c[b]+"-active")):I(b)?b(a):
"stop"==b&&$(a).stop(!0,!0);H(a,"mjsAnimationQueue",null)},xa=function(){return String.prototype.trim?function(a){return E(a)?a.trim():a}:function(a){return E(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),Da=function(a,b,c){setTimeout(function(){a.apply(b,c||[])},0)},oa=function(){},Ea=function(){return r(JSON)?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),ya=function(a,b){var c,d;if(!a||!E(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||
"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},ca=function(){this.events={}};ca.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new pa(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=new pa(a));return e[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,
b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,da.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=
this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),
b={},c,d=-1,e=a.length;++d<e;c=a[d],b[c]=D(this[c],this));this.api=b}return this.api}};var pa=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=ia();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=r(b)?null:b};pa.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var n=++this.lid,g=c.first||!1;e[d]=
n;a={fn:a,scope:b,uniScope:e,id:n,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};g?this.listeners.unshift(a):this.listeners.push(a);this.map[n]=a;return n},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,n;n=a==parseInt(a)?a:(b||a)[d];if(!n)return!1;for(var g=0,r=e.length;g<r;g++)if(e[g].id==n){c=g;delete e[g].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[n];return!0},hasListener:function(a,
b){var c=this.listeners,d;if(a){b=b||a;d=I(a)?b[this.uni]:a;if(!d)return!1;for(var e=0,n=c.length;e<n;e++)if(c[e].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=da.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):
c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:da.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};(function(){var a=new ca;F(M,a.getApi(),!0,!1)})();M.lib.Observable=
ca;var Fa=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,e=/^(?:GET|HEAD)$/i,n=0,g=function(a,b,l){var c,f;if(E(a)&&l)b.push(encodeURIComponent(l)+"="+encodeURIComponent(a));else if(Z(a)&&l)for(c=0,f=a.length;c<f;c++)g(a[c],b,l+"["+c+"]");else if(Y(a))for(c in a)a.hasOwnProperty(c)&&g(a[c],b,l?l+"["+c+"]":c)},v=function(h,f){h.replace(a,"");if(!1===f.cache){var l=(new Date).getTime();return b.test(h)?h.replace(b,"$1_="+l):h+(c.test(h)?
"&":"?")+"_="+l}!f.data||window.FormData&&f.data instanceof window.FormData||(E(f.data)?l=f.data:(l=[],g(f.data,l,null),l=l.join("&").replace(/%20/g,"+")),f.data=l,e.test(f.method)&&(h+=(c.test(h)?"&":"?")+f.data,f.data=null));return h},w={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},y={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,
timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},R={},m=new ca,s=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},q=function(a,b,l){var c,f;if(!Y(a)&&!I(a)&&l)c=document.createElement("input"),
c.setAttribute("type","hidden"),c.setAttribute("name",l),c.setAttribute("value",a),b.appendChild(c);else if(Z(a)&&l)for(c=0,f=a.length;c<f;c++)q(a[c],b,l+"["+c+"]");else if(Y(a))for(c in a)a.hasOwnProperty(c)&&q(a[c],b,l?l+"["+c+"]":c)},la=function(a){for(var b,l,c="",f=0;f<a.elements.length;f++)if(b=a.elements[f],b.hasAttribute("name"))if(l="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===l)for(l=0;l<b.files.length;c+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[l++].name));
else if("RADIO"!==l&&"CHECKBOX"!==l||b.checked)c+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return c},O=function(a,b,l){var c=b?b.dataType:null;b=b?b.selector:null;if(!E(a))return a;l=l||"";if("xml"===c||!c&&0<=l.indexOf("xml"))return a=ya(xa(a)),b?L(b,a):a;if("html"===c)return a=ya(a,"text/html"),b?L(b,a):a;if("fragment"==c){l=document.createDocumentFragment();c=document.createElement("div");for(c.innerHTML=a;c.firstChild;)l.appendChild(c.firstChild);return l}if("json"===c||
!c&&0<=l.indexOf("json"))return Ea(xa(a));("script"===c||!c&&0<=l.indexOf("javascript"))&&s(a);return a+""},f=function(a){var b=r(window)?"":window.location.href,b=d.exec(b.toLowerCase())||[],l=d.exec(a.url.toLowerCase());this._opt=a;a.crossDomain=!(!l||l[1]===b[1]&&l[2]===b[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")));b=new ba;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||!r(window)&&window.FormData||"iframe"==a.transport||(a.transport=
"iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):la(a.form));a.url=v(a.url,a);l=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new B(a,b,this):new k(a,b,this):new t(a,b,this);this._deferred=b;this._transport=l;b.done(function(a){m.trigger("success",a)});b.fail(function(a){m.trigger("error",a)});b.always(function(){m.trigger("end")});m.trigger("start");a.timeout&&(this._timeout=setTimeout(D(this.onTimeout,
this),a.timeout));a.jsonp&&this.createJsonp();!1===m.trigger("beforeSend",a,l)&&(this._promise=ba.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,l)&&(this._promise=ba.reject());this._promise||(Da(l.send,l),b.abort=D(this.abort,this),b.always(this.destroy,this),this._promise=b)};f.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();
this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);q(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",l=a.jsonpCallback||"jsonp_"+ ++n;a.url+=(c.test(a.url)?"&":"?")+b+"="+l;this._jsonpName=l;r(window)||(window[l]=D(this.jsonpCallback,this));r(global)||
(global[l]=D(this.jsonpCallback,this));return l},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},processResponseData:function(a,b){var l=this._opt;a=O(a,l,b);m.hasListener("processResponse")&&(a=m.trigger("processResponse",a,this._deferred));l.processResponse&&(a=l.processResponse.call(l.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var l=this._deferred;if(this._opt.jsonp)if(a){try{s(a)}catch(c){l.reject(c)}l.isPending()&&
l.reject("jsonp script didn't invoke callback")}else l.reject("jsonp script is empty");else try{l.resolve(this.processResponseData(a,b))}catch(f){l.reject(f)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&(r(window)||delete window[this._jsonpName],
r(global)||delete global[this._jsonpName])}};var p=function(a,b){b=b||{};a&&!E(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),!b.url))throw"Must provide url";F(b,R,!1,!0);F(b,y,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new f(b)).promise()};p.setup=function(a){F(R,a,!0,!0)};p.on=function(){m.on.apply(m,arguments)};p.un=function(){m.un.apply(m,arguments)};p.get=function(a,b){b=b||{};b.method="GET";
return p(a,b)};p.post=function(a,b){b=b||{};b.method="POST";return p(a,b)};p.load=function(a,b,l){l=l||{};E(b)||(l=b);l.dataType="fragment";return p(b,l).done(function(b){if(l.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};p.loadScript=function(a){return p(a,{transport:"script"})};p.submit=function(a,b){b=b||{};b.form=a;return p(null,b)};var k=function(a,b,l){var c;if(!(window.XMLHttpRequest&&(c=new XMLHttpRequest)||(c=new ActiveXObject("Msxml2.XMLHTTP"))||(c=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";
this._xhr=c;this._deferred=b;this._opt=a;this._ajax=l;a.progress&&K(c,"progress",D(a.progress,a.callbackScope));a.uploadProgress&&c.upload&&K(c.upload,"progress",D(a.uploadProgress,a.callbackScope));try{var f;if(a.xhrFields)for(f in a.xhrFields)c[f]=a.xhrFields[f];a.data&&a.contentType&&c.setRequestHeader("Content-Type",a.contentType);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Accept",a.dataType&&w[a.dataType]?w[a.dataType]+", */*; q=0.01":w._default);for(f in a.headers)c.setRequestHeader(f,
a.headers[f])}catch(s){}c.onreadystatechange=D(this.onReadyStateChange,this)};k.prototype={_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=oa,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=oa;var l;a:{try{l=!a.status&&!r(location)&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(c){}l=!1}l?this._ajax.processResponse(E(a.responseText)?a.responseText:
void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=oa;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}};var t=function(a,b,l){this._opt=a;this._ajax=l;this._deferred=b};t.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=
document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);K(a,"load",D(this.onLoad,this));K(a,"error",D(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);
delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};var B=function(a,b,l){this._opt=a;this._ajax=l;this._deferred=b};B.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ ++n,l=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);l.setAttribute("action",this._opt.url);l.setAttribute("target",b);K(a,"load",D(this.onLoad,this));K(a,"error",D(this.onError,
this));this._el=a;try{l.submit()}catch(c){this._deferred.reject(c)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};
return p}(),X=function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},qa=function(){if(r(window.pageYOffset)){var a=document.body,b=document.documentElement;return b.clientHeight?function(){return b.scrollTop}:function(){return a.scrollTop}}return function(){return window.pageYOffset}}(),ra=function(){if(r(window.pageXOffset)){var a=document.body,b=document.documentElement;return b.clientWidth?function(){return b.scrollLeft}:function(){return a.scrollLeft}}return function(){return window.pageXOffset}}(),
G=function(a){var b;b=qa();var c=ra();if(a===window)c=document.documentElement,b={left:0,right:c.clientWidth,top:b,bottom:c.clientHeight+b,width:c.clientWidth,height:c.clientHeight};else if(a.getBoundingClientRect)a=a.getBoundingClientRect(),b={left:a.left+c,top:a.top+b,right:a.right+c,bottom:a.bottom+b},b.width=b.right-b.left,b.height=b.bottom-b.top;else{var d=a.style;b={left:(parseInt(d.left,10)||0)+c,top:(parseInt(d.top,10)||0)+b,width:a.offsetWidth,height:a.offsetHeight,right:0,bottom:0}}b.getCenter=
function(){return this.width/2};b.getCenterX=function(){return this.left+this.width/2};return b},ha={},Ga=function(a,b,c,d){var e=b+"-"+c,n=function(a){a=Q(a);return ma(a.target,b)?d(a):null};ha[e]||(ha[e]=[]);ha[e].push({el:a,ls:n,fn:d});K(a,c,n)},Ha=function(a,b,c,d){var e,n;if(n=ha[b+"-"+c])for(b=-1,e=n.length;++b<e;)n[b].el===a&&n[b].fn===d&&U(a,c,n[b].ls)},za=function(){var a=function(a,b){var c=a.style,d;for(d in b)c[d]=b[d]},b={t:"b",r:"l",b:"t",l:"r"},c={t:"top",r:"right",b:"bottom",l:"left"},
d={t:["l","r"],r:["t","b"],b:["r","l"],l:["b","t"]},e=document.all&&!window.XMLHttpRequest,n=function(){var a={},b={};return{register:function(c){var d=c.getInstanceId(),e=c.getGroup(),g,f,p;a[d]=c;g=0;for(f=e.length;g<f;g++)p=e[g],b[p]||(b[p]={}),b[p][d]=!0;c.on("destroy",this.unregister,this)},unregister:function(b){b=b.getInstanceId();delete a[b]},hideAll:function(c){var d=c.getInstanceId();c=c.getGroup();var e,g,f,p;e=0;for(g=c.length;e<g;e++)for(p in f=c[e],f=b[f],f)a[p]?p==d||a[p].isHideAllIgnored()||
a[p].hide(null,!0,!0):delete f[p]}}}(),g=function(n,m,s){var q,r=this,O,f={backgroundColor:"transparent",width:"0px",height:"0px",position:"absolute",fontSize:"0px",lineHeight:"0px"},p=m.size,k=m.width||2*p;F(r,{init:function(){m.border&&r.createInner()},getEl:function(){return q},getDialogPositionOffset:function(){var a=(r.detectPointerPosition()||"").substr(0,1),c=(n.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1),f={x:0,y:0};a==b[c]&&(f["t"==a||"b"==a?"y":"x"]="b"==a||"r"==a?-p:p);
return f},createInner:function(){var a=F({},m);a.size=p-2*m.border;a.width=k-4*m.border;delete a.border;delete a.borderColor;delete a.borderCls;delete a.offset;O=new g(n,a,m.border)},detectPointerPosition:function(){if(m.position)return m.position;var a=(n.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1);return a?b[a]:null},detectPointerDirection:function(a){return m.direction?m.direction:a},getBorders:function(a,f,s){var q={},l=a.substr(0,1);a=f.substr(0,1);var z=f.substr(1);f=e?"dotted":
"solid";q["border"+X(c[b[l]])]=p+"px solid "+s;q["border"+X(c[l])]="0 "+f+" transparent";z?(q["border"+X(c[z])]="0 solid transparent",q["border"+X(c[b[z]])]=k+"px "+f+" transparent"):(s=Math.floor(k/2),q["border"+X(c[d[a][0]])]=s+"px "+f+" transparent",q["border"+X(c[d[a][1]])]=s+"px "+f+" transparent");return q},getOffsets:function(a,f){var d={},e=a.substr(0,1),l="t"==e||"b"==e?"r":"b";if(!p)switch(document.body.appendChild(q),e){case "t":case "b":p=G(q).height;k=G(q).width;break;case "l":case "r":k=
G(q).height,p=G(q).width}d[c[e]]=s?"auto":-p+"px";d[c[l]]="auto";if(s){var e=f.substr(0,1),z=f.substr(1);d[c[b[l]]]=z?"l"==z||"t"==z?s+"px":-k-s+"px":Math.floor(-k/2)+"px";d[c[b[e]]]=-(p+2*s)+"px"}else{switch(a){case "t":case "r":case "b":case "l":e=f!=a?"l"==f||"t"==f?m.offset:-k+m.offset:-k/2+m.offset;break;case "bl":case "tl":case "lt":case "rt":e=m.offset;break;default:e=-k-m.offset}d["margin"+X(c[b[l]])]=e+"px";switch(a){case "t":case "r":case "b":case "l":e="50%";break;case "tr":case "rb":case "br":case "lb":e=
"100%";break;default:e=0}d[c[b[l]]]=e}return d},render:function(){if(!q){var b=r.detectPointerPosition();if(b)if(m.el){if(E(m.el)){var c=document.createElement("div");c.innerHTML=m.el;q=c.firstChild}else q=m.el;a(q,{position:"absolute"});a(q,r.getOffsets(b));J(q,m.cls);n.getElem().appendChild(q)}else{c=r.detectPointerDirection(b);q=document.createElement("div");var d=document.createComment(" ");q.appendChild(d);a(q,f);a(q,r.getBorders(b,c,m.borderColor||m.color));a(q,r.getOffsets(b,c));J(q,m.borderCls||
m.cls);O&&(O.render(),q.appendChild(O.getEl()));s||n.getElem().appendChild(q)}}},destroy:function(){r.remove();O=r=null},remove:function(){O&&O.remove();q&&(q.parentNode.removeChild(q),q=null)}},!0,!1);r.init();return r},v=function(a){if(!a)return{};var b=function(b,c,d){var e=a[b],f=!1;if(!r(e)){switch(d){case "string":f=E(e);break;case "function":f=I(e);break;case "number":f=ta(e)||e==parseInt(e);break;case "dom":f=e&&(e.tagName||e.nodeName)?!0:!1;break;case "jquery":(f=e&&e.jquery?!0:!1)&&(e=e.get(0));
break;case "boolean":if(!0===e||!1===e)f=!0;break;default:!0===d&&!0===e&&(f=!0),!1===d&&!1===e&&(f=!0)}f&&(a[b]={},a[b][c]=e)}};b("content","value","string");b("content","value","boolean");b("content","fn","function");b("ajax","url","string");b("cls","dialog","string");b("render","tpl","string");b("render","fn","function");b("render","el","dom");b("render","el","jquery");b("show","events",!1);b("show","events","string");b("hide","events",!1);b("hide","events","string");b("toggle","events",!1);b("toggle",
"events","string");b("position","type","string");b("position","type",!1);b("position","get","function");b("overlay","enabled","boolean");b("pointer","position","string");b("pointer","size","number");return a},w={target:null,debug:!1,group:null,modal:!1,useHref:!1,content:{value:"",fn:null,prepare:null,attr:null},ajax:{url:null,data:null,dataType:"text",method:"GET"},cls:{dialog:null,visible:null,hidden:null,loading:null},selector:{content:null},buttons:null,render:{tpl:"<div></div>",fn:null,el:null,
zIndex:null,lazy:!0,style:null,appendTo:null,id:null,keepVisible:!1,keepInDOM:!1,lifetime:null},events:{show:{click:{preventDefault:!0,stopPropagation:!0,returnValue:!1,process:null}}},show:{delay:null,single:!1,events:null,animate:!1,ignoreHideAll:!1,focus:!1,preventScroll:!1},hide:{delay:null,timeout:null,events:null,destroy:!1,animate:!1,cancelShowDelay:!0},toggle:{events:null},position:{type:"t",offsetX:0,offsetY:0,axis:null,get:null,screenX:!1,screenY:!1,resize:!0},pointer:{position:null,direction:null,
size:0,width:null,color:null,offset:0,border:0,borderColor:null,el:null,cls:null,borderCls:null},overlay:{enabled:!1,color:"#000",opacity:.5,cls:null,animateShow:!1,animateHide:!1,preventScroll:!1},callback:{scope:null,contentchange:null,beforeshow:null,show:null,beforehide:null,hide:null,render:null,lifetime:null,targetchange:null,button:null}},y=function(b,c){b&&!E(b)&&(c=b,b=null);c=c||{};var d=this,e={},r=ia(),D=new ca,f=F({},w,v(y.defaults),v(y[b]),v(c),!0,!0),p=f.callback.scope||e,k,t,B,h={bindSelfOnRender:!1,
target:null,visible:!1,enabled:!0,frozen:!1,rendered:!1,hideTimeout:null,hideDelay:null,showDelay:null,dynamicTarget:!1,dynamicTargetEl:null,images:0,position:null,destroyDelay:null};c=null;F(e,D.getApi(),{getElem:function(){return k},getInstanceId:function(){return r},getCfg:function(){return F({},f)},getGroup:function(){return f.group?E(f.group)?[f.group]:f.group:[""]},setTarget:function(a){if(!a)return e;var b=!1,c=h.target;h.target?(d.setHandlers("unbind","_target"),b=!0):h.dynamicTarget&&(b=
!0);E(a)?(h.dynamicTarget=!0,h.target=null):(h.dynamicTarget=!1,h.target=a);b&&(d.setHandlers("bind","_target"),d.trigger("targetchange",e,a,c));return e},getTarget:function(){return h.dynamicTarget?h.dynamicTargetEl:f.target},isEnabled:function(){return h.enabled},isVisible:function(){return h.visible},isHideAllIgnored:function(){return f.show.ignoreHideAll},isFrozen:function(){return h.frozen},enable:function(){h.enabled=!0;return e},disable:function(){d.hide();h.enabled=!1;return e},freeze:function(){h.frozen=
!0;return e},unfreeze:function(){h.frozen=!1;return e},toggle:function(a,b){return a&&a.stopPropagation&&h.dynamicTarget&&h.visible&&d.isDynamicTargetChanged(a)?d.show(a):d[h.visible?"hide":"show"](a,b)},show:function(a,b){var c=a&&a.stopPropagation?null:e,g=f.show;if(!e.isEnabled())return f.debug&&console.log("show: not enabled",e.getTarget()),c;a&&a.stopPropagation&&f.events.show&&f.events.show[a.type]&&(c=f.events.show[a.type],c.process?c=c.process(e,a):(c.stopPropagation&&a.stopPropagation(),
c.preventDefault&&a.preventDefault(),c=c.returnValue));if(h.visible&&h.hideTimeout)return window.clearTimeout(h.hideTimeout),h.hideTimeout=window.setTimeout(d.hide,f.hide.timeout),f.debug&&console.log("show: hide timeout was set",e.getTarget()),c;if(h.hideDelay)return window.clearTimeout(h.hideDelay),h.hideDelay=null,h.visible=!0,f.debug&&console.log("show: hide delay was set; already shown",e.getTarget()),c;if(h.frozen)return f.debug&&console.log("show: frozen",e.getTarget()),c;h.destroyDelay&&(window.clearTimeout(h.destroyDelay),
h.destroyDelay=null);var u=!1;a&&a.stopPropagation&&h.dynamicTarget&&(u=d.changeDynamicTarget(a));if(h.visible)if(u)if(f.render.fn)d.hide(null,!0);else return d.reposition(a),c;else return f.debug&&console.log("show: already shown",k),c;k?u&&d.changeDynamicContent():d.render();if(!1===d.trigger("beforeshow",e,a))return f.debug&&console.log("show: beforeshow return false",e.getTarget()),c;wa(k);h.visible=!0;g.single&&n.hideAll(d);d.toggleTitleAttribute(!1);g.delay&&!b?h.showDelay=window.setTimeout(function(){d.showAfterDelay(a)},
g.delay):d.showAfterDelay(a,b);return c},hide:function(a,b,c){h.hideTimeout=null;var g=a&&a.stopPropagation?null:e;a&&a.stopPropagation&&f.events.hide&&f.events.hide[a.type]&&(g=f.events.hide[a.type],g.process?g=g.process(e,a):(g.stopPropagation&&a.stopPropagation(),g.preventDefault&&a.preventDefault(),g=g.returnValue));!h.visible&&h.hideDelay&&b&&(window.clearTimeout(h.hideDelay),h.hideDelay=null,h.visible=!0);if(!k||!h.visible||!d.isEnabled())return f.debug&&console.log("hide: elem/visible/enabled: ",
k,h.visible,d.isEnabled()),g;if(h.showDelay)return f.hide.cancelShowDelay||c?(window.clearTimeout(h.showDelay),h.showDelay=null,h.visible=!1,f.debug&&console.log("hide: cancelShowDelay: ",d.getTarget())):f.debug&&console.log("hide: show delay was set",d.getTarget()),g;if(h.frozen)return f.debug&&console.log("hide: frozen",d.getTarget()),g;if(!1===d.trigger("beforehide",e,a))return f.debug&&console.log("hide: beforehide returned false",d.getTarget()),g;wa(k);h.visible=!1;d.toggleTitleAttribute(!0);
h.dynamicTarget&&d.resetDynamicTarget();f.hide.delay&&!b?h.hideDelay=window.setTimeout(function(){d.hideAfterDelay(a)},f.hide.delay):d.hideAfterDelay(a,b);return g},setPositionType:function(a){a&&(E(a)?(f.position.get=a,f.position.type=!1):(f.position.get=null,f.position.type=a));a=f.position.type;!1===a?h.position=!1:f.position.get&&"m"!=a?h.position="fn":(a=a.substr(0,1),h.position="w"==a?"window":"m"==a?"mouse":"target");t&&(t.remove(),k&&t.render())},getPosition:function(a){if(!k)return null;
var b,c=f.position;switch(h.position){case !1:return null;case "target":b=d.getTargetPosition(a);break;case "mouse":b=d.getMousePosition(a);break;case "window":b=d.getWindowPosition(a);break;case "fn":b=c.get.call(p,e,a)}if(!1!==c.screenX||!1!==c.screenY)b=d.correctScreenPosition(b,c.screenX,c.screenY);return b},reposition:function(b){b&&(b=Q(b));if(b=d.getPosition(b))void 0!=b.x&&a(k,{left:b.x+"px"}),void 0!=b.y&&a(k,{top:b.y+"px"}),void 0==b.x&&void 0==b.y&&a(k,b)},getContentElem:function(){return k?
f.selector.content?L(f.selector.content,k).shift()||k:k:null},setContent:function(a,b){b=b||"";if(!k)return f.content.value=a,e;f.content.prepare&&(a=f.content.prepare(e,b,a));var c=e.getContentElem(),g=h.rendered&&!f.selector.content&&t,u=g&&t.getEl();if(g&&u)try{k.removeChild(u)}catch(n){}if(E(a))c.innerHTML=a;else for(var p in a){var m=f.selector[p];m&&(m=L(m,c).shift())&&(m.innerHTML=a[p])}if(g&&u)try{k.appendChild(u)}catch(r){}c=L("img",c);h.images=c.length;p=-1;for(g=c.length;++p<g;K(c[p],"load",
d.onImageLoad));d.trigger("contentchange",e,a,b);d.onContentChange();return e},readContent:function(){var a=e.getTarget(),b;a&&(b=f.content.attr?a.getAttribute(f.content.attr):a.getAttribute("tooltip")||a.getAttribute("title")||a.getAttribute("alt"));b&&d.setContent(b,"attribute");return e},loadContent:function(a){J(k,f.cls.loading);a=F({},f.ajax,a,!0,!0);d.trigger("beforeajax",e,a);return Fa(a).done(d.onAjaxLoad)},destroy:function(){d.trigger("destroy",e);U(window,"resize",d.onWindowResize);U(window,
"scroll",d.onWindowScroll);d.destroyElem();t&&(t.destroy(),t=null);d.setHandlers("unbind");D.destroy();B=h=e=d=D=null},setFocus:function(){var a=f.show.focus,b;if(!0===a)if(a=L("input",k).concat(L("textarea",k)),0<a.length)a[0].focus();else{if(f.buttons)for(b in f.buttons){(b=L(f.buttons[b],k).shift())&&b.focus();break}}else(b=L(a,k).shift())&&b.focus()}},!0,!1);F(d,e,{init:function(){n.register(d);f.modal&&(f.overlay.enabled=!0);d.setPositionType();d.setTarget(f.target);if(f.pointer.size||f.pointer.el)t=
new g(d,f.pointer);f.render.lazy||d.render();d.setHandlers("bind")},setHandlers:function(a,b){for(var c=["show","hide","toggle"],g="bind"==a?K:U,u="bind"==a?Ga:Ha,p,n,m,r,t,x,w,v,y,A;p=c.shift();)if(n=f[p].events,!1!==n){if(E(n)||Z(n))h.dynamicTarget?(t={},t[n]=f.target,n={_html:t}):n={_target:n};for(m in n){if(b)if("_self"==b){if("_self"!=m&&"_overlay"!=m&&">"!=m.substr(0,1))continue}else if(m!=b)continue;if("_self"!=m&&"_overlay"!=m&&">"!=m.substr(0,1)||k){if(w=n[m]){switch(m){case "_target":v=
[d.getTarget()];break;case "_self":v=[k];break;case "_window":v=[window];break;case "_document":v=[document];break;case "_html":v=[document.documentElement];break;case "_overlay":v=[B];break;default:v=">"==m.substr(0,1)?L(m.substr(1),k):L(m)}if(v&&v.length)if(E(w)&&(w=[w]),Z(w))for(t=0,x=w.length;t<x;t++)for(y=-1,A=v.length;++y<A;g(v[y],w[t],e[p]));else for(r in w)for(y=-1,A=v.length;++y<A;u(v[y],w[r],r,e[p]));}}else h.bindSelfOnRender=!0}}},resetDynamicTarget:function(){var a=h.dynamicTargetEl;a&&
(d.setHandlers("unbind","_target"),d.trigger("targetchange",e,null,a))},isDynamicTargetChanged:function(a){var b=f.target;a=a.target;for(var c=h.dynamicTargetEl;a&&!ma(a,b);)a=a.parentNode;return a?!c||c!==a:!1},changeDynamicTarget:function(a){var b=f.target;a=a.target;for(var c=h.dynamicTargetEl;a&&!ma(a,b);)a=a.parentNode;if(!a||c&&c===a)return!1;c&&d.setHandlers("unbind","_target");h.dynamicTargetEl=a;d.setHandlers("bind","_target");d.trigger("targetchange",e,a,c);return!0},showAfterDelay:function(a,
b){h.showDelay=null;if(h.visible){f.position.manual||d.reposition(a);"mouse"==h.position&&K(document.documentElement,"mousemove",d.onMouseMove);var c=f.position;(c.resize||c.screenX||c.screenY)&&K(window,"resize",d.onWindowResize);(c.scroll||c.screenX||c.screenY)&&K(window,"scroll",d.onWindowScroll);if(b||!1!==d.trigger("afterdelay",e,a)){B&&(f.overlay.animateShow?d.animate("show",null,!0):B.style.display="");if(f.show.preventScroll){var c=f.show.preventScroll,g,k;!0===c&&(c="body");c=L(c);g=-1;for(k=
c.length;++g<k;K(c[g],"mousewheel",d.onPreventScroll)&&K(c[g],"touchmove",d.onPreventScroll));}f.show.animate&&!b?d.animate("show").done(function(){d.showAfterAnimation(a)}):d.showAfterAnimation(a)}else h.visible=!1,f.debug&&console.log("showAfterDelay: afterdelay returned false",e.getTarget())}else f.debug&&console.log("showAfterDelay: already hidden",d.getTarget())},showAfterAnimation:function(a){h.visible?(W(k,f.cls.hidden),J(k,f.cls.visible),f.render.keepVisible||(k.style.display=""),f.hide.timeout&&
(h.hideTimeout=window.setTimeout(d.hide,f.hide.timeout)),f.show.focus&&window.setTimeout(d.setFocus,20),d.trigger("show",e,a)):f.debug&&console.log("showAfterAnimation: already hidden",d.getTarget())},hideAfterDelay:function(a,b){h.hideDelay=null;if(h.visible)f.debug&&console.log("hideAfterDelay: already shown again",d.getTarget());else{"mouse"==h.position&&U(document.documentElement,"mousemove",d.onMouseMove);var c=f.position;(c.resize||c.screenX||c.screenY)&&U(window,"resize",d.onWindowResize);
(c.scroll||c.screenX||c.screenY)&&U(window,"scroll",d.onWindowScroll);if(b||!1!==d.trigger("afterhidedelay",e,a)){if(f.show.preventScroll){var c=f.show.preventScroll,g,n;!0===c&&(c="body");c=L(c);g=-1;for(n=c.length;++g<n;U(c[g],"mousewheel",d.onPreventScroll)&&U(c[g],"touchmove",d.onPreventScroll));}B&&(f.overlay.animateShow?d.animate("hide",null,!0).done(function(){B.style.display="none"}):B.style.display="none");f.hide.animate&&!b?d.animate("hide").done(function(){d.hideAfterAnimation(a)}):d.hideAfterAnimation(a)}else h.visible=
f.cls.hidden?!ja(k,f.cls.hidden):!(0>=k.offsetWidth||0>=k.offsetHeight),f.debug&&console.log("hideAfterDelay: afterhdelay returned false",d.getTarget())}},hideAfterAnimation:function(a){h.visible?f.debug&&console.log("hideAfterAnimation: already shown again",d.getTarget()):(W(k,f.cls.visible),J(k,f.cls.hidden),f.render.keepVisible||(k.style.display="none"),d.trigger("hide",e,a),a=f.render.lifetime,null!==a&&(0===a?d.destroyElem():h.destroyDelay=window.setTimeout(d.destroyElem,a)),k&&f.hide.destroy&&
window.setTimeout(function(){H(k,f.instanceName,null);d.destroy()},0))},render:function(){if(k)f.debug&&console.log("element already rendered",k);else{var b=f.render,c=f.cls;if(b.fn){var g=b.fn.call(p,e);b[E(g)?"tpl":"el"]=g}b.el?E(b.el)?(k=L(b.el).shift(),b.keepInDOM=!0):k=b.el:(g=document.createElement("div"),g.innerHTML=b.tpl,k=g.firstChild);k||(k=document.createElement("div"));b.id&&k.setAttribute("id",b.id);f.render.keepVisible||(k.style.display="none");J(k,c.dialog);J(k,c.hidden);b.style&&a(k,
b.style);f.overlay.enabled&&(B=document.createElement("div"),a(B,{display:"none",position:"fixed",left:0,top:0,right:0,bottom:0,opacity:f.overlay.opacity,backgroundColor:f.overlay.color}),document.body.appendChild(B),K(B,"click",d.onOverlayClick),b.zIndex&&a(B,{zIndex:b.zIndex}),f.overlay.cls&&J(B,f.overlay.cls));b.appendTo?b.appendTo.appendChild(k):!1!==b.appendTo&&document.body.appendChild(k);b.zIndex&&a(k,{zIndex:b.zIndex});b=f.content;if(!1!==b.value)if(b.value)d.setContent(b.value);else if(b.fn)d.setContent(b.fn.call(p,
e));else d[f.ajax.url?"loadContent":"readContent"]();t&&t.render();if(f.buttons)for(var n in f.buttons)if(b=L(f.buttons[n],k).shift())H(b,"metaphorjsTooltip-button-id",n),K(b,"click",d.onButtonClick),K(b,"keyup",d.onButtonKeyup);h.bindSelfOnRender&&(d.setHandlers("bind","_self"),h.bindSelfOnRender=!1);h.rendered=!0;d.trigger("render",e)}},animate:function(a,b,c){var e,h;e=c?"show"==a?f.overlay.animateShow:f.overlay.animateHide:f[a].animate;I(e)&&(e=e(d,b));h=e.skipDisplayChange||!1;"boolean"==typeof e?
e=a:E(e)&&(e=[e]);return Ca(k,e,function(){"show"!=a||h||(c?B.style.display="":k.style.display="")})},toggleTitleAttribute:function(a){var b=e.getTarget(),c;b&&(!1===a?(H(b,"tmp-title",b.getAttribute("title")),b.removeAttribute("title")):(c=H(b,"tmp-title"))&&b.setAttribute("title",c))},changeDynamicContent:function(){f.content.fn?d.setContent(f.content.fn.call(p,e)):f.content.attr&&d.readContent()},getDialogSize:function(){var b=f.cls.hidden?ja(k,f.cls.hidden):!!(0>=k.offsetWidth||0>=k.offsetHeight),
c,d=k.style.left;b&&(a(k,{left:"-1000px"}),k.style.display="");c={width:G(k).width,height:G(k).height};b&&(a(k,{left:d}),k.style.display="none");return c},getTargetSize:function(){var a=d.getTarget();return a?{width:G(a).width,height:G(a).height}:null},getTargetPosition:function(a,b){var c=d.getTarget();if(!c)return null;var e=d.getDialogSize(),c=G(c),h=d.getTargetSize(),g={};b=b||f.position.type;var k=b.substr(0,1),n=b.substr(1),m=f.position.offsetX,p=f.position.offsetY,q=t?t.getDialogPositionOffset():
null;switch(k){case "t":g.y=c.top-e.height-p;break;case "r":g.x=c.left+h.width+m;break;case "b":g.y=c.top+h.height+p;break;case "l":g.x=c.left-e.width-m}switch(n){case "t":g.y=c.top+p;break;case "r":g.x=c.left+h.width-e.width-m;break;case "b":g.y=c.top+h.height-e.height-p;break;case "l":g.x=c.left+m;break;case "rc":g.x=c.left+h.width+m;break;case "lc":g.x=c.left-e.width-m;break;case "":switch(k){case "t":case "b":g.x=c.left+h.width/2-e.width/2;break;case "r":case "l":g.y=c.top+h.height/2-e.height/
2}}q&&(g.x+=q.x,g.y+=q.y);return g},getMousePosition:function(a){if(!a)return null;var b=d.getDialogSize(),c={},h=f.position.type.substr(1),g=f.position.offsetX,k=f.position.offsetY,n=f.position.axis,m=t?t.getDialogPositionOffset():null;switch(h){case "":c=f.position.get.call(p,e,a);break;case "t":c.y=a.pageY-b.height-k;c.x=a.pageX-b.width/2;break;case "r":c.y=a.pageY-b.height/2;c.x=a.pageX+g;break;case "b":c.y=a.pageY+k;c.x=a.pageX-b.width/2;break;case "l":c.y=a.pageY-b.height/2;c.x=a.pageX-b.width-
g;break;case "rt":c.y=a.pageY-b.height-k;c.x=a.pageX+g;break;case "rb":c.y=a.pageY+k;c.x=a.pageX+g;break;case "lt":c.y=a.pageY-b.height-k;c.x=a.pageX-b.width-g;break;case "lb":c.y=a.pageY+k,c.x=a.pageX-b.width-g}m&&(c.x+=m.x,c.y+=m.y);n&&(a=d.getTargetPosition(a,h))&&("x"==n?c.y=a.y:c.x=a.x);return c},getWindowPosition:function(){var a=d.getDialogSize(),b={},c=f.position.type.substr(1),e=f.position.offsetX,h=f.position.offsetY,g=qa(),k=ra(),n=G(window).width,m=G(window).height;switch(c){case "c":b.y=
m/2-a.height/2+g;b.x=n/2-a.width/2+k;break;case "t":b.y=g+h;b.x=n/2-a.width/2+k;break;case "r":b.y=m/2-a.height/2+g;b.x=n-a.width+k-e;break;case "b":b.y=m-a.height+g-h;b.x=n/2-a.width/2+k;break;case "l":b.y=m/2-a.height/2+g;b.x=k+e;break;case "rt":b.y=g+h;b.x=n-a.width+k-e;break;case "rb":b.y=m-a.height+g-h;b.x=n-a.width+k-e;break;case "lt":b.y=g+h;b.x=k+e;break;case "lb":b.y=m-a.height+g-h,b.x=k+e}return b},correctScreenPosition:function(a,b,c){var e=d.getDialogSize(),f=qa(),g=ra(),h=G(window).width,
k=G(window).height;c&&a.y+e.height>k+f-c&&(a.y=k+f-c-e.height);b&&a.x+e.width>h+g-b&&(a.x=h+g-b-e.width);c&&a.y<f+c&&(a.y=f+c);b&&a.x<g+b&&(a.x=g+b);return a},onMouseMove:function(a){d.reposition(Q(a))},onWindowResize:function(a){d.reposition(Q(a))},onWindowScroll:function(a){d.reposition(Q(a))},onPreventScroll:function(a){Q(a).preventDefault()},onOverlayClick:function(a){return f.modal?(a=Q(a),a.preventDefault(),a.stopPropagation(),!1):null},onButtonClick:function(a){var b=Q(a).target;(b=H(b,"metaphorjsTooltip-button-id"))&&
d.trigger("button",e,b,a)},onButtonKeyup:function(a){if(13==a.keyCode||32==a.keyCode){var b=H(a.target,"metaphorjsTooltip-button-id");b&&d.trigger("button",e,b,Q(a))}},onAjaxLoad:function(a){W(k,f.cls.loading);d.setContent(a,"ajax")},onImageLoad:function(){h.images--;d.onContentChange()},onContentChange:function(){h.visible&&d.reposition()},destroyElem:function(){d.setHandlers("unbind","_self");h.bindSelfOnRender=!0;t&&t.remove();B&&(B.parentNode.removeChild(B),B=null);k&&(f.render.keepInDOM||k.parentNode.removeChild(k),
k=null);d.trigger("lifetime",e)}},!0,!1);delete f.callback.scope;for(var x in f.callback)e.on(x,f.callback[x],p);f.target&&f.useHref&&(x=f.target.getAttribute("href"),"#"==x.substr(0,1)?f.render.el=x:f.ajax.url=x);d.init();return e};F(y,{defaults:{}});return y}();M.lib.Dialog=za;window.jQuery&&(jQuery.fn.metaphorjsTooltip=function(a,b,c){var d="dialog",e;"string"==typeof a&&"destroy"!=a&&(e=a,a=b,b=c);a=a||{};d+="-"+(b||"default");this.each(function(){var b=H(this,d);if(b)if("destroy"==a)b.destroy(),
H(this,d,null);else throw Error("MetaphorJs tooltip already instantiated for this html element");else a.target=this,a.instanceName=d,H(this,d,new za(e,a))})});"undefined"!=typeof global?global.MetaphorJs=M:window.MetaphorJs=M})();
