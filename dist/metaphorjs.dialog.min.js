(function(){var da={lib:{},cmp:{},view:{}},ea=Array.prototype.slice,Ba=Object.prototype.toString,X=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var c=a[Ba.call(b)];return void 0===c?-1:1==c&&isNaN(b)?8:c}}(),fa=function(a){return"object"==typeof a&&3===X(a)&&!a.nodeType},ka=function(a){return!0===
a||!1===a},R=function(){return function b(){var c=!1,e=!1,f=ea.call(arguments),p=f.shift(),m,v,u;ka(f[f.length-1])&&(c=f.pop());ka(f[f.length-1])&&(e=c,c=f.pop());for(;f.length;)if(m=f.shift())for(v in m)if(m.hasOwnProperty(v)&&void 0!==(u=m[v]))if(e)if(p[v]&&fa(p[v])&&fa(u))b(p[v],u,c,e);else{if(!0===c||void 0==p[v])fa(u)?(p[v]={},b(p[v],u,c,!0)):p[v]=u}else if(!0===c||void 0==p[v])p[v]=u;return p}}(),aa=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);
if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),w=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},wa=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),la=function(a,b){return b?wa("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1},K=function(a,b){b&&!la(a,b)&&(a.className+=" "+b)},S=function(a,b){b&&(a.className=
a.className.replace(wa("(?:^|\\s)"+b+"(?!\\S)"),""))},Y=function(a){return"object"==typeof a&&5===X(a)},F=function(){var a={};return function(b,c,e){b=b._mjsid||(b._mjsid=aa());var f=a[b];return void 0!==e?(f||(f=a[b]={}),f[c]=e):f?f[c]:void 0}}(),I=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},L=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},ga=function(){return!1},ha=function(){return!0},ba=function(a){if(a instanceof ba)return a;
if(!(this instanceof ba))return new ba(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var e,f=a.button;void 0===this.pageX&&null!==a.clientX&&(e=this.target?this.target.ownerDocument||document:document,b=e.documentElement,e=e.body,this.pageX=a.clientX+(b&&b.scrollLeft||e&&e.scrollLeft||0)-(b&&b.clientLeft||e&&e.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||e&&e.scrollTop||0)-(b&&b.clientTop||
e&&e.clientTop||0));this.which||void 0===f||(this.which=f&1?1:f&2?3:f&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ha:ga;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};ba.prototype={isDefaultPrevented:ga,isPropagationStopped:ga,isImmediatePropagationStopped:ga,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ha;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;
this.isPropagationStopped=ha;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ha;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};var O=function(a){return new ba(a)},E=function(a){return"string"==typeof a||0===X(a)},ma=function(a){if(a&&void 0!=!a.length&&!E(a)){for(var b=[],c=-1,e=a.length>>>0;++c!==e;b[c]=a[c]);return b}return a?[a]:[]},P=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,
b=/=([^\]]+)/,c=/ *, */,e=/(\([^)]*)\+/,f=/(\[[^\]]+)~/,p=/(~|>|\+)/,m=/ +/,v=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,u=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,D=/\D/,M=/[^(]*\(([^)]*)\)/,q=/\(.*/,g=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,s=document,z=!!s.getElementsByClassName,N=!!s.querySelectorAll,d={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&
1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,l){var k=a.nodeIndex||0,b=l[3]=l[3]?("%"===l[2]?-1:1)*l[3]:0,d=l[1];if(k)return!((k+b)%d);var g=a.parentNode.firstChild;k++;do if(1==g.nodeType&&(g.nodeIndex=++k)&&a===g&&(k+b)%d)return 0;while(g=g.nextSibling);return 1},"nth-last-child":function(a,l){var k=a.nodeIndexLast||0,b=l[3]?("%"===l[2]?-1:1)*l[3]:0,d=l[1];if(k)return!((k+b)%d);var g=a.parentNode.lastChild;k++;do if(1==g.nodeType&&(g.nodeLastIndex=
k++)&&a===g&&(k+b)%d)return 0;while(g=g.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,l){return a.lang!==l&&s.documentElement.lang!==l},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},r={},h=function(a){return r[a]||
(r[a]=new RegExp("(^| +)"+a+"($| +)"))},t={"":function(a,l){return null!==a.getAttribute(l)},"=":function(a,l,k){return(l=a.getAttribute(l))&&l===k},"&=":function(a,l,k){return(l=a.getAttribute(l))&&h(k).test(l)},"^=":function(a,l,k){return(l=a.getAttribute(l)+"")&&!l.indexOf(k)},"$=":function(a,l,k){return(l=a.getAttribute(l)+"")&&l.indexOf(k)==l.length-k.length},"*=":function(a,l,k){return(l=a.getAttribute(l)+"")&&-1!=l.indexOf(k)},"|=":function(a,l,k){return(l=a.getAttribute(l)+"")&&(l===k||!!l.indexOf(k+
"-"))},"!=":function(a,l,k){return!(l=a.getAttribute(l))||!h(k).test(l)}},l=function(l,A){A=A||s;var k=[],y=null,J,h,U,x,W,Q,r;if(N)try{k=ma(A.querySelectorAll(l.replace(b,'="$1"')))}catch(w){y=!0}if(!N||y)if(a.test(l))switch(y=0,l.charAt(0)){case "#":y=l.slice(1);k=s.getElementById(y);k.id!==y&&(k=s.all[y]);k=k?[k]:[];break;case ".":J=l.slice(1);if(z)k=ma((k=A.getElementsByClassName(J)).length?k:[]);else{J=" "+J+" ";h=A.getElementsByTagName("*");for(U=0;x=h[U++];)-1!=(" "+x.className+" ").indexOf(J)&&
(k[y++]=x);k=y?k:[]}break;case ":":h=A.getElementsByTagName("*");U=0;W=l.replace(M,"$1");for(Q=l.replace(q,"");x=h[U++];)d[Q]&&!d[Q](x,W)&&(k[y++]=x);k=y?k:[];break;case "[":h=A.getElementsByTagName("*");U=0;x=g.exec(l);J=x[1];r=x[2]||"";for(W=x[3];x=h[U++];)t[r]&&(t[r](x,J,W)||"class"===J&&t[r](x,"className",W))&&(k[y++]=x);k=y?k:[];break;default:k=ma((k=A.getElementsByTagName(l)).length?k:[])}else{for(var E=l.split(c),F=E.length-1,I=!!F,G,P,C,R,H,K,L,O,V,B,S,T;y=E[F--];){P=(G=y.replace(e,"$1%").replace(f,
"$1&").replace(p," $1 ").split(m)).length;U=0;R=" ";for(h=[A];C=G[U++];)if(" "!==C&&">"!==C&&"~"!==C&&"+"!==C&&h){C=C.match(v);H=C[1]||"*";K=C[2];L=C[3]?" "+C[3]+" ":"";J=C[4];r=C[5]||"";Q=C[7];W="nth-child"===Q||"nth-last-child"===Q?u.exec("even"===C[8]&&"2n"||"odd"===C[8]&&"2n%1"||!D.test(C[8])&&"0n%"+C[8]||C[8]):C[8];O=[];y=V=0;for(S=U==P;B=h[V++];)switch(R){case " ":T=B.getElementsByTagName(H);for(B=0;x=T[B++];)K&&x.id!==K||L&&-1==(" "+x.className+" ").indexOf(L)||!(!J||t[r]&&(t[r](x,J,C[6])||
"class"===J&&t[r](x,"className",C[6])))||x.yeasss||(d[Q]?d[Q](x,W):Q)||(S&&(x.yeasss=1),O[y++]=x);break;case "~":for(H=H.toLowerCase();(B=B.nextSibling)&&!B.yeasss;)1!=B.nodeType||"*"!==H&&B.nodeName.toLowerCase()!==H||K&&B.id!==K||L&&-1==(" "+B.className+" ").indexOf(L)||!(!J||t[r]&&(t[r](x,J,C[6])||"class"===J&&t[r](x,"className",C[6])))||B.yeasss||(d[Q]?d[Q](B,W):Q)||(S&&(B.yeasss=1),O[y++]=B);break;case "+":for(;(B=B.nextSibling)&&1!=B.nodeType;);!B||B.nodeName.toLowerCase()!==H.toLowerCase()&&
"*"!==H||K&&B.id!==K||L&&-1==(" "+x.className+" ").indexOf(L)||!(!J||t[r]&&(t[r](x,J,C[6])||"class"===J&&t[r](x,"className",C[6])))||B.yeasss||(d[Q]?d[Q](B,W):Q)||(S&&(B.yeasss=1),O[y++]=B);break;case ">":for(T=B.getElementsByTagName(H),U=0;x=T[U++];)x.parentNode!==B||K&&x.id!==K||L&&-1==(" "+x.className+" ").indexOf(L)||!(!J||t[r]&&(t[r](x,J,C[6])||"class"===J&&t[r](x,"className",C[6])))||x.yeasss||(d[Q]?d[Q](x,W):Q)||(S&&(x.yeasss=1),O[y++]=x)}h=O}else R=C;if(I){if(!h.concat){O=[];for(B=0;x=h[B];)O[B++]=
x;h=O}k=h.concat(1==k.length?k[0]:k)}else k=h}for(y=k.length;y--;)k[y].yeasss=k[y].nodeIndex=k[y].nodeIndexLast=null}return k};l.is=function(a,b){var k=l(b,a.parentNode),d,g;d=-1;for(g=k.length;++d<g;)if(k[d]===a)return!0;return!1};return l}(),na=P.is,xa=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",e="transitionDelay",f="transitionDuration",p="transform",m=null;(function(){var v=document.createElement("div"),u=!1,D,M,q;if(void 0!==v.style.animationName)u=
!0;else for(M=0,q=a.length;M<q;M++)if(D=a[M],void 0!==v.style[D+"AnimationName"]){u=!0;b=D+"AnimationDelay";c=D+"AnimationDuration";e=D+"TransitionDelay";f=D+"TransitionDuration";p=D+"Transform";break}return u})()&&(m={animationDelay:b,animationDuration:c,transitionDelay:e,transitionDuration:f,transform:p});return function(){return m}}(),Ca=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,D){var e,q,g=c.length;for(e=0;e<g;e++)q=
a(c[e])+a(D[e]),b=Math.max(q,b);return b},c=xa(),e=c?c.animationDuration:null,f=c?c.animationDelay:null,p=c?c.transitionDuration:null,m=c?c.transitionDelay:null;return function(a){if(!c)return 0;var u=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var D=(u[e]||"").split(","),M=(u[f]||"").split(","),q=(u[p]||"").split(","),u=(u[m]||"").split(",");a=Math.max(a,b(a,D,M));return a=Math.max(a,b(a,q,u))}}(),G=function(a){return"function"==typeof a},oa=function(a){var b=F(a,"mjsAnimationQueue"),
c,e;if(Y(b)&&b.length){if(b=b[0])b.stages&&(c=b.position,e=b.stages,S(a,e[c]),S(a,e[c]+"-active")),b.deferred&&b.deferred.reject(b.el)}else G(b)?b(a):"stop"==b&&$(a).stop(!0,!0);F(a,"mjsAnimationQueue",null)},ia=function(a){if(null===a||"object"!=typeof a)return!1;a=X(a);return 2<a||-1==a},V=function(a){var b;return a&&(ia(a)||G(a))?G(b=a.then)?b:!1:!1},pa=function(a,b,c){setTimeout(function(){a.apply(b,c||[])},0)},qa=function(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)pa(function(){console.log(a);
b&&console.log(b)});else throw a;},Z=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},e=function(){b=!0;var v=a.shift();c(function(){v[0].apply(v[1],v[2]);a.length?e():b=!1},0)},f=function(c,u,D){D=D||[];a.push([c,u,D]);b||e()},p=function(a,b){return function(c){try{b.resolve(a(c))}catch(e){b.reject(e)}}},m=function(a,b){if(a instanceof m)return a;if(!(this instanceof m))return new m(a,b);var c;this._fulfills=[];this._rejects=[];this._dones=[];this._fails=
[];if(0<arguments.length)if(c=V(a))a instanceof m?a.then(w(this.resolve,this),w(this.reject,this)):(new m(c,a)).then(w(this.resolve,this),w(this.reject,this));else if(G(a))try{a.call(b,w(this.resolve,this),w(this.reject,this))}catch(e){this.reject(e)}else this.resolve(a)};m.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==
this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=V(a)){a instanceof m?a.then(w(this._processResolveValue,this),w(this._processRejectReason,this)):(new m(c,a)).then(w(this._processResolveValue,this),w(this._processRejectReason,this));return}}catch(e){0==this._state&&this._doReject(e);return}b.call(this,
a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)f(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)f(b[0],
b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new m,e=this._state;0==e||0!=this._wait?(a&&G(a)?this._fulfills.push([p(a,c),null]):this._fulfills.push([c.resolve,c]),b&&G(b)?this._rejects.push([p(b,c),null]):this._rejects.push([c.reject,
c])):1==e?a&&G(a)?f(p(a,c),null,[this._value]):c.resolve(this._value):2==e&&(b&&G(b)?f(p(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,this._value)}catch(c){qa(c)}},done:function(a,b){var c=this._state;1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||
null,this._reason)}catch(c){qa(c)}},fail:function(a,b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:w(this.then,this),done:w(this.done,this),fail:w(this.fail,this),always:w(this.always,this)}},after:function(a){var b=this;if(V(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};
G(a.done)?a.done(c):a.then(c)}return b}};m.fcall=function(a,b,c){return m.resolve(a.apply(b,c||[]))};m.resolve=function(a){var b=new m;b.resolve(a);return b};m.reject=function(a){var b=new m;b.reject(a);return b};m.all=function(a){if(!a.length)return m.resolve(null);var b=new m,c=a.length,e=Array(c),q=c,g,s,f=function(a,d){e[d]=a;q--;0==q&&b.resolve(e)};for(g=0;g<c;g++)(function(c){s=a[g];s instanceof m?s.done(function(a){f(a,c)}).fail(b.reject,b):V(s)||G(s)?(new m(s)).done(function(a){f(a,c)}).fail(b.reject,
b):f(s,c)})(g);return b};m.when=function(){return m.all(arguments)};m.allResolved=function(a){if(!a.length)return m.resolve(null);var b=new m,c=a.length,e=[],q=c,g,s,f=function(a){e.push(a);p()},p=function(){q--;0==q&&b.resolve(e)};for(g=0;g<c;g++)s=a[g],s instanceof m?s.done(f).fail(p):V(s)||G(s)?(new m(s)).done(f).fail(p):f(s);return b};m.race=function(a){if(!a.length)return m.resolve(null);var b=new m,c=a.length,e,q;for(e=0;e<c&&(q=a[e],q instanceof m?q.done(b.resolve,b).fail(b.reject,b):V(q)||
G(q)?(new m(q)).done(b.resolve,b).fail(b.reject,b):b.resolve(q),b.isPending());e++);return b};m.waterfall=function(a){if(!a.length)return m.resolve(null);for(var b=a.shift(),b=G(b)?m.fcall(b):m.resolve(c),c;c=a.shift();)V(c)?b=b.then(function(a){return function(){return a}}(c)):G(c)?b=b.then(c):b.resolve(c);return b};m.counter=function(a){var b=new m;b.countdown=function(){a--;0==a&&b.resolve()};return b};return m}(),ra=function(){if(void 0!==window.pageYOffset)return function(){return window.pageYOffset};
var a=document.body,b=document.documentElement;return b.clientHeight?function(){return b.scrollTop}:function(){return a.scrollTop}}(),sa=function(){if(void 0!==window.pageXOffset)return function(){return window.pageXOffset};var a=document.body,b=document.documentElement;return b.clientWidth?function(){return b.scrollLeft}:function(){return a.scrollLeft}}(),H=function(a){var b;b=ra();var c=sa();a===window?(c=document.documentElement,b={left:0,right:c.clientWidth,top:b,bottom:c.clientHeight+b,width:c.clientWidth,
height:c.clientHeight}):a.getBoundingClientRect?(a=a.getBoundingClientRect(),b={left:a.left+c,top:a.top+b,right:a.right+c,bottom:a.bottom+b},b.width=b.right-b.left,b.height=b.bottom-b.top):b={left:a.offsetLeft+c,top:a.offsetTop+b,width:a.offsetWidth,height:a.offsetHeight,right:0,bottom:0};b.getCenter=function(){return this.width/2};b.getCenterX=function(){return this.left+this.width/2};return b},ca="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:pa,Da=function(){var a=
{show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,c=xa(),e=!!c,f=function(a,b,c){var e=function(){(new Date).getTime()-b>=c?a():ca(e)};ca(e)},p=function u(a,b,c,g,e,m,N,d){var r=function(){var b=F(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==N?!1:(e.reject(a),!0)},h=function(){if(!r()){var l=c;c++;if(c==b.length){e.resolve(a);F(a,"mjsAnimationQueue").shift();var g=F(a,"mjsAnimationQueue");g.length?(g=g[0],p(g.el,g.stages,0,g.start,g.deferred,
!1,g.id,g.step)):F(a,"mjsAnimationQueue",null)}else F(a,"mjsAnimationQueue")[0].position=c,u(a,b,c,null,e,!1,N,d);S(a,b[l]);S(a,b[l]+"-active")}},t=function(){r()||(K(a,b[c]+"-active"),Z.resolve(d&&d(a,c,"active")).done(function(){if(!r()){var b=Ca(a);b?f(h,(new Date).getTime(),b):ca(h)}}))},l=function(){r()||(K(a,b[c]),Z.waterfall([d&&d(a,c,"start"),function(){return g?g(a):null}]).done(function(){!r()&&ca(t)}))};m?ca(l):l()},m=function(c,f,m,q,g,s){var z=new Z,N=F(c,"mjsAnimationQueue")||[],d=++b,
r=c.getAttribute("mjs-animate"),h,t,l,n,A,k,y;f=f||r;q&&null===r&&(f=null);if(f){E(f)?"["==f.substr(0,1)?h=(new Function("","return "+f))():(h=a[f],f=g&&g.get("animate."+f,!0)):G(f)?t=f:Y(f)&&(E(f[0])?h=f:(l=f[0],n=f[1]));fa(f)&&(h=f.stages,t=f.fn,l=f.before,n=f.after,A=f.options?R({},f.options):{},k=f.context||null,y=f.duration||null,m=m||A.start);if(e&&h)return N.push({el:c,stages:h,start:m,step:s,deferred:z,position:0,id:d}),F(c,"mjsAnimationQueue",N),1==N.length&&p(c,h,0,m,z,!0,d,s),z;A=A||{};
m&&(A.start=function(){m(c)});A.complete=function(){z.resolve(c)};y&&(A.duration=y);if(t&&G(t))return l&&R(c.style,l,!0,!1),m&&m(c),F(c,"mjsAnimationQueue",t.call(k,c,function(){z.resolve(c)})),z;if(window.jQuery){f=$(c);l&&f.css(l);F(c,"mjsAnimationQueue","stop");if(t&&E(t))return f[t](A),z;if(n)return f.animate(n,A),z}}m?(t=m(c),V(t)?t.done(function(){z.resolve(c)}):z.resolve(c)):z.resolve(c);return z};m.addAnimationType=function(b,c){a[b]=c};m.stop=oa;m.prefixes=c;m.cssAnimations=e;return m}(),
ya=function(){return String.prototype.trim?function(a){return E(a)?a.trim():a}:function(a){return E(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),ta=function(){},Ea=function(){return"undefined"!=typeof JSON?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),za=function(a,b){var c,e;if(!a||!E(a))return null;try{e=new DOMParser,c=e.parseFromString(a,b||"text/xml")}catch(f){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},
ua=function(){this.events={}};ua.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new va(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,e){a=a.toLowerCase();var f=this.events;f[a]||(f[a]=new va(a));return f[a].on(b,c,e)},once:function(a,b,c,e){e=e||{};e.limit=1;return this.on(a,b,c,e)},un:function(a,b,c){a=a.toLowerCase();var e=this.events;e[a]&&e[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var e=
this.events;return e[a]?e[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,ea.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&
b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),
b={},c,e=-1,f=a.length;++e<f;c=a[e],b[c]=w(this[c],this));this.api=b}return this.api}};var va=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=aa();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=void 0===b?null:b};va.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var e=this.uni,f=b||a;if(f[e]&&!c.allowDupes)return null;var p=++this.lid,m=c.first||
!1;f[e]=p;a={fn:a,scope:b,uniScope:f,id:p,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};m?this.listeners.unshift(a):this.listeners.push(a);this.map[p]=a;return p},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,e=this.uni,f=this.listeners,p;p=a==parseInt(a)?a:(b||a)[e];if(!p)return!1;for(var m=0,v=f.length;m<v;m++)if(f[m].id==p){c=m;delete f[m].uniScope[e];break}if(-1==c)return!1;f.splice(c,1);delete this.map[p];return!0},
hasListener:function(a,b){var c=this.listeners,e;if(a){b=b||a;e=G(a)?b[this.uni]:a;if(!e)return!1;for(var f=0,p=c.length;f<p;f++)if(c[f].id==e)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,e;c=0;for(e=a.length;c<e;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=ea.call(b),a.prepend&&(c=a.prepend.concat(c)),
a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,e,f,a="first"==b?[a[0]]:ea.call(a);e=a.shift();)if(e&&this.map[e.id]&&(e.count++,!(e.count<e.start))){f=e.fn.apply(e.scope,this._prepareArgs(e,arguments));e.called++;e.called==e.limit&&this.un(e.id);"all"==b&&c.push(f);if("first"==b)return f;"last"==b&&(c=f);if(!1==b&&!1===f)break}if(b)return c}};var Fa=function(){var a=/#.*$/,
b=/([?&])_=[^&]*/,c=/\?/,e=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,f=/^(?:GET|HEAD)$/i,p=function(a,b,c){var k,d;d=X(a);if(3>d&&-1<d&&c)b.push(encodeURIComponent(c)+"="+encodeURIComponent(""+a));else if(Y(a)&&c)for(k=0,d=a.length;k<d;k++)p(a[k],b,c+"["+k+"]");else if(ia(a))for(k in a)a.hasOwnProperty(k)&&p(a[k],b,c?c+"["+k+"]":k)},m=function(l,n){l.replace(a,"");if(!1===n.cache){var d=(new Date).getTime();return b.test(l)?l.replace(b,"$1_="+d):l+(c.test(l)?"&":"?")+"_="+d}!n.data||
window.FormData&&n.data instanceof window.FormData||(E(n.data)?d=n.data:(d=[],p(n.data,d,null),d=d.join("&").replace(/%20/g,"+")),n.data=d,f.test(n.method)&&(l+=(c.test(l)?"&":"?")+n.data,n.data=null));return l},v={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},u={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",
xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},D={},M=new ua,q=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},g=function(a,b,c){var k,d;if(!ia(a)&&!G(a)&&c)k=document.createElement("input"),k.setAttribute("type","hidden"),k.setAttribute("name",
c),k.setAttribute("value",a),b.appendChild(k);else if(Y(a)&&c)for(k=0,d=a.length;k<d;k++)g(a[k],b,c+"["+k+"]");else if(ia(a))for(k in a)a.hasOwnProperty(k)&&g(a[k],b,c?c+"["+k+"]":k)},s=function(a){for(var b,c,k="",d=0;d<a.elements.length;d++)if(b=a.elements[d],b.hasAttribute("name"))if(c="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===c)for(c=0;c<b.files.length;k+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[c++].name));else if("RADIO"!==c&&
"CHECKBOX"!==c||b.checked)k+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return k},z=function(a,b,c){var k=b?b.dataType:null;b=b?b.selector:null;if(!E(a))return a;c=c||"";if("xml"===k||!k&&0<=c.indexOf("xml"))return a=za(ya(a)),b?P(b,a):a;if("html"===k)return a=za(a,"text/html"),b?P(b,a):a;if("fragment"==k){c=document.createDocumentFragment();k=document.createElement("div");for(k.innerHTML=a;k.firstChild;)c.appendChild(k.firstChild);return c}if("json"===k||!k&&0<=c.indexOf("json"))return Ea(ya(a));
("script"===k||!k&&0<=c.indexOf("javascript"))&&q(a);return a+""},N=function(a){var b=e.exec((window?window.location.href:"").toLowerCase())||[],c=e.exec(a.url.toLowerCase());this._opt=a;!0!==a.crossDomain&&(a.crossDomain=!(!c||c[1]===b[1]&&c[2]===b[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443"))));b=new Z;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||window&&window.FormData||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&
"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):s(a.form));a.url=m(a.url,a);c=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new t(a,b,this):new r(a,b,this):new h(a,b,this);this._deferred=b;this._transport=c;b.done(function(a){M.trigger("success",a)});b.fail(function(a){M.trigger("error",a)});b.always(function(){M.trigger("end")});M.trigger("start");a.timeout&&(this._timeout=setTimeout(w(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===M.trigger("beforeSend",
a,c)&&(this._promise=Z.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,c)&&(this._promise=Z.reject());this._promise||(pa(c.send,c),b.abort=w(this.abort,this),b.always(this.destroy,this),this._promise=b)};N.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},
createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);g(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",d=a.jsonpCallback||"jsonp_"+aa();a.url+=(c.test(a.url)?"&":"?")+b+"="+d;this._jsonpName=d;"undefined"!=typeof window&&(window[d]=w(this.jsonpCallback,this));"undefined"!=typeof global&&(global[d]=w(this.jsonpCallback,this));
return d},jsonpCallback:function(a){var b;try{b=this.processResponseData(a)}catch(c){this._deferred?this._deferred.reject(c):qa(c)}this._deferred&&this._deferred.resolve(b)},processResponseData:function(a,b){var c=this._opt;a=z(a,c,b);M.hasListener("processResponse")&&(a=M.trigger("processResponse",a,this._deferred));c.processResponse&&(a=c.processResponse.call(c.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var c=this._deferred,k;if(this._opt.jsonp)if(a){try{q(a)}catch(d){c.reject(d)}c.isPending()&&
c.reject("jsonp script didn't invoke callback")}else c.reject("jsonp script is empty");else{try{k=this.processResponseData(a,b)}catch(g){c.reject(g)}c.resolve(k)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&("undefined"!=
typeof window&&delete window[this._jsonpName],"undefined"!=typeof global&&delete global[this._jsonpName])}};var d=function(a,b){b=b||{};a&&!E(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),!b.url))throw"Must provide url";R(b,D,!1,!0);R(b,u,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new N(b)).promise()};d.setup=function(a){R(D,a,!0,!0)};d.on=function(){M.on.apply(M,arguments)};d.un=function(){M.un.apply(M,
arguments)};d.get=function(a,b){b=b||{};b.method="GET";return d(a,b)};d.post=function(a,b){b=b||{};b.method="POST";return d(a,b)};d.load=function(a,b,c){c=c||{};E(b)||(c=b);c.dataType="fragment";return d(b,c).done(function(b){if(c.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};d.loadScript=function(a){return d(a,{transport:"script"})};d.submit=function(a,b){b=b||{};b.form=a;return d(null,b)};var r=function(a,b,c){var k;if(!(window.XMLHttpRequest&&(k=new XMLHttpRequest)||
(k=new ActiveXObject("Msxml2.XMLHTTP"))||(k=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=k;this._deferred=b;this._opt=a;this._ajax=c;a.progress&&I(k,"progress",w(a.progress,a.callbackScope));a.uploadProgress&&k.upload&&I(k.upload,"progress",w(a.uploadProgress,a.callbackScope));k.onreadystatechange=w(this.onReadyStateChange,this)};r.prototype={_xhr:null,_deferred:null,_ajax:null,setHeaders:function(){var a=this._opt,b=this._xhr,c;if(a.xhrFields)for(c in a.xhrFields)b[c]=
a.xhrFields[c];a.data&&a.contentType&&b.setRequestHeader("Content-Type",a.contentType);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Accept",a.dataType&&v[a.dataType]?v[a.dataType]+", */*; q=0.01":v._default);for(c in a.headers)b.setRequestHeader(c,a.headers[c])},onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=ta,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=ta;var c;a:{try{c=!a.status&&location&&"file:"==
location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(k){}c=!1}c?this._ajax.processResponse(E(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=ta;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this.setHeaders(),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;
delete this._opt;delete this._ajax}};var h=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};h.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);I(a,"load",w(this.onLoad,this));I(a,"error",w(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},
abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};var t=function(a,b,c){this._opt=a;this._ajax=c;this._deferred=b};t.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+aa(),c=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display=
"none";document.body.appendChild(a);c.setAttribute("action",this._opt.url);c.setAttribute("target",b);I(a,"load",w(this.onLoad,this));I(a,"error",w(this.onError,this));this._el=a;try{c.submit()}catch(k){this._deferred.reject(k)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},
destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return d}(),T=function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},ja={},Ga=function(a,b,c,e){var f=b+"-"+c,p=function(a){a=O(a);return na(a.target,b)?e(a):null};ja[f]||(ja[f]=[]);ja[f].push({el:a,ls:p,fn:e});I(a,c,p)},Ha=function(a,b,c,e){var f,p;if(p=ja[b+"-"+c])for(b=-1,f=p.length;++b<f;)p[b].el===a&&p[b].fn===e&&L(a,c,p[b].ls)},Aa=
function(){var a=function(a,b){var c=a.style,e;for(e in b)c[e]=b[e]},b={t:"b",r:"l",b:"t",l:"r"},c={t:"top",r:"right",b:"bottom",l:"left"},e={t:["l","r"],r:["t","b"],b:["r","l"],l:["b","t"]},f=document.all&&!window.XMLHttpRequest,p=function(){var a={},b={};return{register:function(c){var e=c.getInstanceId(),f=c.getGroup(),m,d,p;a[e]=c;m=0;for(d=f.length;m<d;m++)p=f[m],b[p]||(b[p]={}),b[p][e]=!0;c.on("destroy",this.unregister,this)},unregister:function(b){b=b.getInstanceId();delete a[b]},hideAll:function(c){var e=
c.getInstanceId();c=c.getGroup();var f,m,d,p;f=0;for(m=c.length;f<m;f++)for(p in d=c[f],d=b[d],d)a[p]?p==e||a[p].isHideAllIgnored()||a[p].hide(null,!0,!0):delete d[p]}}}(),m=function(p,q,g){var s,z=this,N,d={backgroundColor:"transparent",width:"0px",height:"0px",position:"absolute",fontSize:"0px",lineHeight:"0px"},r=q.size,h=q.width||2*r;R(z,{init:function(){q.border&&z.createInner()},getEl:function(){return s},getDialogPositionOffset:function(){var a=(z.detectPointerPosition()||"").substr(0,1),c=
(p.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1),d={x:0,y:0};a==b[c]&&(d["t"==a||"b"==a?"y":"x"]="b"==a||"r"==a?-r:r);return d},createInner:function(){var a=R({},q);a.size=r-2*q.border;a.width=h-4*q.border;delete a.border;delete a.borderColor;delete a.borderCls;delete a.offset;N=new m(p,a,q.border)},detectPointerPosition:function(){if(q.position)return q.position;var a=(p.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1);return a?b[a]:null},detectPointerDirection:function(a){return q.direction?
q.direction:a},getBorders:function(a,d,g){var s={},k=a.substr(0,1);a=d.substr(0,1);var y=d.substr(1);d=f?"dotted":"solid";s["border"+T(c[b[k]])]=r+"px solid "+g;s["border"+T(c[k])]="0 "+d+" transparent";y?(s["border"+T(c[y])]="0 solid transparent",s["border"+T(c[b[y]])]=h+"px "+d+" transparent"):(g=Math.floor(h/2),s["border"+T(c[e[a][0]])]=g+"px "+d+" transparent",s["border"+T(c[e[a][1]])]=g+"px "+d+" transparent");return s},getOffsets:function(a,d){var e={},f=a.substr(0,1),k="t"==f||"b"==f?"r":"b";
if(!r)switch(document.body.appendChild(s),f){case "t":case "b":r=H(s).height;h=H(s).width;break;case "l":case "r":h=H(s).height,r=H(s).width}e[c[f]]=g?"auto":-r+"px";e[c[k]]="auto";if(g){var f=d.substr(0,1),y=d.substr(1);e[c[b[k]]]=y?"l"==y||"t"==y?g+"px":-h-g+"px":Math.floor(-h/2)+"px";e[c[b[f]]]=-(r+2*g)+"px"}else{switch(a){case "t":case "r":case "b":case "l":f=d!=a?"l"==d||"t"==d?q.offset:-h+q.offset:-h/2+q.offset;break;case "bl":case "tl":case "lt":case "rt":f=q.offset;break;default:f=-h-q.offset}e["margin"+
T(c[b[k]])]=f+"px";switch(a){case "t":case "r":case "b":case "l":f="50%";break;case "tr":case "rb":case "br":case "lb":f="100%";break;default:f=0}e[c[b[k]]]=f}return e},render:function(){if(!s){var b=z.detectPointerPosition();if(b)if(q.el){if(E(q.el)){var c=document.createElement("div");c.innerHTML=q.el;s=c.firstChild}else s=q.el;a(s,{position:"absolute"});a(s,z.getOffsets(b));K(s,q.cls);p.getElem().appendChild(s)}else{c=z.detectPointerDirection(b);s=document.createElement("div");var e=document.createComment(" ");
s.appendChild(e);a(s,d);a(s,z.getBorders(b,c,q.borderColor||q.color));a(s,z.getOffsets(b,c));K(s,q.borderCls||q.cls);N&&(N.render(),s.appendChild(N.getEl()));g||p.getElem().appendChild(s)}}},destroy:function(){z.remove();N=z=null},remove:function(){N&&N.remove();s&&(s.parentNode.removeChild(s),s=null)}},!0,!1);z.init();return z},v=function(a){if(!a)return{};var b=function(b,c,e){var f=a[b],d=!1;if(void 0!==f){switch(e){case "string":d=E(f);break;case "function":d=G(f);break;case "number":d=1===X(f)||
f==parseInt(f);break;case "dom":d=f&&(f.tagName||f.nodeName)?!0:!1;break;case "jquery":(d=f&&f.jquery?!0:!1)&&(f=f.get(0));break;case "boolean":if(!0===f||!1===f)d=!0;break;default:!0===e&&!0===f&&(d=!0),!1===e&&!1===f&&(d=!0)}d&&(a[b]={},a[b][c]=f)}};b("content","value","string");b("content","value","boolean");b("content","fn","function");b("ajax","url","string");b("cls","dialog","string");b("render","tpl","string");b("render","fn","function");b("render","el","dom");b("render","el","jquery");b("show",
"events",!1);b("show","events","string");b("hide","events",!1);b("hide","events","string");b("toggle","events",!1);b("toggle","events","string");b("position","type","string");b("position","type",!1);b("position","get","function");b("overlay","enabled","boolean");b("pointer","position","string");b("pointer","size","number");return a},u={target:null,debug:!1,group:null,modal:!1,useHref:!1,content:{value:"",fn:null,prepare:null,attr:null},ajax:{url:null,data:null,dataType:"text",method:"GET"},cls:{dialog:null,
visible:null,hidden:null,loading:null},selector:{content:null},buttons:null,render:{tpl:"<div></div>",fn:null,el:null,zIndex:null,lazy:!0,style:null,appendTo:null,id:null,keepVisible:!1,keepInDOM:!1,lifetime:null},events:{show:{click:{preventDefault:!0,stopPropagation:!0,returnValue:!1,process:null}}},show:{delay:null,single:!1,events:null,animate:!1,ignoreHideAll:!1,focus:!1,preventScroll:!1},hide:{delay:null,timeout:null,events:null,destroy:!1,animate:!1,cancelShowDelay:!0},toggle:{events:null},
position:{type:"t",offsetX:0,offsetY:0,axis:null,get:null,screenX:!1,screenY:!1,resize:!0},pointer:{position:null,direction:null,size:0,width:null,color:null,offset:0,border:0,borderColor:null,el:null,cls:null,borderCls:null},overlay:{enabled:!1,color:"#000",opacity:.5,cls:null,animateShow:!1,animateHide:!1,preventScroll:!1},callback:{scope:null,contentchange:null,beforeshow:null,show:null,beforehide:null,hide:null,render:null,lifetime:null,targetchange:null,button:null}},D=function(b,c){b&&!E(b)&&
(c=b,b=null);c=c||{};var g=this,e={},f=aa(),w=new ua,d=R({},u,v(D.defaults),v(D[b]),v(c),!0,!0),r=d.callback.scope||e,h,t,l,n={bindSelfOnRender:!1,target:null,visible:!1,enabled:!0,frozen:!1,rendered:!1,hideTimeout:null,hideDelay:null,showDelay:null,dynamicTarget:!1,dynamicTargetEl:null,images:0,position:null,destroyDelay:null};c=null;R(e,w.getApi(),{getElem:function(){return h},getInstanceId:function(){return f},getCfg:function(){return R({},d)},getGroup:function(){return d.group?E(d.group)?[d.group]:
d.group:[""]},setTarget:function(a){if(!a)return e;var b=!1,c=n.target;n.target?(g.setHandlers("unbind","_target"),b=!0):n.dynamicTarget&&(b=!0);E(a)?(n.dynamicTarget=!0,n.target=null):(n.dynamicTarget=!1,n.target=a);b&&(g.setHandlers("bind","_target"),g.trigger("targetchange",e,a,c));return e},getTarget:function(){return n.dynamicTarget?n.dynamicTargetEl:d.target},isEnabled:function(){return n.enabled},isVisible:function(){return n.visible},isHideAllIgnored:function(){return d.show.ignoreHideAll},
isFrozen:function(){return n.frozen},enable:function(){n.enabled=!0;return e},disable:function(){g.hide();n.enabled=!1;return e},freeze:function(){n.frozen=!0;return e},unfreeze:function(){n.frozen=!1;return e},toggle:function(a,b){return a&&a.stopPropagation&&n.dynamicTarget&&n.visible&&g.isDynamicTargetChanged(a)?g.show(a):g[n.visible?"hide":"show"](a,b)},show:function(a,b){var c=a&&a.stopPropagation?null:e,f=d.show;if(!e.isEnabled())return d.debug&&console.log("show: not enabled",e.getTarget()),
c;a&&a.stopPropagation&&d.events.show&&d.events.show[a.type]&&(c=d.events.show[a.type],c.process?c=c.process(e,a):(c.stopPropagation&&a.stopPropagation(),c.preventDefault&&a.preventDefault(),c=c.returnValue));if(n.visible&&n.hideTimeout)return window.clearTimeout(n.hideTimeout),n.hideTimeout=window.setTimeout(g.hide,d.hide.timeout),d.debug&&console.log("show: hide timeout was set",e.getTarget()),c;if(n.hideDelay)return window.clearTimeout(n.hideDelay),n.hideDelay=null,n.visible=!0,d.debug&&console.log("show: hide delay was set; already shown",
e.getTarget()),c;if(n.frozen)return d.debug&&console.log("show: frozen",e.getTarget()),c;n.destroyDelay&&(window.clearTimeout(n.destroyDelay),n.destroyDelay=null);var l=!1;a&&a.stopPropagation&&n.dynamicTarget&&(l=g.changeDynamicTarget(a));if(n.visible)if(l)if(d.render.fn)g.hide(null,!0);else return g.reposition(a),c;else return d.debug&&console.log("show: already shown",h),c;h?l&&g.changeDynamicContent():g.render();if(!1===g.trigger("beforeshow",e,a))return d.debug&&console.log("show: beforeshow return false",
e.getTarget()),c;oa(h);n.visible=!0;f.single&&p.hideAll(g);g.toggleTitleAttribute(!1);f.delay&&!b?n.showDelay=window.setTimeout(function(){g.showAfterDelay(a)},f.delay):g.showAfterDelay(a,b);return c},hide:function(a,b,c){n.hideTimeout=null;var f=a&&a.stopPropagation?null:e;a&&a.stopPropagation&&d.events.hide&&d.events.hide[a.type]&&(f=d.events.hide[a.type],f.process?f=f.process(e,a):(f.stopPropagation&&a.stopPropagation(),f.preventDefault&&a.preventDefault(),f=f.returnValue));!n.visible&&n.hideDelay&&
b&&(window.clearTimeout(n.hideDelay),n.hideDelay=null,n.visible=!0);if(!h||!n.visible||!g.isEnabled())return d.debug&&console.log("hide: elem/visible/enabled: ",h,n.visible,g.isEnabled()),f;if(n.showDelay)return d.hide.cancelShowDelay||c?(window.clearTimeout(n.showDelay),n.showDelay=null,n.visible=!1,d.debug&&console.log("hide: cancelShowDelay: ",g.getTarget())):d.debug&&console.log("hide: show delay was set",g.getTarget()),f;if(n.frozen)return d.debug&&console.log("hide: frozen",g.getTarget()),f;
if(!1===g.trigger("beforehide",e,a))return d.debug&&console.log("hide: beforehide returned false",g.getTarget()),f;oa(h);n.visible=!1;g.toggleTitleAttribute(!0);n.dynamicTarget&&g.resetDynamicTarget();d.hide.delay&&!b?n.hideDelay=window.setTimeout(function(){g.hideAfterDelay(a)},d.hide.delay):g.hideAfterDelay(a,b);return f},setPositionType:function(a){a&&(E(a)?(d.position.get=a,d.position.type=!1):(d.position.get=null,d.position.type=a));a=d.position.type;!1===a?n.position=!1:d.position.get&&"m"!=
a?n.position="fn":(a=a.substr(0,1),n.position="w"==a?"window":"m"==a?"mouse":"target");t&&(t.remove(),h&&t.render())},getPosition:function(a){if(!h)return null;var b,c=d.position;switch(n.position){case !1:return null;case "target":b=g.getTargetPosition(a);break;case "mouse":b=g.getMousePosition(a);break;case "window":b=g.getWindowPosition(a);break;case "fn":b=c.get.call(r,e,a)}if(!1!==c.screenX||!1!==c.screenY)b=g.correctScreenPosition(b,c.screenX,c.screenY);return b},reposition:function(b){b&&(b=
O(b));if(b=g.getPosition(b))void 0!=b.x&&a(h,{left:b.x+"px"}),void 0!=b.y&&a(h,{top:b.y+"px"}),void 0==b.x&&void 0==b.y&&a(h,b)},getContentElem:function(){return h?d.selector.content?P(d.selector.content,h).shift()||h:h:null},setContent:function(a,b){b=b||"";if(!h)return d.content.value=a,e;d.content.prepare&&(a=d.content.prepare(e,b,a));var c=e.getContentElem(),f=n.rendered&&!d.selector.content&&t,l=f&&t.getEl();if(f&&l)try{h.removeChild(l)}catch(m){}if(E(a))c.innerHTML=a;else for(var p in a){var q=
d.selector[p];q&&(q=P(q,c).shift())&&(q.innerHTML=a[p])}if(f&&l)try{h.appendChild(l)}catch(r){}c=P("img",c);n.images=c.length;p=-1;for(f=c.length;++p<f;I(c[p],"load",g.onImageLoad));g.trigger("contentchange",e,a,b);g.onContentChange();return e},readContent:function(){var a=e.getTarget(),b;a&&(b=d.content.attr?a.getAttribute(d.content.attr):a.getAttribute("tooltip")||a.getAttribute("title")||a.getAttribute("alt"));b&&g.setContent(b,"attribute");return e},loadContent:function(a){K(h,d.cls.loading);
a=R({},d.ajax,a,!0,!0);g.trigger("beforeajax",e,a);return Fa(a).done(g.onAjaxLoad)},destroy:function(){g.trigger("destroy",e);L(window,"resize",g.onWindowResize);L(window,"scroll",g.onWindowScroll);g.destroyElem();t&&(t.destroy(),t=null);g.setHandlers("unbind");w.destroy();l=n=e=g=w=null},setFocus:function(){var a=d.show.focus,b;if(!0===a)if(a=P("input",h).concat(P("textarea",h)),0<a.length)a[0].focus();else{if(d.buttons)for(b in d.buttons){(b=P(d.buttons[b],h).shift())&&b.focus();break}}else(b=P(a,
h).shift())&&b.focus()}},!0,!1);R(g,e,{init:function(){p.register(g);d.modal&&(d.overlay.enabled=!0);g.setPositionType();g.setTarget(d.target);if(d.pointer.size||d.pointer.el)t=new m(g,d.pointer);d.render.lazy||g.render();g.setHandlers("bind")},setHandlers:function(a,b){for(var c=["show","hide","toggle"],f="bind"==a?I:L,m="bind"==a?Ga:Ha,p,q,r,t,v,D,w,u,z,A;p=c.shift();)if(q=d[p].events,!1!==q){if(E(q)||Y(q))n.dynamicTarget?(v={},v[q]=d.target,q={_html:v}):q={_target:q};for(r in q){if(b)if("_self"==
b){if("_self"!=r&&"_overlay"!=r&&">"!=r.substr(0,1))continue}else if(r!=b)continue;if("_self"!=r&&"_overlay"!=r&&">"!=r.substr(0,1)||h){if(w=q[r]){switch(r){case "_target":u=[g.getTarget()];break;case "_self":u=[h];break;case "_window":u=[window];break;case "_document":u=[document];break;case "_html":u=[document.documentElement];break;case "_overlay":u=[l];break;default:u=">"==r.substr(0,1)?P(r.substr(1),h):P(r)}if(u&&u.length)if(E(w)&&(w=[w]),Y(w))for(v=0,D=w.length;v<D;v++)for(z=-1,A=u.length;++z<
A;f(u[z],w[v],e[p]));else for(t in w)for(z=-1,A=u.length;++z<A;m(u[z],w[t],t,e[p]));}}else n.bindSelfOnRender=!0}}},resetDynamicTarget:function(){var a=n.dynamicTargetEl;a&&(g.setHandlers("unbind","_target"),g.trigger("targetchange",e,null,a))},isDynamicTargetChanged:function(a){var b=d.target;a=a.target;for(var c=n.dynamicTargetEl;a&&!na(a,b);)a=a.parentNode;return a?!c||c!==a:!1},changeDynamicTarget:function(a){var b=d.target;a=a.target;for(var c=n.dynamicTargetEl;a&&!na(a,b);)a=a.parentNode;if(!a||
c&&c===a)return!1;c&&g.setHandlers("unbind","_target");n.dynamicTargetEl=a;g.setHandlers("bind","_target");g.trigger("targetchange",e,a,c);return!0},showAfterDelay:function(a,b){n.showDelay=null;if(n.visible){d.position.manual||g.reposition(a);"mouse"==n.position&&I(document.documentElement,"mousemove",g.onMouseMove);var c=d.position;(c.resize||c.screenX||c.screenY)&&I(window,"resize",g.onWindowResize);(c.scroll||c.screenX||c.screenY)&&I(window,"scroll",g.onWindowScroll);if(b||!1!==g.trigger("afterdelay",
e,a)){l&&(d.overlay.animateShow?g.animate("show",null,!0):l.style.display="");if(d.show.preventScroll){var c=d.show.preventScroll,f,h;!0===c&&(c="body");c=P(c);f=-1;for(h=c.length;++f<h;I(c[f],"mousewheel",g.onPreventScroll)&&I(c[f],"touchmove",g.onPreventScroll));}d.show.animate&&!b?g.animate("show").done(function(){g.showAfterAnimation(a)}):g.showAfterAnimation(a)}else n.visible=!1,d.debug&&console.log("showAfterDelay: afterdelay returned false",e.getTarget())}else d.debug&&console.log("showAfterDelay: already hidden",
g.getTarget())},showAfterAnimation:function(a){n.visible?(S(h,d.cls.hidden),K(h,d.cls.visible),d.render.keepVisible||(h.style.display=""),d.hide.timeout&&(n.hideTimeout=window.setTimeout(g.hide,d.hide.timeout)),d.show.focus&&window.setTimeout(g.setFocus,20),g.trigger("show",e,a)):d.debug&&console.log("showAfterAnimation: already hidden",g.getTarget())},hideAfterDelay:function(a,b){n.hideDelay=null;if(n.visible)d.debug&&console.log("hideAfterDelay: already shown again",g.getTarget());else{"mouse"==
n.position&&L(document.documentElement,"mousemove",g.onMouseMove);var c=d.position;(c.resize||c.screenX||c.screenY)&&L(window,"resize",g.onWindowResize);(c.scroll||c.screenX||c.screenY)&&L(window,"scroll",g.onWindowScroll);if(b||!1!==g.trigger("afterhidedelay",e,a)){if(d.show.preventScroll){var c=d.show.preventScroll,f,m;!0===c&&(c="body");c=P(c);f=-1;for(m=c.length;++f<m;L(c[f],"mousewheel",g.onPreventScroll)&&L(c[f],"touchmove",g.onPreventScroll));}l&&(d.overlay.animateShow?g.animate("hide",null,
!0).done(function(){l.style.display="none"}):l.style.display="none");d.hide.animate&&!b?g.animate("hide").done(function(){g.hideAfterAnimation(a)}):g.hideAfterAnimation(a)}else n.visible=d.cls.hidden?!la(h,d.cls.hidden):!(0>=h.offsetWidth||0>=h.offsetHeight),d.debug&&console.log("hideAfterDelay: afterhdelay returned false",g.getTarget())}},hideAfterAnimation:function(a){n.visible?d.debug&&console.log("hideAfterAnimation: already shown again",g.getTarget()):(S(h,d.cls.visible),K(h,d.cls.hidden),d.render.keepVisible||
(h.style.display="none"),g.trigger("hide",e,a),a=d.render.lifetime,null!==a&&(0===a?g.destroyElem():n.destroyDelay=window.setTimeout(g.destroyElem,a)),h&&d.hide.destroy&&window.setTimeout(function(){F(h,d.instanceName,null);g.destroy()},0))},render:function(){if(h)d.debug&&console.log("element already rendered",h);else{var b=d.render,c=d.cls;if(b.fn){var f=b.fn.call(r,e);b[E(f)?"tpl":"el"]=f}b.el?E(b.el)?(h=P(b.el).shift(),b.keepInDOM=!0):h=b.el:(f=document.createElement("div"),f.innerHTML=b.tpl,
h=f.firstChild);h||(h=document.createElement("div"));b.id&&h.setAttribute("id",b.id);d.render.keepVisible||(h.style.display="none");K(h,c.dialog);K(h,c.hidden);b.style&&a(h,b.style);d.overlay.enabled&&(l=document.createElement("div"),a(l,{display:"none",position:"fixed",left:0,top:0,right:0,bottom:0,opacity:d.overlay.opacity,backgroundColor:d.overlay.color}),document.body.appendChild(l),I(l,"click",g.onOverlayClick),b.zIndex&&a(l,{zIndex:b.zIndex}),d.overlay.cls&&K(l,d.overlay.cls));b.appendTo?b.appendTo.appendChild(h):
!1!==b.appendTo&&document.body.appendChild(h);b.zIndex&&a(h,{zIndex:b.zIndex});b=d.content;if(!1!==b.value)if(b.value)g.setContent(b.value);else if(b.fn)g.setContent(b.fn.call(r,e));else g[d.ajax.url?"loadContent":"readContent"]();t&&t.render();if(d.buttons)for(var m in d.buttons)if(b=P(d.buttons[m],h).shift())F(b,"metaphorjsTooltip-button-id",m),I(b,"click",g.onButtonClick),I(b,"keyup",g.onButtonKeyup);n.bindSelfOnRender&&(g.setHandlers("bind","_self"),n.bindSelfOnRender=!1);n.rendered=!0;g.trigger("render",
e)}},animate:function(a,b,c){var e,f;e=c?"show"==a?d.overlay.animateShow:d.overlay.animateHide:d[a].animate;G(e)&&(e=e(g,b));f=e.skipDisplayChange||!1;ka(e)?e=a:E(e)&&(e=[e]);return Da(h,e,function(){"show"!=a||f||(c?l.style.display="":h.style.display="")})},toggleTitleAttribute:function(a){var b=e.getTarget(),c;b&&(!1===a?(F(b,"tmp-title",b.getAttribute("title")),b.removeAttribute("title")):(c=F(b,"tmp-title"))&&b.setAttribute("title",c))},changeDynamicContent:function(){d.content.fn?g.setContent(d.content.fn.call(r,
e)):d.content.attr&&g.readContent()},getDialogSize:function(){var b=d.cls.hidden?la(h,d.cls.hidden):!!(0>=h.offsetWidth||0>=h.offsetHeight),c,e=h.style.left;b&&(a(h,{left:"-1000px"}),h.style.display="");c={width:H(h).width,height:H(h).height};b&&(a(h,{left:e}),h.style.display="none");return c},getTargetSize:function(){var a=g.getTarget();return a?{width:H(a).width,height:H(a).height}:null},getTargetPosition:function(a,b){var c=g.getTarget();if(!c)return null;var e=g.getDialogSize(),c=H(c),f=g.getTargetSize(),
h={};b=b||d.position.type;var l=b.substr(0,1),m=b.substr(1),n=d.position.offsetX,p=d.position.offsetY,q=t?t.getDialogPositionOffset():null;switch(l){case "t":h.y=c.top-e.height-p;break;case "r":h.x=c.left+f.width+n;break;case "b":h.y=c.top+f.height+p;break;case "l":h.x=c.left-e.width-n}switch(m){case "t":h.y=c.top+p;break;case "r":h.x=c.left+f.width-e.width-n;break;case "b":h.y=c.top+f.height-e.height-p;break;case "l":h.x=c.left+n;break;case "rc":h.x=c.left+f.width+n;break;case "lc":h.x=c.left-e.width-
n;break;case "":switch(l){case "t":case "b":h.x=c.left+f.width/2-e.width/2;break;case "r":case "l":h.y=c.top+f.height/2-e.height/2}}q&&(h.x+=q.x,h.y+=q.y);return h},getMousePosition:function(a){if(!a)return null;var b=g.getDialogSize(),c={},f=d.position.type.substr(1),h=d.position.offsetX,l=d.position.offsetY,m=d.position.axis,n=t?t.getDialogPositionOffset():null;switch(f){case "":c=d.position.get.call(r,e,a);break;case "t":c.y=a.pageY-b.height-l;c.x=a.pageX-b.width/2;break;case "r":c.y=a.pageY-b.height/
2;c.x=a.pageX+h;break;case "b":c.y=a.pageY+l;c.x=a.pageX-b.width/2;break;case "l":c.y=a.pageY-b.height/2;c.x=a.pageX-b.width-h;break;case "rt":c.y=a.pageY-b.height-l;c.x=a.pageX+h;break;case "rb":c.y=a.pageY+l;c.x=a.pageX+h;break;case "lt":c.y=a.pageY-b.height-l;c.x=a.pageX-b.width-h;break;case "lb":c.y=a.pageY+l,c.x=a.pageX-b.width-h}n&&(c.x+=n.x,c.y+=n.y);m&&(a=g.getTargetPosition(a,f))&&("x"==m?c.y=a.y:c.x=a.x);return c},getWindowPosition:function(){var a=g.getDialogSize(),b={},c=d.position.type.substr(1),
e=d.position.offsetX,f=d.position.offsetY,h=ra(),l=sa(),m=H(window).width,n=H(window).height;switch(c){case "c":b.y=n/2-a.height/2+h;b.x=m/2-a.width/2+l;break;case "t":b.y=h+f;b.x=m/2-a.width/2+l;break;case "r":b.y=n/2-a.height/2+h;b.x=m-a.width+l-e;break;case "b":b.y=n-a.height+h-f;b.x=m/2-a.width/2+l;break;case "l":b.y=n/2-a.height/2+h;b.x=l+e;break;case "rt":b.y=h+f;b.x=m-a.width+l-e;break;case "rb":b.y=n-a.height+h-f;b.x=m-a.width+l-e;break;case "lt":b.y=h+f;b.x=l+e;break;case "lb":b.y=n-a.height+
h-f,b.x=l+e}return b},correctScreenPosition:function(a,b,c){var d=g.getDialogSize(),e=ra(),f=sa(),h=H(window).width,l=H(window).height;c&&a.y+d.height>l+e-c&&(a.y=l+e-c-d.height);b&&a.x+d.width>h+f-b&&(a.x=h+f-b-d.width);c&&a.y<e+c&&(a.y=e+c);b&&a.x<f+b&&(a.x=f+b);return a},onMouseMove:function(a){g.reposition(O(a))},onWindowResize:function(a){g.reposition(O(a))},onWindowScroll:function(a){g.reposition(O(a))},onPreventScroll:function(a){O(a).preventDefault()},onOverlayClick:function(a){return d.modal?
(a=O(a),a.preventDefault(),a.stopPropagation(),!1):null},onButtonClick:function(a){var b=O(a).target;(b=F(b,"metaphorjsTooltip-button-id"))&&g.trigger("button",e,b,a)},onButtonKeyup:function(a){if(13==a.keyCode||32==a.keyCode){var b=F(a.target,"metaphorjsTooltip-button-id");b&&g.trigger("button",e,b,O(a))}},onAjaxLoad:function(a){S(h,d.cls.loading);g.setContent(a,"ajax")},onImageLoad:function(){n.images--;g.onContentChange()},onContentChange:function(){n.visible&&g.reposition()},destroyElem:function(){g.setHandlers("unbind",
"_self");n.bindSelfOnRender=!0;t&&t.remove();l&&(l.parentNode.removeChild(l),l=null);h&&(d.render.keepInDOM||h.parentNode.removeChild(h),h=null);g.trigger("lifetime",e)}},!0,!1);delete d.callback.scope;for(var A in d.callback)e.on(A,d.callback[A],r);d.target&&d.useHref&&(A=d.target.getAttribute("href"),"#"==A.substr(0,1)?d.render.el=A:d.ajax.url=A);g.init();return e};R(D,{defaults:{}});return D}();window.jQuery&&(jQuery.fn.metaphorjsTooltip=function(a,b,c){var e="dialog",f;"string"==typeof a&&"destroy"!=
a&&(f=a,a=b,b=c);a=a||{};e+="-"+(b||"default");this.each(function(){var b=F(this,e);if(b)if("destroy"==a)b.destroy(),F(this,e,null);else throw Error("MetaphorJs tooltip already instantiated for this html element");else a.target=this,a.instanceName=e,F(this,e,new Aa(f,a))})});da.lib.Dialog=Aa;da.onReady=function(a){var b=!1,c=!0,e=window,f=e.document,p=f.documentElement,m=function(c){if("readystatechange"!=c.type||"complete"==f.readyState)L("load"==c.type?e:f,c.type,m),!b&&(b=!0)&&a.call(e,c.type||
c)},v=function(){try{p.doScroll("left")}catch(a){setTimeout(v,50);return}m("poll")};if("complete"==f.readyState)a.call(e,"lazy");else{if(f.createEventObject&&p.doScroll){try{c=!e.frameElement}catch(u){}c&&v()}I(f,"DOMContentLoaded",m);I(f,"readystatechange",m);I(e,"load",m)}};"undefined"!=typeof global?global.MetaphorJs=da:window.MetaphorJs=da})();
