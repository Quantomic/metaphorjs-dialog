(function(){var ga={lib:{},cmp:{},view:{}},aa=Array.prototype.slice,ba=function(z){return!(!z||z.constructor!==Object)},E=function(z){return"undefined"==typeof z},F=function a(){var b=!1,c=!1,d=aa.call(arguments),e=d.shift(),q,h,O;"boolean"==typeof d[d.length-1]&&(b=d.pop());"boolean"==typeof d[d.length-1]&&(c=b,b=d.pop());for(;d.length;)if(q=d.shift())for(h in q)if(q.hasOwnProperty(h)&&!E(O=q[h]))if(c)if(e[h]&&ba(e[h])&&ba(O))a(e[h],O,b,c);else{if(!0===b||E(e[h])||null===e[h])ba(O)?(e[h]={},a(e[h],
O,b,!0)):e[h]=O}else if(!0===b||E(e[h])||null===e[h])e[h]=O;return e},ha=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),s=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},ra=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),
ia=function(a,b){return b?ra("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1},I=function(a,b){b&&!ia(a,b)&&(a.className+=" "+b)},T=function(a,b){b&&(a.className=a.className.replace(ra("(?:^|\\s)"+b+"(?!\\S)"),""))},xa=Object.prototype.toString,Y=function(a){return null!=a&&"object"===typeof a},sa=function(a){return"number"==typeof a&&!isNaN(a)},X=function(a){return!!(a&&Y(a)&&sa(a.length)&&"[object Array]"==xa.call(a))},C=function(){var a={};return function(b,c,d){b=b._mjsid||(b._mjsid=ha());var e=
a[b];if(E(d))return e?e[c]:void 0;e||(e=a[b]={});return e[c]=d}}(),J=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},L=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},ca=function(){return!1},da=function(){return!0},Z=function(a){if(a instanceof Z)return a;if(!(this instanceof Z))return new Z(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);
var d,e=a.button;E(this.pageX)&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===e||(this.which=e&1?1:e&2?3:e&4?2:0);this.isDefaultPrevented=a.defaultPrevented||E(a.defaultPrevented)&&!1===a.returnValue?da:ca;this.timeStamp=a&&a.timeStamp||
(new Date).getTime()};Z.prototype={isDefaultPrevented:ca,isPropagationStopped:ca,isImmediatePropagationStopped:ca,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=da;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=da;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=da;a&&a.stopImmediatePropagation&&
a.stopImmediatePropagation();this.stopPropagation()}};var U=function(a){return new Z(a)},z=function(a){return"string"==typeof a},ja=function(a){if(!a||E(a.length)||z(a))return a?[a]:[];for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b},K=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,q=/(~|>|\+)/,h=/ +/,O=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,y=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,
P=/\D/,R=/[^(]*\(([^)]*)\)/,n=/\(.*/,v=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,r=document,V=!!r.getElementsByClassName,x=!!r.querySelectorAll,f={"first-child":function(g){return g.parentNode.getElementsByTagName("*")[0]!==g},"last-child":function(g){for(;(g=g.nextSibling)&&1!=g.nodeType;);return!!g},root:function(g){return"html"!==g.nodeName.toLowerCase()},"nth-child":function(g,a){var k=g.nodeIndex||0,m=a[3]=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(k)return!((k+m)%b);var f=g.parentNode.firstChild;
k++;do if(1==f.nodeType&&(f.nodeIndex=++k)&&g===f&&(k+m)%b)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(g,a){var k=g.nodeIndexLast||0,m=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(k)return!((k+m)%b);var f=g.parentNode.lastChild;k++;do if(1==f.nodeType&&(f.nodeLastIndex=k++)&&g===f&&(k+m)%b)return 0;while(f=f.previousSibling);return 1},empty:function(g){return!!g.firstChild},parent:function(g){return!g.firstChild},"only-child":function(g){return 1!=g.parentNode.getElementsByTagName("*").length},
checked:function(g){return!g.checked},lang:function(g,a){return g.lang!==a&&r.documentElement.lang!==a},enabled:function(g){return g.disabled||"hidden"===g.type},disabled:function(g){return!g.disabled},selected:function(g){return!g.selected}},p={},l=function(g){return p[g]||(p[g]=new RegExp("(^| +)"+g+"($| +)"))},t={"":function(g,a){return!!g.getAttribute(a)},"=":function(g,a,k){return(a=g.getAttribute(a))&&a===k},"&=":function(g,a,k){return(a=g.getAttribute(a))&&l(k).test(a)},"^=":function(g,a,k){return(a=
g.getAttribute(a)+"")&&!a.indexOf(k)},"$=":function(g,a,k){return(a=g.getAttribute(a)+"")&&a.indexOf(k)==a.length-k.length},"*=":function(g,a,k){return(a=g.getAttribute(a)+"")&&-1!=a.indexOf(k)},"|=":function(g,a,k){return(a=g.getAttribute(a)+"")&&(a===k||!!a.indexOf(k+"-"))},"!=":function(g,a,k){return!(a=g.getAttribute(a))||!l(k).test(a)}},w=function(g,M){M=M||r;var k=[],m=null,G,l,w,u,p,N,Q;if(x)try{k=ja(M.querySelectorAll(g.replace(b,'="$1"')))}catch(z){m=!0}if(!x||m)if(a.test(g))switch(m=0,g.charAt(0)){case "#":m=
g.slice(1);k=r.getElementById(m);k.id!==m&&(k=r.all[m]);k=k?[k]:[];break;case ".":G=g.slice(1);if(V)k=ja((k=M.getElementsByClassName(G)).length?k:[]);else{G=" "+G+" ";l=M.getElementsByTagName("*");for(w=0;u=l[w++];)-1!=(" "+u.className+" ").indexOf(G)&&(k[m++]=u);k=m?k:[]}break;case ":":l=M.getElementsByTagName("*");w=0;p=g.replace(R,"$1");for(N=g.replace(n,"");u=l[w++];)f[N]&&!f[N](u,p)&&(k[m++]=u);k=m?k:[];break;case "[":l=M.getElementsByTagName("*");w=0;u=v.exec(g);G=u[1];Q=u[2]||"";for(p=u[3];u=
l[w++];)t[Q]&&(t[Q](u,G,p)||"class"===G&&t[Q](u,"className",p))&&(k[m++]=u);k=m?k:[];break;default:k=ja((k=M.getElementsByTagName(g)).length?k:[])}else{for(var s=g.split(c),E=s.length-1,C=!!E,H,J,D,K,F,A,I,L,U,B,S,T;m=s[E--];){J=(H=m.replace(d,"$1%").replace(e,"$1&").replace(q," $1 ").split(h)).length;w=0;K=" ";for(l=[M];D=H[w++];)if(" "!==D&&">"!==D&&"~"!==D&&"+"!==D&&l){D=D.match(O);F=D[1]||"*";A=D[2];I=D[3]?" "+D[3]+" ":"";G=D[4];Q=D[5]||"";N=D[7];p="nth-child"===N||"nth-last-child"===N?y.exec("even"===
D[8]&&"2n"||"odd"===D[8]&&"2n%1"||!P.test(D[8])&&"0n%"+D[8]||D[8]):D[8];L=[];m=U=0;for(S=w==J;B=l[U++];)switch(K){case " ":T=B.getElementsByTagName(F);for(B=0;u=T[B++];)A&&u.id!==A||I&&-1==(" "+u.className+" ").indexOf(I)||!(!G||t[Q]&&(t[Q](u,G,D[6])||"class"===G&&t[Q](u,"className",D[6])))||u.yeasss||(f[N]?f[N](u,p):N)||(S&&(u.yeasss=1),L[m++]=u);break;case "~":for(F=F.toLowerCase();(B=B.nextSibling)&&!B.yeasss;)1!=B.nodeType||"*"!==F&&B.nodeName.toLowerCase()!==F||A&&B.id!==A||I&&-1==(" "+B.className+
" ").indexOf(I)||!(!G||t[Q]&&(t[Q](u,G,D[6])||"class"===G&&t[Q](u,"className",D[6])))||B.yeasss||(f[N]?f[N](B,p):N)||(S&&(B.yeasss=1),L[m++]=B);break;case "+":for(;(B=B.nextSibling)&&1!=B.nodeType;);!B||B.nodeName.toLowerCase()!==F.toLowerCase()&&"*"!==F||A&&B.id!==A||I&&-1==(" "+u.className+" ").indexOf(I)||!(!G||t[Q]&&(t[Q](u,G,D[6])||"class"===G&&t[Q](u,"className",D[6])))||B.yeasss||(f[N]?f[N](B,p):N)||(S&&(B.yeasss=1),L[m++]=B);break;case ">":for(T=B.getElementsByTagName(F),w=0;u=T[w++];)u.parentNode!==
B||A&&u.id!==A||I&&-1==(" "+u.className+" ").indexOf(I)||!(!G||t[Q]&&(t[Q](u,G,D[6])||"class"===G&&t[Q](u,"className",D[6])))||u.yeasss||(f[N]?f[N](u,p):N)||(S&&(u.yeasss=1),L[m++]=u)}l=L}else K=D;if(C){if(!l.concat){L=[];for(B=0;u=l[B];)L[B++]=u;l=L}k=l.concat(1==k.length?k[0]:k)}else k=l}for(m=k.length;m--;)k[m].yeasss=k[m].nodeIndex=k[m].nodeIndexLast=null}return k};w.is=function(g,a){var k=w(a,g.parentNode),m,b;m=-1;for(b=k.length;++m<b;)if(k[m]===g)return!0;return!1};return w}(),ka=K.is,ta=function(){var a=
["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",e="transitionDuration",q=null;(function(){var h=document.createElement("div"),O=!1,y,P,R;if(void 0!==h.style.animationName)O=!0;else for(P=0,R=a.length;P<R;P++)if(y=a[P],void 0!==h.style[y+"AnimationName"]){O=!0;b=y+"AnimationDelay";c=y+"AnimationDuration";d=y+"TransitionDelay";e=y+"TransitionDuration";break}return O})()&&(q={animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:e});
return function(){return q}}(),ya=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,d){var R,n,v=c.length;for(R=0;R<v;R++)n=a(c[R])+a(d[R]),b=Math.max(n,b);return b},c=ta(),d=c?c.animationDuration:null,e=c?c.animationDelay:null,q=c?c.transitionDuration:null,h=c?c.transitionDelay:null;return function(a){if(!c)return 0;var y=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var P=(y[d]||"").split(","),R=(y[e]||"").split(","),
n=(y[q]||"").split(","),y=(y[h]||"").split(",");a=Math.max(a,b(a,P,R));return a=Math.max(a,b(a,n,y))}}(),H=function(a){return"function"===typeof a},la=function(a){var b=C(a,"mjsAnimationQueue"),c;X(b)&&b.length?(c=b[0])&&c.stages&&(b=c.position,c=c.stages,T(a,c[b]),T(a,c[b]+"-active")):H(b)?b(a):"stop"==b&&$(a).stop(!0,!0);C(a,"mjsAnimationQueue",null)},S=function(a){var b;return a&&(Y(a)||H(a))?H(b=a.then)?b:!1:!1},ea=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,
0)},d=function(){b=!0;var O=a.shift();c(function(){O[0].apply(O[1],O[2]);a.length?d():b=!1},0)},e=function(c,y,P){P=P||[];a.push([c,y,P]);b||d()},q=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},h=function(a,b){if(a instanceof h)return a;if(!(this instanceof h))return new h(a,b);this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(!E(a))if(S(a)||!H(a))this.resolve(a);else try{a.call(b,s(this.resolve,this),s(this.reject,this))}catch(c){this.reject(c)}};
h.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;delete this._dones;delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=
S(a)){a instanceof h?a.then(s(this._processResolveValue,this),s(this._processRejectReason,this)):(new h(c,a)).then(s(this._processResolveValue,this),s(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,
this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);
return this},then:function(a,b){var c=new h,d=this._state;0==d||0!=this._wait?(a&&H(a)?this._fulfills.push([q(a,c),null]):this._fulfills.push([c.resolve,c]),b&&H(b)?this._rejects.push([q(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&H(a)?e(q(a,c),null,[this._value]):c.resolve(this._value):2==d&&(b&&H(b)?e(q(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)b[0].call(b[1]||null,this._value)},
done:function(a,b){var c=this._state;1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)b[0].call(b[1]||null,this._reason)},fail:function(a,b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:s(this.then,this),done:s(this.done,this),fail:s(this.fail,this),
always:s(this.always,this)}},after:function(a){var b=this;if(S(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};H(a.done)?a.done(c):a.then(c)}return b}};h.resolve=function(a){return new h(a)};h.reject=function(a){var b=new h;b.reject(a);return b};h.all=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=Array(c),n=c,v,r,e=function(a,f){d[f]=a;n--;0==n&&b.resolve(d)};for(v=0;v<c;v++)(function(c){r=
a[v];r instanceof h?r.done(function(a){e(a,c)}).fail(b.reject,b):S(r)||H(r)?(new h(r)).done(function(a){e(a,c)}).fail(b.reject,b):e(r,c)})(v);return b};h.when=function(){return h.all(arguments)};h.allResolved=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=[],n=c,v,r,e=function(a){d.push(a);x()},x=function(){n--;0==n&&b.resolve(d)};for(v=0;v<c;v++)r=a[v],r instanceof h?r.done(e).fail(x):S(r)||H(r)?(new h(r)).done(e).fail(x):e(r);return b};h.race=function(a){if(!a.length)return h.resolve(null);
var b=new h,c=a.length,d,n;for(d=0;d<c&&(n=a[d],n instanceof h?n.done(b.resolve,b).fail(b.reject,b):S(n)||H(n)?(new h(n)).done(b.resolve,b).fail(b.reject,b):b.resolve(n),b.isPending());d++);return b};return h}(),za=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,c=!!ta(),d=window.requestAnimationFrame?window.requestAnimationFrame:function(a){window.setTimeout(a,0)},e=function(a,b,c){var e=function(){(new Date).getTime()-b>=c?a():
d(e)};d(e)},q=function y(a,b,c,v,r,h,x){var f=function(){var b=C(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==x?!1:(r.reject(a),!0)},p=function(){if(!f()){var v=c;c++;if(c==b.length){r.resolve(a);C(a,"mjsAnimationQueue").shift();var g=C(a,"mjsAnimationQueue");g.length?(g=g[0],q(g.el,g.stages,0,g.start,g.deferred,!1,g.id)):C(a,"mjsAnimationQueue",null)}else C(a,"mjsAnimationQueue")[0].position=c,y(a,b,c,null,r);T(a,b[v]);T(a,b[v]+"-active")}},l=function(){if(!f()){I(a,b[c]+"-active");var v=
ya(a);v?e(p,(new Date).getTime(),v):p()}},t=function(){if(!f()){I(a,b[c]);var r;v&&(r=v(a),v=null);S(r)?r.done(l):d(l)}};h?d(t):t()},h=function(d,e,h,n,v){var r=new ea,V=C(d,"mjsAnimationQueue")||[],x=++b,f=d.getAttribute("mjs-animate"),p,l,t,w,g,M,k;e=e||f;n&&null===f&&(e=null);if(e){z(e)?"["==e.substr(0,1)?p=(new Function("","return "+e))():(p=a[e],e=v&&v.get("animate."+e,!0)):H(e)?l=e:X(e)&&(z(e[0])?p=e:(t=e[0],w=e[1]));ba(e)&&(p=e.stages,l=e.fn,t=e.before,w=e.after,g=e.options?F({},e.options):
{},M=e.context||null,k=e.duration||null,h=h||g.start);if(c&&p)return V.push({el:d,stages:p,start:h,deferred:r,position:0,id:x}),C(d,"mjsAnimationQueue",V),1==V.length&&q(d,p,0,h,r,!0,x),r;g=g||{};h&&(g.start=function(){h(d)});g.complete=function(){r.resolve(d)};k&&(g.duration=k);if(l&&H(l))return t&&F(d.style,t,!0,!1),h&&h(d),C(d,"mjsAnimationQueue",l.call(M,d,function(){r.resolve(d)})),r;if(window.jQuery){e=$(d);t&&e.css(t);C(d,"mjsAnimationQueue","stop");if(l&&z(l))return e[l](g),r;if(w)return e.animate(w,
g),r}}h?(l=h(d),S(l)?l.done(function(){r.resolve(d)}):r.resolve(d)):r.resolve(d);return r};h.addAnimationType=function(b,c){a[b]=c};h.stop=la;return h}(),ua=function(){return String.prototype.trim?function(a){return z(a)?a.trim():a}:function(a){return z(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),Aa=function(a,b,c){setTimeout(function(){a.apply(b,c||[])},0)},ma=function(){},Ba=function(){return E(JSON)?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),
va=function(a,b){var c,d;if(!a||!z(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},na=function(){this.events={}};na.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new oa(a,b));return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=new oa(a));return e[a].on(b,
c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,aa.call(arguments,1))},suspendEvent:function(a){a=
a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();
this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,e=a.length;++d<e;c=a[d],b[c]=s(this[c],this));this.api=b}return this.api}};var oa=function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=ha();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=E(b)?null:b};oa.prototype={getName:function(){return this.name},
destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var q=++this.lid,h=c.first||!1;e[d]=q;a={fn:a,scope:b,uniScope:e,id:q,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,prepend:c.prepend};h?this.listeners.unshift(a):this.listeners.push(a);this.map[q]=a;return q},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,
q;q=a==parseInt(a)?a:(b||a)[d];if(!q)return!1;for(var h=0,z=e.length;h<z;h++)if(e[h].id==q){c=h;delete e[h].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[q];return!0},hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=H(a)?b[this.uni]:a;if(!d)return!1;for(var e=0,q=c.length;e<q;e++)if(c[e].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];
this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=aa.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:aa.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,
arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};var Ca=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,e=/^(?:GET|HEAD)$/i,q=0,h=function(a,b,k){var m,c;if(z(a)&&k)b.push(encodeURIComponent(k)+"="+encodeURIComponent(a));else if(X(a)&&k)for(m=0,c=a.length;m<c;m++)h(a[m],b,k+"["+m+"]");else if(Y(a))for(m in a)a.hasOwnProperty(m)&&h(a[m],
b,k?k+"["+m+"]":m)},A=function(g,f){g.replace(a,"");if(!1===f.cache){var k=(new Date).getTime();return b.test(g)?g.replace(b,"$1_="+k):g+(c.test(g)?"&":"?")+"_="+k}!f.data||window.FormData&&f.data instanceof window.FormData||(z(f.data)?k=f.data:(k=[],h(f.data,k,null),k=k.join("&").replace(/%20/g,"+")),f.data=k,e.test(f.method)&&(g+=(c.test(g)?"&":"?")+f.data,f.data=null));return g},y={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",
text:"text/plain",_default:"*/*"},C={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},R={},n=new na,v=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),
b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},r=function(a,b,k){var m,c;if(!Y(a)&&!H(a)&&k)m=document.createElement("input"),m.setAttribute("type","hidden"),m.setAttribute("name",k),m.setAttribute("value",a),b.appendChild(m);else if(X(a)&&k)for(m=0,c=a.length;m<c;m++)r(a[m],b,k+"["+m+"]");else if(Y(a))for(m in a)a.hasOwnProperty(m)&&r(a[m],b,k?k+"["+m+"]":m)},V=function(a){for(var b,k,m="",c=0;c<a.elements.length;c++)if(b=a.elements[c],b.hasAttribute("name"))if(k="INPUT"===
b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===k)for(k=0;k<b.files.length;m+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[k++].name));else if("RADIO"!==k&&"CHECKBOX"!==k||b.checked)m+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);return m},x=function(a,b,k){var m=b?b.dataType:null;b=b?b.selector:null;if(!z(a))return a;k=k||"";if("xml"===m||!m&&0<=k.indexOf("xml"))return a=va(ua(a)),b?K(b,a):a;if("html"===m)return a=va(a,"text/html"),
b?K(b,a):a;if("fragment"==m){k=document.createDocumentFragment();m=document.createElement("div");for(m.innerHTML=a;m.firstChild;)k.appendChild(m.firstChild);return k}if("json"===m||!m&&0<=k.indexOf("json"))return Ba(ua(a));("script"===m||!m&&0<=k.indexOf("javascript"))&&v(a);return a+""},f=function(a){var b=E(window)?"":window.location.href,b=d.exec(b.toLowerCase())||[],k=d.exec(a.url.toLowerCase());this._opt=a;a.crossDomain=!(!k||k[1]===b[1]&&k[2]===b[2]&&(k[3]||("http:"===k[1]?"80":"443"))===(b[3]||
("http:"===b[1]?"80":"443")));b=new ea;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||!E(window)&&window.FormData||"iframe"==a.transport||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):V(a.form));a.url=A(a.url,a);k=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new w(a,b,this):new l(a,b,this):new t(a,b,this);this._deferred=b;this._transport=k;b.done(function(a){n.trigger("success",
a)});b.fail(function(a){n.trigger("error",a)});b.always(function(){n.trigger("end")});n.trigger("start");a.timeout&&(this._timeout=setTimeout(s(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===n.trigger("beforeSend",a,k)&&(this._promise=ea.reject());a.beforeSend&&!1===a.beforeSend.call(a.callbackScope,a,k)&&(this._promise=ea.reject());this._promise||(Aa(k.send,k),b.abort=s(this.abort,this),b.always(this.destroy,this),this._promise=b)};f.prototype={_jsonpName:null,_transport:null,
_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");a.style.display="none";a.setAttribute("method",this._opt.method);r(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||
"callback",k=a.jsonpCallback||"jsonp_"+ ++q;a.url+=(c.test(a.url)?"&":"?")+b+"="+k;this._jsonpName=k;E(window)||(window[k]=s(this.jsonpCallback,this));E(global)||(global[k]=s(this.jsonpCallback,this));return k},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},processResponseData:function(a,b){var k=this._opt;a=x(a,k,b);n.hasListener("processResponse")&&(a=n.trigger("processResponse",a,this._deferred));k.processResponse&&(a=k.processResponse.call(k.callbackScope,
a,this._deferred));return a},processResponse:function(a,b){var k=this._deferred;if(this._opt.jsonp)if(a){try{v(a)}catch(m){k.reject(m)}k.isPending()&&k.reject("jsonp script didn't invoke callback")}else k.reject("jsonp script is empty");else try{k.resolve(this.processResponseData(a,b))}catch(c){k.reject(c)}},destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;
delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&(E(window)||delete window[this._jsonpName],E(global)||delete global[this._jsonpName])}};var p=function(a,b){b=b||{};a&&!z(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),!b.url))throw"Must provide url";F(b,R,!1,!0);F(b,C,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new f(b)).promise()};
p.setup=function(a){F(R,a,!0,!0)};p.on=function(){n.on.apply(n,arguments)};p.un=function(){n.un.apply(n,arguments)};p.get=function(a,b){b=b||{};b.method="GET";return p(a,b)};p.post=function(a,b){b=b||{};b.method="POST";return p(a,b)};p.load=function(a,b,k){k=k||{};z(b)||(k=b);k.dataType="fragment";return p(b,k).done(function(b){if(k.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};p.loadScript=function(a){return p(a,{transport:"script"})};p.submit=function(a,b){b=b||{};b.form=
a;return p(null,b)};var l=function(a,b,k){var m;if(!(window.XMLHttpRequest&&(m=new XMLHttpRequest)||(m=new ActiveXObject("Msxml2.XMLHTTP"))||(m=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=m;this._deferred=b;this._opt=a;this._ajax=k;a.progress&&J(m,"progress",s(a.progress,a.callbackScope));a.uploadProgress&&m.upload&&J(m.upload,"progress",s(a.uploadProgress,a.callbackScope));try{var c;if(a.xhrFields)for(c in a.xhrFields)m[c]=a.xhrFields[c];a.data&&a.contentType&&
m.setRequestHeader("Content-Type",a.contentType);m.setRequestHeader("X-Requested-With","XMLHttpRequest");m.setRequestHeader("Accept",a.dataType&&y[a.dataType]?y[a.dataType]+", */*; q=0.01":y._default);for(c in a.headers)m.setRequestHeader(c,a.headers[c])}catch(f){}m.onreadystatechange=s(this.onReadyStateChange,this)};l.prototype={_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=ma,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=
ma;var k;a:{try{k=!a.status&&!E(location)&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(c){}k=!1}k?this._ajax.processResponse(z(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},abort:function(){this._xhr.onreadystatechange=ma;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;
delete this._deferred;delete this._opt;delete this._ajax}};var t=function(a,b,k){this._opt=a;this._ajax=k;this._deferred=b};t.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async","async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);J(a,"load",s(this.onLoad,this));J(a,"error",s(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},
onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};var w=function(a,b,k){this._opt=a;this._ajax=k;this._deferred=b};w.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ ++q,k=this._opt.form;a.setAttribute("id",
b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);k.setAttribute("action",this._opt.url);k.setAttribute("target",b);J(a,"load",s(this.onLoad,this));J(a,"error",s(this.onError,this));this._el=a;try{k.submit()}catch(c){this._deferred.reject(c)}},onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&
this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return p}(),W=function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},pa=function(){if(E(window.pageYOffset)){var a=document.body,b=document.documentElement;return b.clientHeight?function(){return b.scrollTop}:function(){return a.scrollTop}}return function(){return window.pageYOffset}}(),qa=function(){if(E(window.pageXOffset)){var a=
document.body,b=document.documentElement;return b.clientWidth?function(){return b.scrollLeft}:function(){return a.scrollLeft}}return function(){return window.pageXOffset}}(),A=function(a){var b;b=pa();var c=qa();if(a===window)c=document.documentElement,b={left:0,right:c.clientWidth,top:b,bottom:c.clientHeight+b,width:c.clientWidth,height:c.clientHeight};else if(a.getBoundingClientRect)a=a.getBoundingClientRect(),b={left:a.left+c,top:a.top+b,right:a.right+c,bottom:a.bottom+b},b.width=b.right-b.left,
b.height=b.bottom-b.top;else{var d=a.style;b={left:(parseInt(d.left,10)||0)+c,top:(parseInt(d.top,10)||0)+b,width:a.offsetWidth,height:a.offsetHeight,right:0,bottom:0}}b.getCenter=function(){return this.width/2};b.getCenterX=function(){return this.left+this.width/2};return b},fa={},Da=function(a,b,c,d){var e=b+"-"+c,q=function(a){a=U(a);return ka(a.target,b)?d(a):null};fa[e]||(fa[e]=[]);fa[e].push({el:a,ls:q,fn:d});J(a,c,q)},Ea=function(a,b,c,d){var e,q;if(q=fa[b+"-"+c])for(b=-1,e=q.length;++b<e;)q[b].el===
a&&q[b].fn===d&&L(a,c,q[b].ls)},wa=function(){var a=function(a,b){var c=a.style,d;for(d in b)c[d]=b[d]},b={t:"b",r:"l",b:"t",l:"r"},c={t:"top",r:"right",b:"bottom",l:"left"},d={t:["l","r"],r:["t","b"],b:["r","l"],l:["b","t"]},e=document.all&&!window.XMLHttpRequest,q=function(){var a={},b={};return{register:function(c){var d=c.getInstanceId(),e=c.getGroup(),h,f,p;a[d]=c;h=0;for(f=e.length;h<f;h++)p=e[h],b[p]||(b[p]={}),b[p][d]=!0;c.on("destroy",this.unregister,this)},unregister:function(b){b=b.getInstanceId();
delete a[b]},hideAll:function(c){var d=c.getInstanceId();c=c.getGroup();var e,h,f,p;e=0;for(h=c.length;e<h;e++)for(p in f=c[e],f=b[f],f)a[p]?p==d||a[p].isHideAllIgnored()||a[p].hide(null,!0,!0):delete f[p]}}}(),h=function(q,n,v){var r,s=this,x,f={backgroundColor:"transparent",width:"0px",height:"0px",position:"absolute",fontSize:"0px",lineHeight:"0px"},p=n.size,l=n.width||2*p;F(s,{init:function(){n.border&&s.createInner()},getEl:function(){return r},getDialogPositionOffset:function(){var a=(s.detectPointerPosition()||
"").substr(0,1),c=(q.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1),f={x:0,y:0};a==b[c]&&(f["t"==a||"b"==a?"y":"x"]="b"==a||"r"==a?-p:p);return f},createInner:function(){var a=F({},n);a.size=p-2*n.border;a.width=l-4*n.border;delete a.border;delete a.borderColor;delete a.borderCls;delete a.offset;x=new h(q,a,n.border)},detectPointerPosition:function(){if(n.position)return n.position;var a=(q.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1);return a?b[a]:null},detectPointerDirection:function(a){return n.direction?
n.direction:a},getBorders:function(a,f,g){var v={},k=a.substr(0,1);a=f.substr(0,1);var m=f.substr(1);f=e?"dotted":"solid";v["border"+W(c[b[k]])]=p+"px solid "+g;v["border"+W(c[k])]="0 "+f+" transparent";m?(v["border"+W(c[m])]="0 solid transparent",v["border"+W(c[b[m]])]=l+"px "+f+" transparent"):(g=Math.floor(l/2),v["border"+W(c[d[a][0]])]=g+"px "+f+" transparent",v["border"+W(c[d[a][1]])]=g+"px "+f+" transparent");return v},getOffsets:function(a,f){var g={},d=a.substr(0,1),k="t"==d||"b"==d?"r":"b";
if(!p)switch(document.body.appendChild(r),d){case "t":case "b":p=A(r).height;l=A(r).width;break;case "l":case "r":l=A(r).height,p=A(r).width}g[c[d]]=v?"auto":-p+"px";g[c[k]]="auto";if(v){var d=f.substr(0,1),m=f.substr(1);g[c[b[k]]]=m?"l"==m||"t"==m?v+"px":-l-v+"px":Math.floor(-l/2)+"px";g[c[b[d]]]=-(p+2*v)+"px"}else{switch(a){case "t":case "r":case "b":case "l":d=f!=a?"l"==f||"t"==f?n.offset:-l+n.offset:-l/2+n.offset;break;case "bl":case "tl":case "lt":case "rt":d=n.offset;break;default:d=-l-n.offset}g["margin"+
W(c[b[k]])]=d+"px";switch(a){case "t":case "r":case "b":case "l":d="50%";break;case "tr":case "rb":case "br":case "lb":d="100%";break;default:d=0}g[c[b[k]]]=d}return g},render:function(){if(!r){var b=s.detectPointerPosition();if(b)if(n.el){if(z(n.el)){var c=document.createElement("div");c.innerHTML=n.el;r=c.firstChild}else r=n.el;a(r,{position:"absolute"});a(r,s.getOffsets(b));I(r,n.cls);q.getElem().appendChild(r)}else{c=s.detectPointerDirection(b);r=document.createElement("div");var g=document.createComment(" ");
r.appendChild(g);a(r,f);a(r,s.getBorders(b,c,n.borderColor||n.color));a(r,s.getOffsets(b,c));I(r,n.borderCls||n.cls);x&&(x.render(),r.appendChild(x.getEl()));v||q.getElem().appendChild(r)}}},destroy:function(){s.remove();x=s=null},remove:function(){x&&x.remove();r&&(r.parentNode.removeChild(r),r=null)}},!0,!1);s.init();return s},s=function(a){if(!a)return{};var b=function(b,c,d){var e=a[b],f=!1;if(!E(e)){switch(d){case "string":f=z(e);break;case "function":f=H(e);break;case "number":f=sa(e)||e==parseInt(e);
break;case "dom":f=e&&(e.tagName||e.nodeName)?!0:!1;break;case "jquery":(f=e&&e.jquery?!0:!1)&&(e=e.get(0));break;case "boolean":if(!0===e||!1===e)f=!0;break;default:!0===d&&!0===e&&(f=!0),!1===d&&!1===e&&(f=!0)}f&&(a[b]={},a[b][c]=e)}};b("content","value","string");b("content","value","boolean");b("content","fn","function");b("ajax","url","string");b("cls","dialog","string");b("render","tpl","string");b("render","fn","function");b("render","el","dom");b("render","el","jquery");b("show","events",
!1);b("show","events","string");b("hide","events",!1);b("hide","events","string");b("toggle","events",!1);b("toggle","events","string");b("position","type","string");b("position","type",!1);b("position","get","function");b("overlay","enabled","boolean");b("pointer","position","string");b("pointer","size","number");return a},y={target:null,debug:!1,group:null,modal:!1,useHref:!1,content:{value:"",fn:null,prepare:null,attr:null},ajax:{url:null,data:null,dataType:"text",method:"GET"},cls:{dialog:null,
visible:null,hidden:null,loading:null},selector:{content:null},buttons:null,render:{tpl:"<div></div>",fn:null,el:null,zIndex:null,lazy:!0,style:null,appendTo:null,id:null,keepVisible:!1,keepInDOM:!1,lifetime:null},events:{show:{click:{preventDefault:!0,stopPropagation:!0,returnValue:!1,process:null}}},show:{delay:null,single:!1,events:null,animate:!1,ignoreHideAll:!1,focus:!1,preventScroll:!1},hide:{delay:null,timeout:null,events:null,destroy:!1,animate:!1,cancelShowDelay:!0},toggle:{events:null},
position:{type:"t",offsetX:0,offsetY:0,axis:null,get:null,screenX:!1,screenY:!1,resize:!0},pointer:{position:null,direction:null,size:0,width:null,color:null,offset:0,border:0,borderColor:null,el:null,cls:null,borderCls:null},overlay:{enabled:!1,color:"#000",opacity:.5,cls:null,animateShow:!1,animateHide:!1,preventScroll:!1},callback:{scope:null,contentchange:null,beforeshow:null,show:null,beforehide:null,hide:null,render:null,lifetime:null,targetchange:null,button:null}},P=function(b,c){b&&!z(b)&&
(c=b,b=null);c=c||{};var d=this,e={},E=ha(),x=new na,f=F({},y,s(P.defaults),s(P[b]),s(c),!0,!0),p=f.callback.scope||e,l,t,w,g={bindSelfOnRender:!1,target:null,visible:!1,enabled:!0,frozen:!1,rendered:!1,hideTimeout:null,hideDelay:null,showDelay:null,dynamicTarget:!1,dynamicTargetEl:null,images:0,position:null,destroyDelay:null};c=null;F(e,x.getApi(),{getElem:function(){return l},getInstanceId:function(){return E},getCfg:function(){return F({},f)},getGroup:function(){return f.group?z(f.group)?[f.group]:
f.group:[""]},setTarget:function(a){if(!a)return e;var b=!1,c=g.target;g.target?(d.setHandlers("unbind","_target"),b=!0):g.dynamicTarget&&(b=!0);z(a)?(g.dynamicTarget=!0,g.target=null):(g.dynamicTarget=!1,g.target=a);b&&(d.setHandlers("bind","_target"),d.trigger("targetchange",e,a,c));return e},getTarget:function(){return g.dynamicTarget?g.dynamicTargetEl:f.target},isEnabled:function(){return g.enabled},isVisible:function(){return g.visible},isHideAllIgnored:function(){return f.show.ignoreHideAll},
isFrozen:function(){return g.frozen},enable:function(){g.enabled=!0;return e},disable:function(){d.hide();g.enabled=!1;return e},freeze:function(){g.frozen=!0;return e},unfreeze:function(){g.frozen=!1;return e},toggle:function(a,b){return a&&a.stopPropagation&&g.dynamicTarget&&g.visible&&d.isDynamicTargetChanged(a)?d.show(a):d[g.visible?"hide":"show"](a,b)},show:function(a,b){var c=a&&a.stopPropagation?null:e,h=f.show;if(!e.isEnabled())return f.debug&&console.log("show: not enabled",e.getTarget()),
c;a&&a.stopPropagation&&f.events.show&&f.events.show[a.type]&&(c=f.events.show[a.type],c.process?c=c.process(e,a):(c.stopPropagation&&a.stopPropagation(),c.preventDefault&&a.preventDefault(),c=c.returnValue));if(g.visible&&g.hideTimeout)return window.clearTimeout(g.hideTimeout),g.hideTimeout=window.setTimeout(d.hide,f.hide.timeout),f.debug&&console.log("show: hide timeout was set",e.getTarget()),c;if(g.hideDelay)return window.clearTimeout(g.hideDelay),g.hideDelay=null,g.visible=!0,f.debug&&console.log("show: hide delay was set; already shown",
e.getTarget()),c;if(g.frozen)return f.debug&&console.log("show: frozen",e.getTarget()),c;g.destroyDelay&&(window.clearTimeout(g.destroyDelay),g.destroyDelay=null);var p=!1;a&&a.stopPropagation&&g.dynamicTarget&&(p=d.changeDynamicTarget(a));if(g.visible)if(p)if(f.render.fn)d.hide(null,!0);else return d.reposition(a),c;else return f.debug&&console.log("show: already shown",l),c;l?p&&d.changeDynamicContent():d.render();if(!1===d.trigger("beforeshow",e,a))return f.debug&&console.log("show: beforeshow return false",
e.getTarget()),c;la(l);g.visible=!0;h.single&&q.hideAll(d);d.toggleTitleAttribute(!1);h.delay&&!b?g.showDelay=window.setTimeout(function(){d.showAfterDelay(a)},h.delay):d.showAfterDelay(a,b);return c},hide:function(a,b,c){g.hideTimeout=null;var h=a&&a.stopPropagation?null:e;a&&a.stopPropagation&&f.events.hide&&f.events.hide[a.type]&&(h=f.events.hide[a.type],h.process?h=h.process(e,a):(h.stopPropagation&&a.stopPropagation(),h.preventDefault&&a.preventDefault(),h=h.returnValue));!g.visible&&g.hideDelay&&
b&&(window.clearTimeout(g.hideDelay),g.hideDelay=null,g.visible=!0);if(!l||!g.visible||!d.isEnabled())return f.debug&&console.log("hide: elem/visible/enabled: ",l,g.visible,d.isEnabled()),h;if(g.showDelay)return f.hide.cancelShowDelay||c?(window.clearTimeout(g.showDelay),g.showDelay=null,g.visible=!1,f.debug&&console.log("hide: cancelShowDelay: ",d.getTarget())):f.debug&&console.log("hide: show delay was set",d.getTarget()),h;if(g.frozen)return f.debug&&console.log("hide: frozen",d.getTarget()),h;
if(!1===d.trigger("beforehide",e,a))return f.debug&&console.log("hide: beforehide returned false",d.getTarget()),h;la(l);g.visible=!1;d.toggleTitleAttribute(!0);g.dynamicTarget&&d.resetDynamicTarget();f.hide.delay&&!b?g.hideDelay=window.setTimeout(function(){d.hideAfterDelay(a)},f.hide.delay):d.hideAfterDelay(a,b);return h},setPositionType:function(a){a&&(z(a)?(f.position.get=a,f.position.type=!1):(f.position.get=null,f.position.type=a));a=f.position.type;!1===a?g.position=!1:f.position.get&&"m"!=
a?g.position="fn":(a=a.substr(0,1),g.position="w"==a?"window":"m"==a?"mouse":"target");t&&(t.remove(),l&&t.render())},getPosition:function(a){if(!l)return null;var b,c=f.position;switch(g.position){case !1:return null;case "target":b=d.getTargetPosition(a);break;case "mouse":b=d.getMousePosition(a);break;case "window":b=d.getWindowPosition(a);break;case "fn":b=c.get.call(p,e,a)}if(!1!==c.screenX||!1!==c.screenY)b=d.correctScreenPosition(b,c.screenX,c.screenY);return b},reposition:function(b){b&&(b=
U(b));if(b=d.getPosition(b))void 0!=b.x&&a(l,{left:b.x+"px"}),void 0!=b.y&&a(l,{top:b.y+"px"}),void 0==b.x&&void 0==b.y&&a(l,b)},getContentElem:function(){return l?f.selector.content?K(f.selector.content,l).shift()||l:l:null},setContent:function(a,b){b=b||"";if(!l)return f.content.value=a,e;f.content.prepare&&(a=f.content.prepare(e,b,a));var c=e.getContentElem(),h=g.rendered&&!f.selector.content&&t,p=h&&t.getEl();if(h&&p)try{l.removeChild(p)}catch(u){}if(z(a))c.innerHTML=a;else for(var n in a){var q=
f.selector[n];q&&(q=K(q,c).shift())&&(q.innerHTML=a[n])}if(h&&p)try{l.appendChild(p)}catch(s){}c=K("img",c);g.images=c.length;n=-1;for(h=c.length;++n<h;J(c[n],"load",d.onImageLoad));d.trigger("contentchange",e,a,b);d.onContentChange();return e},readContent:function(){var a=e.getTarget(),b;a&&(b=f.content.attr?a.getAttribute(f.content.attr):a.getAttribute("tooltip")||a.getAttribute("title")||a.getAttribute("alt"));b&&d.setContent(b,"attribute");return e},loadContent:function(a){I(l,f.cls.loading);
a=F({},f.ajax,a,!0,!0);d.trigger("beforeajax",e,a);return Ca(a).done(d.onAjaxLoad)},destroy:function(){d.trigger("destroy",e);L(window,"resize",d.onWindowResize);L(window,"scroll",d.onWindowScroll);d.destroyElem();t&&(t.destroy(),t=null);d.setHandlers("unbind");x.destroy();w=g=e=d=x=null},setFocus:function(){var a=f.show.focus,b;if(!0===a)if(a=K("input",l).concat(K("textarea",l)),0<a.length)a[0].focus();else{if(f.buttons)for(b in f.buttons){(b=K(f.buttons[b],l).shift())&&b.focus();break}}else(b=K(a,
l).shift())&&b.focus()}},!0,!1);F(d,e,{init:function(){q.register(d);f.modal&&(f.overlay.enabled=!0);d.setPositionType();d.setTarget(f.target);if(f.pointer.size||f.pointer.el)t=new h(d,f.pointer);f.render.lazy||d.render();d.setHandlers("bind")},setHandlers:function(a,b){for(var c=["show","hide","toggle"],h="bind"==a?J:L,p="bind"==a?Da:Ea,u,n,q,t,s,E,y,x,A,C;u=c.shift();)if(n=f[u].events,!1!==n){if(z(n)||X(n))g.dynamicTarget?(s={},s[n]=f.target,n={_html:s}):n={_target:n};for(q in n){if(b)if("_self"==
b){if("_self"!=q&&"_overlay"!=q&&">"!=q.substr(0,1))continue}else if(q!=b)continue;if("_self"!=q&&"_overlay"!=q&&">"!=q.substr(0,1)||l){if(y=n[q]){switch(q){case "_target":x=[d.getTarget()];break;case "_self":x=[l];break;case "_window":x=[window];break;case "_document":x=[document];break;case "_html":x=[document.documentElement];break;case "_overlay":x=[w];break;default:x=">"==q.substr(0,1)?K(q.substr(1),l):K(q)}if(x&&x.length)if(z(y)&&(y=[y]),X(y))for(s=0,E=y.length;s<E;s++)for(A=-1,C=x.length;++A<
C;h(x[A],y[s],e[u]));else for(t in y)for(A=-1,C=x.length;++A<C;p(x[A],y[t],t,e[u]));}}else g.bindSelfOnRender=!0}}},resetDynamicTarget:function(){var a=g.dynamicTargetEl;a&&(d.setHandlers("unbind","_target"),d.trigger("targetchange",e,null,a))},isDynamicTargetChanged:function(a){var b=f.target;a=a.target;for(var d=g.dynamicTargetEl;a&&!ka(a,b);)a=a.parentNode;return a?!d||d!==a:!1},changeDynamicTarget:function(a){var b=f.target;a=a.target;for(var c=g.dynamicTargetEl;a&&!ka(a,b);)a=a.parentNode;if(!a||
c&&c===a)return!1;c&&d.setHandlers("unbind","_target");g.dynamicTargetEl=a;d.setHandlers("bind","_target");d.trigger("targetchange",e,a,c);return!0},showAfterDelay:function(a,b){g.showDelay=null;if(g.visible){f.position.manual||d.reposition(a);"mouse"==g.position&&J(document.documentElement,"mousemove",d.onMouseMove);var c=f.position;(c.resize||c.screenX||c.screenY)&&J(window,"resize",d.onWindowResize);(c.scroll||c.screenX||c.screenY)&&J(window,"scroll",d.onWindowScroll);if(b||!1!==d.trigger("afterdelay",
e,a)){w&&(f.overlay.animateShow?d.animate("show",null,!0):w.style.display="");if(f.show.preventScroll){var c=f.show.preventScroll,l,h;!0===c&&(c="body");c=K(c);l=-1;for(h=c.length;++l<h;J(c[l],"mousewheel",d.onPreventScroll)&&J(c[l],"touchmove",d.onPreventScroll));}f.show.animate&&!b?d.animate("show").done(function(){d.showAfterAnimation(a)}):d.showAfterAnimation(a)}else g.visible=!1,f.debug&&console.log("showAfterDelay: afterdelay returned false",e.getTarget())}else f.debug&&console.log("showAfterDelay: already hidden",
d.getTarget())},showAfterAnimation:function(a){g.visible?(T(l,f.cls.hidden),I(l,f.cls.visible),f.render.keepVisible||(l.style.display=""),f.hide.timeout&&(g.hideTimeout=window.setTimeout(d.hide,f.hide.timeout)),f.show.focus&&window.setTimeout(d.setFocus,20),d.trigger("show",e,a)):f.debug&&console.log("showAfterAnimation: already hidden",d.getTarget())},hideAfterDelay:function(a,b){g.hideDelay=null;if(g.visible)f.debug&&console.log("hideAfterDelay: already shown again",d.getTarget());else{"mouse"==
g.position&&L(document.documentElement,"mousemove",d.onMouseMove);var c=f.position;(c.resize||c.screenX||c.screenY)&&L(window,"resize",d.onWindowResize);(c.scroll||c.screenX||c.screenY)&&L(window,"scroll",d.onWindowScroll);if(b||!1!==d.trigger("afterhidedelay",e,a)){if(f.show.preventScroll){var c=f.show.preventScroll,h,p;!0===c&&(c="body");c=K(c);h=-1;for(p=c.length;++h<p;L(c[h],"mousewheel",d.onPreventScroll)&&L(c[h],"touchmove",d.onPreventScroll));}w&&(f.overlay.animateShow?d.animate("hide",null,
!0).done(function(){w.style.display="none"}):w.style.display="none");f.hide.animate&&!b?d.animate("hide").done(function(){d.hideAfterAnimation(a)}):d.hideAfterAnimation(a)}else g.visible=f.cls.hidden?!ia(l,f.cls.hidden):!(0>=l.offsetWidth||0>=l.offsetHeight),f.debug&&console.log("hideAfterDelay: afterhdelay returned false",d.getTarget())}},hideAfterAnimation:function(a){g.visible?f.debug&&console.log("hideAfterAnimation: already shown again",d.getTarget()):(T(l,f.cls.visible),I(l,f.cls.hidden),f.render.keepVisible||
(l.style.display="none"),d.trigger("hide",e,a),a=f.render.lifetime,null!==a&&(0===a?d.destroyElem():g.destroyDelay=window.setTimeout(d.destroyElem,a)),l&&f.hide.destroy&&window.setTimeout(function(){C(l,f.instanceName,null);d.destroy()},0))},render:function(){if(l)f.debug&&console.log("element already rendered",l);else{var b=f.render,c=f.cls;if(b.fn){var h=b.fn.call(p,e);b[z(h)?"tpl":"el"]=h}b.el?z(b.el)?(l=K(b.el).shift(),b.keepInDOM=!0):l=b.el:(h=document.createElement("div"),h.innerHTML=b.tpl,
l=h.firstChild);l||(l=document.createElement("div"));b.id&&l.setAttribute("id",b.id);f.render.keepVisible||(l.style.display="none");I(l,c.dialog);I(l,c.hidden);b.style&&a(l,b.style);f.overlay.enabled&&(w=document.createElement("div"),a(w,{display:"none",position:"fixed",left:0,top:0,right:0,bottom:0,opacity:f.overlay.opacity,backgroundColor:f.overlay.color}),document.body.appendChild(w),J(w,"click",d.onOverlayClick),b.zIndex&&a(w,{zIndex:b.zIndex}),f.overlay.cls&&I(w,f.overlay.cls));b.appendTo?b.appendTo.appendChild(l):
!1!==b.appendTo&&document.body.appendChild(l);b.zIndex&&a(l,{zIndex:b.zIndex});b=f.content;if(!1!==b.value)if(b.value)d.setContent(b.value);else if(b.fn)d.setContent(b.fn.call(p,e));else d[f.ajax.url?"loadContent":"readContent"]();t&&t.render();if(f.buttons)for(var n in f.buttons)if(b=K(f.buttons[n],l).shift())C(b,"metaphorjsTooltip-button-id",n),J(b,"click",d.onButtonClick),J(b,"keyup",d.onButtonKeyup);g.bindSelfOnRender&&(d.setHandlers("bind","_self"),g.bindSelfOnRender=!1);g.rendered=!0;d.trigger("render",
e)}},animate:function(a,b,c){var e,g;e=c?"show"==a?f.overlay.animateShow:f.overlay.animateHide:f[a].animate;H(e)&&(e=e(d,b));g=e.skipDisplayChange||!1;"boolean"==typeof e?e=a:z(e)&&(e=[e]);return za(l,e,function(){"show"!=a||g||(c?w.style.display="":l.style.display="")})},toggleTitleAttribute:function(a){var b=e.getTarget(),c;b&&(!1===a?(C(b,"tmp-title",b.getAttribute("title")),b.removeAttribute("title")):(c=C(b,"tmp-title"))&&b.setAttribute("title",c))},changeDynamicContent:function(){f.content.fn?
d.setContent(f.content.fn.call(p,e)):f.content.attr&&d.readContent()},getDialogSize:function(){var b=f.cls.hidden?ia(l,f.cls.hidden):!!(0>=l.offsetWidth||0>=l.offsetHeight),c,d=l.style.left;b&&(a(l,{left:"-1000px"}),l.style.display="");c={width:A(l).width,height:A(l).height};b&&(a(l,{left:d}),l.style.display="none");return c},getTargetSize:function(){var a=d.getTarget();return a?{width:A(a).width,height:A(a).height}:null},getTargetPosition:function(a,b){var c=d.getTarget();if(!c)return null;var e=
d.getDialogSize(),c=A(c),g=d.getTargetSize(),h={};b=b||f.position.type;var l=b.substr(0,1),p=b.substr(1),n=f.position.offsetX,q=f.position.offsetY,r=t?t.getDialogPositionOffset():null;switch(l){case "t":h.y=c.top-e.height-q;break;case "r":h.x=c.left+g.width+n;break;case "b":h.y=c.top+g.height+q;break;case "l":h.x=c.left-e.width-n}switch(p){case "t":h.y=c.top+q;break;case "r":h.x=c.left+g.width-e.width-n;break;case "b":h.y=c.top+g.height-e.height-q;break;case "l":h.x=c.left+n;break;case "rc":h.x=c.left+
g.width+n;break;case "lc":h.x=c.left-e.width-n;break;case "":switch(l){case "t":case "b":h.x=c.left+g.width/2-e.width/2;break;case "r":case "l":h.y=c.top+g.height/2-e.height/2}}r&&(h.x+=r.x,h.y+=r.y);return h},getMousePosition:function(a){if(!a)return null;var b=d.getDialogSize(),c={},g=f.position.type.substr(1),h=f.position.offsetX,l=f.position.offsetY,n=f.position.axis,q=t?t.getDialogPositionOffset():null;switch(g){case "":c=f.position.get.call(p,e,a);break;case "t":c.y=a.pageY-b.height-l;c.x=a.pageX-
b.width/2;break;case "r":c.y=a.pageY-b.height/2;c.x=a.pageX+h;break;case "b":c.y=a.pageY+l;c.x=a.pageX-b.width/2;break;case "l":c.y=a.pageY-b.height/2;c.x=a.pageX-b.width-h;break;case "rt":c.y=a.pageY-b.height-l;c.x=a.pageX+h;break;case "rb":c.y=a.pageY+l;c.x=a.pageX+h;break;case "lt":c.y=a.pageY-b.height-l;c.x=a.pageX-b.width-h;break;case "lb":c.y=a.pageY+l,c.x=a.pageX-b.width-h}q&&(c.x+=q.x,c.y+=q.y);n&&(a=d.getTargetPosition(a,g))&&("x"==n?c.y=a.y:c.x=a.x);return c},getWindowPosition:function(){var a=
d.getDialogSize(),b={},c=f.position.type.substr(1),e=f.position.offsetX,g=f.position.offsetY,h=pa(),l=qa(),n=A(window).width,p=A(window).height;switch(c){case "c":b.y=p/2-a.height/2+h;b.x=n/2-a.width/2+l;break;case "t":b.y=h+g;b.x=n/2-a.width/2+l;break;case "r":b.y=p/2-a.height/2+h;b.x=n-a.width+l-e;break;case "b":b.y=p-a.height+h-g;b.x=n/2-a.width/2+l;break;case "l":b.y=p/2-a.height/2+h;b.x=l+e;break;case "rt":b.y=h+g;b.x=n-a.width+l-e;break;case "rb":b.y=p-a.height+h-g;b.x=n-a.width+l-e;break;case "lt":b.y=
h+g;b.x=l+e;break;case "lb":b.y=p-a.height+h-g,b.x=l+e}return b},correctScreenPosition:function(a,b,c){var e=d.getDialogSize(),f=pa(),g=qa(),h=A(window).width,l=A(window).height;c&&a.y+e.height>l+f-c&&(a.y=l+f-c-e.height);b&&a.x+e.width>h+g-b&&(a.x=h+g-b-e.width);c&&a.y<f+c&&(a.y=f+c);b&&a.x<g+b&&(a.x=g+b);return a},onMouseMove:function(a){d.reposition(U(a))},onWindowResize:function(a){d.reposition(U(a))},onWindowScroll:function(a){d.reposition(U(a))},onPreventScroll:function(a){U(a).preventDefault()},
onOverlayClick:function(a){return f.modal?(a=U(a),a.preventDefault(),a.stopPropagation(),!1):null},onButtonClick:function(a){var b=U(a).target;(b=C(b,"metaphorjsTooltip-button-id"))&&d.trigger("button",e,b,a)},onButtonKeyup:function(a){if(13==a.keyCode||32==a.keyCode){var b=C(a.target,"metaphorjsTooltip-button-id");b&&d.trigger("button",e,b,U(a))}},onAjaxLoad:function(a){T(l,f.cls.loading);d.setContent(a,"ajax")},onImageLoad:function(){g.images--;d.onContentChange()},onContentChange:function(){g.visible&&
d.reposition()},destroyElem:function(){d.setHandlers("unbind","_self");g.bindSelfOnRender=!0;t&&t.remove();w&&(w.parentNode.removeChild(w),w=null);l&&(f.render.keepInDOM||l.parentNode.removeChild(l),l=null);d.trigger("lifetime",e)}},!0,!1);delete f.callback.scope;for(var M in f.callback)e.on(M,f.callback[M],p);f.target&&f.useHref&&(M=f.target.getAttribute("href"),"#"==M.substr(0,1)?f.render.el=M:f.ajax.url=M);d.init();return e};F(P,{defaults:{}});return P}();window.jQuery&&(jQuery.fn.metaphorjsTooltip=
function(a,b,c){var d="dialog",e;"string"==typeof a&&"destroy"!=a&&(e=a,a=b,b=c);a=a||{};d+="-"+(b||"default");this.each(function(){var b=C(this,d);if(b)if("destroy"==a)b.destroy(),C(this,d,null);else throw Error("MetaphorJs tooltip already instantiated for this html element");else a.target=this,a.instanceName=d,C(this,d,new wa(e,a))})});ga.lib.Dialog=wa;"undefined"!=typeof global?global.MetaphorJs=ga:window.MetaphorJs=ga})();
