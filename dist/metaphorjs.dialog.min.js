(function(){var aa={lib:{},cmp:{},view:{}},ba=Array.prototype.slice,ca=function(z){return!(!z||z.constructor!==Object)},B=function(z){return"undefined"==typeof z},E=function a(){var b=!1,c=!1,d=ba.call(arguments),e=d.shift(),m,h,x;"boolean"==typeof d[d.length-1]&&(b=d.pop());"boolean"==typeof d[d.length-1]&&(c=b,b=d.pop());for(;d.length;)if(m=d.shift())for(h in m)if(m.hasOwnProperty(h)&&!B(x=m[h]))if(c)if(e[h]&&ca(e[h])&&ca(x))a(e[h],x,b,c);else{if(!0===b||B(e[h])||null===e[h])ca(x)?(e[h]={},a(e[h],
x,b,!0)):e[h]=x}else if(!0===b||B(e[h])||null===e[h])e[h]=x;return e},ha=function(){var a=["0","0","0"];return function(){for(var b=a.length,c;b;){b--;c=a[b].charCodeAt(0);if(57==c)return a[b]="A",a.join("");if(90==c)a[b]="0";else return a[b]=String.fromCharCode(c+1),a.join("")}a.unshift("0");return a.join("")}}(),y=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},ra=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),
ia=function(a,b){return b?ra("(?:^|\\s)"+b+"(?!\\S)").test(a.className):!1},K=function(a,b){b&&!ia(a,b)&&(a.className+=" "+b)},S=function(a,b){b&&(a.className=a.className.replace(ra("(?:^|\\s)"+b+"(?!\\S)"),""))},za=Object.prototype.toString,Y=function(a){return null!=a&&"object"===typeof a},sa=function(a){return"number"==typeof a&&!isNaN(a)},X=function(a){return!!(a&&Y(a)&&sa(a.length)&&"[object Array]"==za.call(a))},H=function(){var a={};return function(b,c,d){b=b._mjsid||(b._mjsid=ha());var e=
a[b];if(B(d))return e?e[c]:void 0;e||(e=a[b]={});return e[c]=d}}(),F=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},L=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},da=function(){return!1},ea=function(){return!0},Z=function(a){if(a instanceof Z)return a;if(!(this instanceof Z))return new Z(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(c){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);
var d,e=a.button;B(this.pageX)&&null!==a.clientX&&(d=this.target?this.target.ownerDocument||document:document,b=d.documentElement,d=d.body,this.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which||void 0===e||(this.which=e&1?1:e&2?3:e&4?2:0);this.isDefaultPrevented=a.defaultPrevented||B(a.defaultPrevented)&&!1===a.returnValue?ea:da;this.timeStamp=a&&a.timeStamp||
(new Date).getTime()};Z.prototype={isDefaultPrevented:da,isPropagationStopped:da,isImmediatePropagationStopped:da,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ea;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ea;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ea;a&&a.stopImmediatePropagation&&
a.stopImmediatePropagation();this.stopPropagation()}};var T=function(a){return new Z(a)},z=function(a){return"string"==typeof a},ja=function(a){if(!a||B(a.length)||z(a))return a?[a]:[];for(var b=[],c=-1,d=a.length>>>0;++c!==d;b[c]=a[c]);return b},M=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,c=/ *, */,d=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,m=/(~|>|\+)/,h=/ +/,x=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,A=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,
w=/\D/,U=/[^(]*\(([^)]*)\)/,n=/\(.*/,t=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,r=document,V=!!r.getElementsByClassName,P=!!r.querySelectorAll,f={"first-child":function(g){return g.parentNode.getElementsByTagName("*")[0]!==g},"last-child":function(g){for(;(g=g.nextSibling)&&1!=g.nodeType;);return!!g},root:function(g){return"html"!==g.nodeName.toLowerCase()},"nth-child":function(g,a){var k=g.nodeIndex||0,p=a[3]=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(k)return!((k+p)%b);var f=g.parentNode.firstChild;
k++;do if(1==f.nodeType&&(f.nodeIndex=++k)&&g===f&&(k+p)%b)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(g,a){var k=g.nodeIndexLast||0,p=a[3]?("%"===a[2]?-1:1)*a[3]:0,b=a[1];if(k)return!((k+p)%b);var f=g.parentNode.lastChild;k++;do if(1==f.nodeType&&(f.nodeLastIndex=k++)&&g===f&&(k+p)%b)return 0;while(f=f.previousSibling);return 1},empty:function(g){return!!g.firstChild},parent:function(g){return!g.firstChild},"only-child":function(g){return 1!=g.parentNode.getElementsByTagName("*").length},
checked:function(g){return!g.checked},lang:function(g,a){return g.lang!==a&&r.documentElement.lang!==a},enabled:function(g){return g.disabled||"hidden"===g.type},disabled:function(g){return!g.disabled},selected:function(g){return!g.selected}},q={},l=function(g){return q[g]||(q[g]=new RegExp("(^| +)"+g+"($| +)"))},s={"":function(g,a){return!!g.getAttribute(a)},"=":function(g,a,k){return(a=g.getAttribute(a))&&a===k},"&=":function(g,a,k){return(a=g.getAttribute(a))&&l(k).test(a)},"^=":function(g,a,k){return(a=
g.getAttribute(a)+"")&&!a.indexOf(k)},"$=":function(g,a,k){return(a=g.getAttribute(a)+"")&&a.indexOf(k)==a.length-k.length},"*=":function(g,a,k){return(a=g.getAttribute(a)+"")&&-1!=a.indexOf(k)},"|=":function(g,a,k){return(a=g.getAttribute(a)+"")&&(a===k||!!a.indexOf(k+"-"))},"!=":function(g,a,k){return!(a=g.getAttribute(a))||!l(k).test(a)}},v=function(g,N){N=N||r;var k=[],p=null,I,l,v,u,q,O,Q;if(P)try{k=ja(N.querySelectorAll(g.replace(b,'="$1"')))}catch(z){p=!0}if(!P||p)if(a.test(g))switch(p=0,g.charAt(0)){case "#":p=
g.slice(1);k=r.getElementById(p);k.id!==p&&(k=r.all[p]);k=k?[k]:[];break;case ".":I=g.slice(1);if(V)k=ja((k=N.getElementsByClassName(I)).length?k:[]);else{I=" "+I+" ";l=N.getElementsByTagName("*");for(v=0;u=l[v++];)-1!=(" "+u.className+" ").indexOf(I)&&(k[p++]=u);k=p?k:[]}break;case ":":l=N.getElementsByTagName("*");v=0;q=g.replace(U,"$1");for(O=g.replace(n,"");u=l[v++];)f[O]&&!f[O](u,q)&&(k[p++]=u);k=p?k:[];break;case "[":l=N.getElementsByTagName("*");v=0;u=t.exec(g);I=u[1];Q=u[2]||"";for(q=u[3];u=
l[v++];)s[Q]&&(s[Q](u,I,q)||"class"===I&&s[Q](u,"className",q))&&(k[p++]=u);k=p?k:[];break;default:k=ja((k=N.getElementsByTagName(g)).length?k:[])}else{for(var y=g.split(c),B=y.length-1,H=!!B,F,J,D,M,E,G,K,L,T,C,R,S;p=y[B--];){J=(F=p.replace(d,"$1%").replace(e,"$1&").replace(m," $1 ").split(h)).length;v=0;M=" ";for(l=[N];D=F[v++];)if(" "!==D&&">"!==D&&"~"!==D&&"+"!==D&&l){D=D.match(x);E=D[1]||"*";G=D[2];K=D[3]?" "+D[3]+" ":"";I=D[4];Q=D[5]||"";O=D[7];q="nth-child"===O||"nth-last-child"===O?A.exec("even"===
D[8]&&"2n"||"odd"===D[8]&&"2n%1"||!w.test(D[8])&&"0n%"+D[8]||D[8]):D[8];L=[];p=T=0;for(R=v==J;C=l[T++];)switch(M){case " ":S=C.getElementsByTagName(E);for(C=0;u=S[C++];)G&&u.id!==G||K&&-1==(" "+u.className+" ").indexOf(K)||!(!I||s[Q]&&(s[Q](u,I,D[6])||"class"===I&&s[Q](u,"className",D[6])))||u.yeasss||(f[O]?f[O](u,q):O)||(R&&(u.yeasss=1),L[p++]=u);break;case "~":for(E=E.toLowerCase();(C=C.nextSibling)&&!C.yeasss;)1!=C.nodeType||"*"!==E&&C.nodeName.toLowerCase()!==E||G&&C.id!==G||K&&-1==(" "+C.className+
" ").indexOf(K)||!(!I||s[Q]&&(s[Q](u,I,D[6])||"class"===I&&s[Q](u,"className",D[6])))||C.yeasss||(f[O]?f[O](C,q):O)||(R&&(C.yeasss=1),L[p++]=C);break;case "+":for(;(C=C.nextSibling)&&1!=C.nodeType;);!C||C.nodeName.toLowerCase()!==E.toLowerCase()&&"*"!==E||G&&C.id!==G||K&&-1==(" "+u.className+" ").indexOf(K)||!(!I||s[Q]&&(s[Q](u,I,D[6])||"class"===I&&s[Q](u,"className",D[6])))||C.yeasss||(f[O]?f[O](C,q):O)||(R&&(C.yeasss=1),L[p++]=C);break;case ">":for(S=C.getElementsByTagName(E),v=0;u=S[v++];)u.parentNode!==
C||G&&u.id!==G||K&&-1==(" "+u.className+" ").indexOf(K)||!(!I||s[Q]&&(s[Q](u,I,D[6])||"class"===I&&s[Q](u,"className",D[6])))||u.yeasss||(f[O]?f[O](u,q):O)||(R&&(u.yeasss=1),L[p++]=u)}l=L}else M=D;if(H){if(!l.concat){L=[];for(C=0;u=l[C];)L[C++]=u;l=L}k=l.concat(1==k.length?k[0]:k)}else k=l}for(p=k.length;p--;)k[p].yeasss=k[p].nodeIndex=k[p].nodeIndexLast=null}return k};v.is=function(g,a){var k=v(a,g.parentNode),p,b;p=-1;for(b=k.length;++p<b;)if(k[p]===g)return!0;return!1};return v}(),ka=M.is,ta=function(){var a=
["Moz","Webkit","ms","O","Khtml"],b="animationDelay",c="animationDuration",d="transitionDelay",e="transitionDuration",m=null;(function(){var h=document.createElement("div"),x=!1,A,w,U;if(void 0!==h.style.animationName)x=!0;else for(w=0,U=a.length;w<U;w++)if(A=a[w],void 0!==h.style[A+"AnimationName"]){x=!0;b=A+"AnimationDelay";c=A+"AnimationDuration";d=A+"TransitionDelay";e=A+"TransitionDuration";break}return x})()&&(m={animationDelay:b,animationDuration:c,transitionDelay:d,transitionDuration:e});
return function(){return m}}(),Aa=function(){var a=function(a){if(!a)return 0;var b=parseFloat(a);-1==a.indexOf("ms")&&(b*=1E3);return b},b=function(b,c,w){var d,n,t=c.length;for(d=0;d<t;d++)n=a(c[d])+a(w[d]),b=Math.max(n,b);return b},c=ta(),d=c?c.animationDuration:null,e=c?c.animationDelay:null,m=c?c.transitionDuration:null,h=c?c.transitionDelay:null;return function(a){if(!c)return 0;var A=window.getComputedStyle?window.getComputedStyle(a,null):a.style;a=0;var w=(A[d]||"").split(","),U=(A[e]||"").split(","),
n=(A[m]||"").split(","),A=(A[h]||"").split(",");a=Math.max(a,b(a,w,U));return a=Math.max(a,b(a,n,A))}}(),J=function(a){return"function"===typeof a},la=function(a){var b=H(a,"mjsAnimationQueue"),c;X(b)&&b.length?(c=b[0])&&c.stages&&(b=c.position,c=c.stages,S(a,c[b]),S(a,c[b]+"-active")):J(b)?b(a):"stop"==b&&$(a).stop(!0,!0);H(a,"mjsAnimationQueue",null)},R=function(a){var b;return a&&(Y(a)||J(a))?J(b=a.then)?b:!1:!1},ua=function(a,b,c){setTimeout(function(){a.apply(b,c||[])},0)},va=function(a){var b=
a.stack||Error().stack;ua(function(){!B(console)&&console.log&&(console.log(a),b&&console.log(b))})},fa=function(){var a=[],b=!1,c="undefined"!=typeof process?process.nextTick:function(a){setTimeout(a,0)},d=function(){b=!0;var x=a.shift();c(function(){x[0].apply(x[1],x[2]);a.length?d():b=!1},0)},e=function(c,A,w){w=w||[];a.push([c,A,w]);b||d()},m=function(a,b){return function(c){try{b.resolve(a(c))}catch(d){b.reject(d)}}},h=function(a,b){if(a instanceof h)return a;if(!(this instanceof h))return new h(a,
b);this._fulfills=[];this._rejects=[];this._dones=[];this._fails=[];if(!B(a))if(R(a)||!J(a))this.resolve(a);else try{a.call(b,y(this.resolve,this),y(this.reject,this))}catch(c){this.reject(c)}};h.prototype={_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==this._state},isRejected:function(){return 2==this._state},_cleanup:function(){delete this._fulfills;delete this._rejects;
delete this._dones;delete this._fails},_processValue:function(a,b){var c;if(0==this._state)if(a===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(c=R(a)){a instanceof h?a.then(y(this._processResolveValue,this),y(this._processRejectReason,this)):(new h(c,a)).then(y(this._processResolveValue,this),y(this._processRejectReason,this));return}}catch(d){0==this._state&&this._doReject(d);return}b.call(this,a)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,
b;b=a.shift();)e(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;
this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new h,d=this._state;0==d||0!=this._wait?(a&&J(a)?this._fulfills.push([m(a,c),null]):this._fulfills.push([c.resolve,c]),b&&J(b)?this._rejects.push([m(b,c),null]):this._rejects.push([c.reject,c])):1==d?a&&J(a)?e(m(a,c),null,[this._value]):
c.resolve(this._value):2==d&&(b&&J(b)?e(m(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,this._value)}catch(c){va(c)}},done:function(a,b){var c=this._state;1==c&&0==this._wait?a.call(b||null,this._value):0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){va(c)}},fail:function(a,
b){var c=this._state;2==c&&0==this._wait?a.call(b||null,this._reason):0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:y(this.then,this),done:y(this.done,this),fail:y(this.fail,this),always:y(this.always,this)}},after:function(a){var b=this;if(R(a)){b._wait++;var c=function(){b._wait--;0==b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};J(a.done)?a.done(c):a.then(c)}return b}};
h.resolve=function(a){return new h(a)};h.reject=function(a){var b=new h;b.reject(a);return b};h.all=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=Array(c),n=c,t,r,e=function(a,f){d[f]=a;n--;0==n&&b.resolve(d)};for(t=0;t<c;t++)(function(c){r=a[t];r instanceof h?r.done(function(a){e(a,c)}).fail(b.reject,b):R(r)||J(r)?(new h(r)).done(function(a){e(a,c)}).fail(b.reject,b):e(r,c)})(t);return b};h.when=function(){return h.all(arguments)};h.allResolved=function(a){if(!a.length)return h.resolve(null);
var b=new h,c=a.length,d=[],n=c,t,r,e=function(a){d.push(a);m()},m=function(){n--;0==n&&b.resolve(d)};for(t=0;t<c;t++)r=a[t],r instanceof h?r.done(e).fail(m):R(r)||J(r)?(new h(r)).done(e).fail(m):e(r);return b};h.race=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d,n;for(d=0;d<c&&(n=a[d],n instanceof h?n.done(b.resolve,b).fail(b.reject,b):R(n)||J(n)?(new h(n)).done(b.resolve,b).fail(b.reject,b):b.resolve(n),b.isPending());d++);return b};return h}(),Ba=function(){var a={show:["mjs-show"],
hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],move:["mjs-move"]},b=0,c=!!ta(),d=window.requestAnimationFrame?window.requestAnimationFrame:function(a){setTimeout(a,0)},e=function(a,b,c){var e=function(){(new Date).getTime()-b>=c?a():d(e)};d(e)},m=function A(a,b,c,t,r,h,P){var f=function(){var b=H(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==P?!1:(r.reject(a),!0)},q=function(){if(!f()){var t=c;c++;if(c==b.length){r.resolve(a);H(a,"mjsAnimationQueue").shift();var g=H(a,"mjsAnimationQueue");
g.length?(g=g[0],m(g.el,g.stages,0,g.start,g.deferred,!1,g.id)):H(a,"mjsAnimationQueue",null)}else H(a,"mjsAnimationQueue")[0].position=c,A(a,b,c,null,r);S(a,b[t]);S(a,b[t]+"-active")}},l=function(){if(!f()){K(a,b[c]+"-active");var t=Aa(a);t?e(q,(new Date).getTime(),t):q()}},s=function(){if(!f()){K(a,b[c]);var r;t&&(r=t(a),t=null);R(r)?r.done(l):d(l)}};h?d(s):s()},h=function(d,e,h,n,t){var r=new fa,V=H(d,"mjsAnimationQueue")||[],P=++b,f=d.getAttribute("mjs-animate"),q,l,s,v,g,N,k;e=e||f;n&&null===
f&&(e=null);if(e){z(e)?"["==e.substr(0,1)?q=(new Function("","return "+e))():(q=a[e],e=t&&t.get("animate."+e,!0)):J(e)?l=e:X(e)&&(z(e[0])?q=e:(s=e[0],v=e[1]));ca(e)&&(q=e.stages,l=e.fn,s=e.before,v=e.after,g=e.options?E({},e.options):{},N=e.context||null,k=e.duration||null,h=h||g.start);if(c&&q)return V.push({el:d,stages:q,start:h,deferred:r,position:0,id:P}),H(d,"mjsAnimationQueue",V),1==V.length&&m(d,q,0,h,r,!0,P),r;g=g||{};h&&(g.start=function(){h(d)});g.complete=function(){r.resolve(d)};k&&(g.duration=
k);if(l&&J(l))return s&&E(d.style,s,!0,!1),h&&h(d),H(d,"mjsAnimationQueue",l.call(N,d,function(){r.resolve(d)})),r;if(window.jQuery){e=$(d);s&&e.css(s);H(d,"mjsAnimationQueue","stop");if(l&&z(l))return e[l](g),r;if(v)return e.animate(v,g),r}}h?(l=h(d),R(l)?l.done(function(){r.resolve(d)}):r.resolve(d)):r.resolve(d);return r};h.addAnimationType=function(b,c){a[b]=c};h.stop=la;return h}(),wa=function(){return String.prototype.trim?function(a){return z(a)?a.trim():a}:function(a){return z(a)?a.replace(/^\s\s*/,
"").replace(/\s\s*$/,""):a}}(),ma=function(){},Ca=function(){return B(JSON)?function(a){return JSON.parse(a)}:function(a){return(new Function("return "+a))()}}(),xa=function(a,b){var c,d;if(!a||!z(a))return null;try{d=new DOMParser,c=d.parseFromString(a,b||"text/xml")}catch(e){c=void 0}if(!c||c.getElementsByTagName("parsererror").length)throw"Invalid XML: "+a;return c},na=function(){this.events={}};na.prototype={createEvent:function(a,b){a=a.toLowerCase();var c=this.events;c[a]||(c[a]=new oa(a,b));
return c[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,b,c,d){a=a.toLowerCase();var e=this.events;e[a]||(e[a]=new oa(a));return e[a].on(b,c,d)},once:function(a,b,c,d){d=d||{};d.limit=1;return this.on(a,b,c,d)},un:function(a,b,c){a=a.toLowerCase();var d=this.events;d[a]&&d[a].un(b,c)},hasListener:function(a,b,c){a=a.toLowerCase();var d=this.events;return d[a]?d[a].hasListener(b,c):!1},removeAllListeners:function(a){var b=this.events;b[a]&&b[a].removeAllListeners()},
trigger:function(){var a=arguments[0],b=this.events,a=a.toLowerCase();if(!b[a])return null;a=b[a];return a.trigger.apply(a,ba.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].suspend()},suspendAllEvents:function(){var a=this.events,b;for(b in a)a[b].suspend()},resumeEvent:function(a){a=a.toLowerCase();var b=this.events;b[a]&&b[a].resume()},resumeAllEvents:function(){var a=this.events,b;for(b in a)a[b].resume()},destroyEvent:function(a){var b=this.events;
b[a]&&(b[a].removeAllListeners(),b[a].destroy(),delete b[a])},destroy:function(a){var b=this.events;if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();this.events={}}},getApi:function(){if(!this.api){for(var a="createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),b={},c,d=-1,e=a.length;++d<e;c=a[d],b[c]=y(this[c],this));this.api=b}return this.api}};var oa=
function(a,b){this.name=a;this.listeners=[];this.map={};this.hash=ha();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;this.returnResult=B(b)?null:b};oa.prototype={getName:function(){return this.name},destroy:function(){this.map=this.listeners=null},on:function(a,b,c){if(!a)return null;b=b||null;c=c||{};var d=this.uni,e=b||a;if(e[d]&&!c.allowDupes)return null;var m=++this.lid,h=c.first||!1;e[d]=m;a={fn:a,scope:b,uniScope:e,id:m,called:0,limit:c.limit||0,start:c.start||1,count:0,append:c.append,
prepend:c.prepend};h?this.listeners.unshift(a):this.listeners.push(a);this.map[m]=a;return m},once:function(a,b,c){c=c||{};c.once=!0;return this.on(a,b,c)},un:function(a,b){var c=-1,d=this.uni,e=this.listeners,m;m=a==parseInt(a)?a:(b||a)[d];if(!m)return!1;for(var h=0,z=e.length;h<z;h++)if(e[h].id==m){c=h;delete e[h].uniScope[d];break}if(-1==c)return!1;e.splice(c,1);delete this.map[m];return!0},hasListener:function(a,b){var c=this.listeners,d;if(a){b=b||a;d=J(a)?b[this.uni]:a;if(!d)return!1;for(var e=
0,m=c.length;e<m;e++)if(c[e].id==d)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,b=this.uni,c,d;c=0;for(d=a.length;c<d;c++)delete a[c].uniScope[b];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,b){var c;a.append||a.prepend?(c=ba.call(b),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=b;return c},trigger:function(){var a=this.listeners,b=this.returnResult;
if(this.suspended||0==a.length)return null;for(var c="all"==b?[]:null,d,e,a="first"==b?[a[0]]:ba.call(a);d=a.shift();)if(d&&this.map[d.id]&&(d.count++,!(d.count<d.start))){e=d.fn.apply(d.scope,this._prepareArgs(d,arguments));d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&c.push(e);if("first"==b)return e;"last"==b&&(c=e);if(!1==b&&!1===e)break}if(b)return c}};var Da=function(){var a=/#.*$/,b=/([?&])_=[^&]*/,c=/\?/,d=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,e=/^(?:GET|HEAD)$/i,
m=0,h=function(a,b,k){var p,c;if(z(a)&&k)b.push(encodeURIComponent(k)+"="+encodeURIComponent(a));else if(X(a)&&k)for(p=0,c=a.length;p<c;p++)h(a[p],b,k+"["+p+"]");else if(Y(a))for(p in a)a.hasOwnProperty(p)&&h(a[p],b,k?k+"["+p+"]":p)},x=function(g,f){g.replace(a,"");if(!1===f.cache){var k=(new Date).getTime();return b.test(g)?g.replace(b,"$1_="+k):g+(c.test(g)?"&":"?")+"_="+k}!f.data||window.FormData&&f.data instanceof window.FormData||(z(f.data)?k=f.data:(k=[],h(f.data,k,null),k=k.join("&").replace(/%20/g,
"+")),f.data=k,e.test(f.method)&&(g+=(c.test(g)?"&":"?")+f.data,f.data=null));return g},A={xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},w={url:null,data:null,method:"GET",headers:null,username:null,password:null,cache:null,dataType:null,timeout:0,contentType:"application/x-www-form-urlencoded",xhrFields:null,jsonp:!1,jsonpParam:null,jsonpCallback:null,transport:null,replace:!1,
selector:null,form:null,beforeSend:null,progress:null,uploadProgress:null,processResponse:null,callbackScope:null},U={},n=new na,t=function(a){var b;b=eval;a&&(/^[^\S]*use strict/.test(a)?(b=document.createElement("script"),b.text=a,document.head.appendChild(b).parentNode.removeChild(b)):b(a))},r=function(a,b,k){var p,c;if(!Y(a)&&!J(a)&&k)p=document.createElement("input"),p.setAttribute("type","hidden"),p.setAttribute("name",k),p.setAttribute("value",a),b.appendChild(p);else if(X(a)&&k)for(p=0,c=
a.length;p<c;p++)r(a[p],b,k+"["+p+"]");else if(Y(a))for(p in a)a.hasOwnProperty(p)&&r(a[p],b,k?k+"["+p+"]":p)},V=function(a){for(var b,k,p="",c=0;c<a.elements.length;c++)if(b=a.elements[c],b.hasAttribute("name"))if(k="INPUT"===b.nodeName.toUpperCase()?b.getAttribute("type").toUpperCase():"TEXT","FILE"===k)for(k=0;k<b.files.length;p+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.files[k++].name));else if("RADIO"!==k&&"CHECKBOX"!==k||b.checked)p+="&"+encodeURIComponent(b.name)+"="+encodeURIComponent(b.value);
return p},P=function(a,b,k){var p=b?b.dataType:null;b=b?b.selector:null;if(!z(a))return a;k=k||"";if("xml"===p||!p&&0<=k.indexOf("xml"))return a=xa(wa(a)),b?M(b,a):a;if("html"===p)return a=xa(a,"text/html"),b?M(b,a):a;if("fragment"==p){k=document.createDocumentFragment();p=document.createElement("div");for(p.innerHTML=a;p.firstChild;)k.appendChild(p.firstChild);return k}if("json"===p||!p&&0<=k.indexOf("json"))return Ca(wa(a));("script"===p||!p&&0<=k.indexOf("javascript"))&&t(a);return a+""},f=function(a){var b=
B(window)?"":window.location.href,b=d.exec(b.toLowerCase())||[],k=d.exec(a.url.toLowerCase());this._opt=a;a.crossDomain=!(!k||k[1]===b[1]&&k[2]===b[2]&&(k[3]||("http:"===k[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")));b=new fa;"iframe"!=a.transport||a.form?a.form&&(this._form=a.form,"POST"!=a.method||!B(window)&&window.FormData||"iframe"==a.transport||(a.transport="iframe")):(this.createForm(),a.form=this._form);a.form&&"iframe"!=a.transport&&(a.data="POST"==a.method?new FormData(a.form):
V(a.form));a.url=x(a.url,a);k=!a.crossDomain&&"script"!=a.transport||a.form?"iframe"==a.transport?new v(a,b,this):new l(a,b,this):new s(a,b,this);this._deferred=b;this._transport=k;b.done(function(a){n.trigger("success",a)});b.fail(function(a){n.trigger("error",a)});b.always(function(){n.trigger("end")});n.trigger("start");a.timeout&&(this._timeout=setTimeout(y(this.onTimeout,this),a.timeout));a.jsonp&&this.createJsonp();!1===n.trigger("beforeSend",a,k)&&(this._promise=fa.reject());a.beforeSend&&
!1===a.beforeSend.call(a.callbackScope,a,k)&&(this._promise=fa.reject());this._promise||(ua(k.send,k),b.abort=y(this.abort,this),b.always(this.destroy,this),this._promise=b)};f.prototype={_jsonpName:null,_transport:null,_opt:null,_deferred:null,_promise:null,_timeout:null,_form:null,_removeForm:!1,promise:function(){return this._promise},abort:function(a){this._transport.abort();this._deferred.reject(a||"abort")},onTimeout:function(){this.abort("timeout")},createForm:function(){var a=document.createElement("form");
a.style.display="none";a.setAttribute("method",this._opt.method);r(this._opt.data,a,null);document.body.appendChild(a);this._form=a;this._removeForm=!0},createJsonp:function(){var a=this._opt,b=a.jsonpParam||"callback",k=a.jsonpCallback||"jsonp_"+ ++m;a.url+=(c.test(a.url)?"&":"?")+b+"="+k;this._jsonpName=k;B(window)||(window[k]=y(this.jsonpCallback,this));B(global)||(global[k]=y(this.jsonpCallback,this));return k},jsonpCallback:function(a){try{this._deferred.resolve(this.processResponseData(a))}catch(b){this._deferred.reject(b)}},
processResponseData:function(a,b){var k=this._opt;a=P(a,k,b);n.hasListener("processResponse")&&(a=n.trigger("processResponse",a,this._deferred));k.processResponse&&(a=k.processResponse.call(k.callbackScope,a,this._deferred));return a},processResponse:function(a,b){var k=this._deferred,p;if(this._opt.jsonp)if(a){try{t(a)}catch(c){k.reject(c)}k.isPending()&&k.reject("jsonp script didn't invoke callback")}else k.reject("jsonp script is empty");else{try{p=this.processResponseData(a,b)}catch(f){k.reject(f)}k.resolve(p)}},
destroy:function(){this._timeout&&clearTimeout(this._timeout);this._form&&this._form.parentNode&&this._removeForm&&this._form.parentNode.removeChild(this._form);this._transport.destroy();delete this._transport;delete this._opt;delete this._deferred;delete this._promise;delete this._timeout;delete this._form;this._jsonpName&&(B(window)||delete window[this._jsonpName],B(global)||delete global[this._jsonpName])}};var q=function(a,b){b=b||{};a&&!z(a)?b=a:b.url=a;if(!b.url&&(b.form&&(b.url=b.form.getAttribute("action")),
!b.url))throw"Must provide url";E(b,U,!1,!0);E(b,w,!1,!0);b.method=b.method?b.method.toUpperCase():b.form?b.form.getAttribute("method").toUpperCase()||"GET":"GET";return(new f(b)).promise()};q.setup=function(a){E(U,a,!0,!0)};q.on=function(){n.on.apply(n,arguments)};q.un=function(){n.un.apply(n,arguments)};q.get=function(a,b){b=b||{};b.method="GET";return q(a,b)};q.post=function(a,b){b=b||{};b.method="POST";return q(a,b)};q.load=function(a,b,k){k=k||{};z(b)||(k=b);k.dataType="fragment";return q(b,
k).done(function(b){if(k.replace)for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b)})};q.loadScript=function(a){return q(a,{transport:"script"})};q.submit=function(a,b){b=b||{};b.form=a;return q(null,b)};var l=function(a,b,k){var c;if(!(window.XMLHttpRequest&&(c=new XMLHttpRequest)||(c=new ActiveXObject("Msxml2.XMLHTTP"))||(c=new ActiveXObject("Microsoft.XMLHTTP"))))throw"Unable to create XHR object";this._xhr=c;this._deferred=b;this._opt=a;this._ajax=k;a.progress&&F(c,"progress",y(a.progress,
a.callbackScope));a.uploadProgress&&c.upload&&F(c.upload,"progress",y(a.uploadProgress,a.callbackScope));try{var f;if(a.xhrFields)for(f in a.xhrFields)c[f]=a.xhrFields[f];a.data&&a.contentType&&c.setRequestHeader("Content-Type",a.contentType);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Accept",a.dataType&&A[a.dataType]?A[a.dataType]+", */*; q=0.01":A._default);for(f in a.headers)c.setRequestHeader(f,a.headers[f])}catch(t){}c.onreadystatechange=y(this.onReadyStateChange,
this)};l.prototype={_xhr:null,_deferred:null,_ajax:null,onReadyStateChange:function(){var a=this._xhr,b=this._deferred;if(0===a.readyState)a.onreadystatechange=ma,b.resolve(a);else if(4===a.readyState){a.onreadystatechange=ma;var k;a:{try{k=!a.status&&!B(location)&&"file:"==location.protocol||200<=a.status&&300>a.status||304===a.status||1223===a.status;break a}catch(c){}k=!1}k?this._ajax.processResponse(z(a.responseText)?a.responseText:void 0,a.getResponseHeader("content-type")||""):b.reject(a)}},
abort:function(){this._xhr.onreadystatechange=ma;this._xhr.abort()},send:function(){var a=this._opt;try{this._xhr.open(a.method,a.url,!0,a.username,a.password),this._xhr.send(a.data)}catch(b){this._deferred.reject(b)}},destroy:function(){delete this._xhr;delete this._deferred;delete this._opt;delete this._ajax}};var s=function(a,b,k){this._opt=a;this._ajax=k;this._deferred=b};s.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("script");a.setAttribute("async",
"async");a.setAttribute("charset","utf-8");a.setAttribute("src",this._opt.url);F(a,"load",y(this.onLoad,this));F(a,"error",y(this.onError,this));document.head.appendChild(a);this._el=a},onLoad:function(a){this._deferred&&this._deferred.resolve(a)},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;
delete this._deferred}};var v=function(a,b,k){this._opt=a;this._ajax=k;this._deferred=b};v.prototype={_opt:null,_deferred:null,_ajax:null,_el:null,send:function(){var a=document.createElement("iframe"),b="frame-"+ ++m,k=this._opt.form;a.setAttribute("id",b);a.setAttribute("name",b);a.style.display="none";document.body.appendChild(a);k.setAttribute("action",this._opt.url);k.setAttribute("target",b);F(a,"load",y(this.onLoad,this));F(a,"error",y(this.onError,this));this._el=a;try{k.submit()}catch(c){this._deferred.reject(c)}},
onLoad:function(){var a=this._el;this._opt&&!this._opt.jsonp&&(a=a.contentDocument||a.contentWindow.document,a=a.body.innerHTML,this._ajax.processResponse(a))},onError:function(a){this._deferred.reject(a)},abort:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el)},destroy:function(){this._el.parentNode&&this._el.parentNode.removeChild(this._el);delete this._el;delete this._opt;delete this._ajax;delete this._deferred}};return q}(),W=function(a){return a.substr(0,1).toUpperCase()+
a.substr(1)},pa=function(){if(B(window.pageYOffset)){var a=document.body,b=document.documentElement;return b.clientHeight?function(){return b.scrollTop}:function(){return a.scrollTop}}return function(){return window.pageYOffset}}(),qa=function(){if(B(window.pageXOffset)){var a=document.body,b=document.documentElement;return b.clientWidth?function(){return b.scrollLeft}:function(){return a.scrollLeft}}return function(){return window.pageXOffset}}(),G=function(a){var b;b=pa();var c=qa();if(a===window)c=
document.documentElement,b={left:0,right:c.clientWidth,top:b,bottom:c.clientHeight+b,width:c.clientWidth,height:c.clientHeight};else if(a.getBoundingClientRect)a=a.getBoundingClientRect(),b={left:a.left+c,top:a.top+b,right:a.right+c,bottom:a.bottom+b},b.width=b.right-b.left,b.height=b.bottom-b.top;else{var d=a.style;b={left:(parseInt(d.left,10)||0)+c,top:(parseInt(d.top,10)||0)+b,width:a.offsetWidth,height:a.offsetHeight,right:0,bottom:0}}b.getCenter=function(){return this.width/2};b.getCenterX=function(){return this.left+
this.width/2};return b},ga={},Ea=function(a,b,c,d){var e=b+"-"+c,m=function(a){a=T(a);return ka(a.target,b)?d(a):null};ga[e]||(ga[e]=[]);ga[e].push({el:a,ls:m,fn:d});F(a,c,m)},Fa=function(a,b,c,d){var e,m;if(m=ga[b+"-"+c])for(b=-1,e=m.length;++b<e;)m[b].el===a&&m[b].fn===d&&L(a,c,m[b].ls)},ya=function(){var a=function(a,b){var c=a.style,d;for(d in b)c[d]=b[d]},b={t:"b",r:"l",b:"t",l:"r"},c={t:"top",r:"right",b:"bottom",l:"left"},d={t:["l","r"],r:["t","b"],b:["r","l"],l:["b","t"]},e=document.all&&
!window.XMLHttpRequest,m=function(){var a={},b={};return{register:function(c){var d=c.getInstanceId(),e=c.getGroup(),h,f,q;a[d]=c;h=0;for(f=e.length;h<f;h++)q=e[h],b[q]||(b[q]={}),b[q][d]=!0;c.on("destroy",this.unregister,this)},unregister:function(b){b=b.getInstanceId();delete a[b]},hideAll:function(c){var d=c.getInstanceId();c=c.getGroup();var e,h,f,q;e=0;for(h=c.length;e<h;e++)for(q in f=c[e],f=b[f],f)a[q]?q==d||a[q].isHideAllIgnored()||a[q].hide(null,!0,!0):delete f[q]}}}(),h=function(m,n,t){var r,
w=this,P,f={backgroundColor:"transparent",width:"0px",height:"0px",position:"absolute",fontSize:"0px",lineHeight:"0px"},q=n.size,l=n.width||2*q;E(w,{init:function(){n.border&&w.createInner()},getEl:function(){return r},getDialogPositionOffset:function(){var a=(w.detectPointerPosition()||"").substr(0,1),c=(m.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1),f={x:0,y:0};a==b[c]&&(f["t"==a||"b"==a?"y":"x"]="b"==a||"r"==a?-q:q);return f},createInner:function(){var a=E({},n);a.size=q-2*n.border;
a.width=l-4*n.border;delete a.border;delete a.borderColor;delete a.borderCls;delete a.offset;P=new h(m,a,n.border)},detectPointerPosition:function(){if(n.position)return n.position;var a=(m.getCfg().position.type||"").replace(/(w|m|c)/,"").substr(0,1);return a?b[a]:null},detectPointerDirection:function(a){return n.direction?n.direction:a},getBorders:function(a,f,g){var t={},k=a.substr(0,1);a=f.substr(0,1);var p=f.substr(1);f=e?"dotted":"solid";t["border"+W(c[b[k]])]=q+"px solid "+g;t["border"+W(c[k])]=
"0 "+f+" transparent";p?(t["border"+W(c[p])]="0 solid transparent",t["border"+W(c[b[p]])]=l+"px "+f+" transparent"):(g=Math.floor(l/2),t["border"+W(c[d[a][0]])]=g+"px "+f+" transparent",t["border"+W(c[d[a][1]])]=g+"px "+f+" transparent");return t},getOffsets:function(a,f){var g={},d=a.substr(0,1),k="t"==d||"b"==d?"r":"b";if(!q)switch(document.body.appendChild(r),d){case "t":case "b":q=G(r).height;l=G(r).width;break;case "l":case "r":l=G(r).height,q=G(r).width}g[c[d]]=t?"auto":-q+"px";g[c[k]]="auto";
if(t){var d=f.substr(0,1),p=f.substr(1);g[c[b[k]]]=p?"l"==p||"t"==p?t+"px":-l-t+"px":Math.floor(-l/2)+"px";g[c[b[d]]]=-(q+2*t)+"px"}else{switch(a){case "t":case "r":case "b":case "l":d=f!=a?"l"==f||"t"==f?n.offset:-l+n.offset:-l/2+n.offset;break;case "bl":case "tl":case "lt":case "rt":d=n.offset;break;default:d=-l-n.offset}g["margin"+W(c[b[k]])]=d+"px";switch(a){case "t":case "r":case "b":case "l":d="50%";break;case "tr":case "rb":case "br":case "lb":d="100%";break;default:d=0}g[c[b[k]]]=d}return g},
render:function(){if(!r){var b=w.detectPointerPosition();if(b)if(n.el){if(z(n.el)){var c=document.createElement("div");c.innerHTML=n.el;r=c.firstChild}else r=n.el;a(r,{position:"absolute"});a(r,w.getOffsets(b));K(r,n.cls);m.getElem().appendChild(r)}else{c=w.detectPointerDirection(b);r=document.createElement("div");var g=document.createComment(" ");r.appendChild(g);a(r,f);a(r,w.getBorders(b,c,n.borderColor||n.color));a(r,w.getOffsets(b,c));K(r,n.borderCls||n.cls);P&&(P.render(),r.appendChild(P.getEl()));
t||m.getElem().appendChild(r)}}},destroy:function(){w.remove();P=w=null},remove:function(){P&&P.remove();r&&(r.parentNode.removeChild(r),r=null)}},!0,!1);w.init();return w},x=function(a){if(!a)return{};var b=function(b,c,d){var e=a[b],f=!1;if(!B(e)){switch(d){case "string":f=z(e);break;case "function":f=J(e);break;case "number":f=sa(e)||e==parseInt(e);break;case "dom":f=e&&(e.tagName||e.nodeName)?!0:!1;break;case "jquery":(f=e&&e.jquery?!0:!1)&&(e=e.get(0));break;case "boolean":if(!0===e||!1===e)f=
!0;break;default:!0===d&&!0===e&&(f=!0),!1===d&&!1===e&&(f=!0)}f&&(a[b]={},a[b][c]=e)}};b("content","value","string");b("content","value","boolean");b("content","fn","function");b("ajax","url","string");b("cls","dialog","string");b("render","tpl","string");b("render","fn","function");b("render","el","dom");b("render","el","jquery");b("show","events",!1);b("show","events","string");b("hide","events",!1);b("hide","events","string");b("toggle","events",!1);b("toggle","events","string");b("position",
"type","string");b("position","type",!1);b("position","get","function");b("overlay","enabled","boolean");b("pointer","position","string");b("pointer","size","number");return a},A={target:null,debug:!1,group:null,modal:!1,useHref:!1,content:{value:"",fn:null,prepare:null,attr:null},ajax:{url:null,data:null,dataType:"text",method:"GET"},cls:{dialog:null,visible:null,hidden:null,loading:null},selector:{content:null},buttons:null,render:{tpl:"<div></div>",fn:null,el:null,zIndex:null,lazy:!0,style:null,
appendTo:null,id:null,keepVisible:!1,keepInDOM:!1,lifetime:null},events:{show:{click:{preventDefault:!0,stopPropagation:!0,returnValue:!1,process:null}}},show:{delay:null,single:!1,events:null,animate:!1,ignoreHideAll:!1,focus:!1,preventScroll:!1},hide:{delay:null,timeout:null,events:null,destroy:!1,animate:!1,cancelShowDelay:!0},toggle:{events:null},position:{type:"t",offsetX:0,offsetY:0,axis:null,get:null,screenX:!1,screenY:!1,resize:!0},pointer:{position:null,direction:null,size:0,width:null,color:null,
offset:0,border:0,borderColor:null,el:null,cls:null,borderCls:null},overlay:{enabled:!1,color:"#000",opacity:.5,cls:null,animateShow:!1,animateHide:!1,preventScroll:!1},callback:{scope:null,contentchange:null,beforeshow:null,show:null,beforehide:null,hide:null,render:null,lifetime:null,targetchange:null,button:null}},w=function(b,c){b&&!z(b)&&(c=b,b=null);c=c||{};var d=this,e={},y=ha(),B=new na,f=E({},A,x(w.defaults),x(w[b]),x(c),!0,!0),q=f.callback.scope||e,l,s,v,g={bindSelfOnRender:!1,target:null,
visible:!1,enabled:!0,frozen:!1,rendered:!1,hideTimeout:null,hideDelay:null,showDelay:null,dynamicTarget:!1,dynamicTargetEl:null,images:0,position:null,destroyDelay:null};c=null;E(e,B.getApi(),{getElem:function(){return l},getInstanceId:function(){return y},getCfg:function(){return E({},f)},getGroup:function(){return f.group?z(f.group)?[f.group]:f.group:[""]},setTarget:function(a){if(!a)return e;var b=!1,c=g.target;g.target?(d.setHandlers("unbind","_target"),b=!0):g.dynamicTarget&&(b=!0);z(a)?(g.dynamicTarget=
!0,g.target=null):(g.dynamicTarget=!1,g.target=a);b&&(d.setHandlers("bind","_target"),d.trigger("targetchange",e,a,c));return e},getTarget:function(){return g.dynamicTarget?g.dynamicTargetEl:f.target},isEnabled:function(){return g.enabled},isVisible:function(){return g.visible},isHideAllIgnored:function(){return f.show.ignoreHideAll},isFrozen:function(){return g.frozen},enable:function(){g.enabled=!0;return e},disable:function(){d.hide();g.enabled=!1;return e},freeze:function(){g.frozen=!0;return e},
unfreeze:function(){g.frozen=!1;return e},toggle:function(a,b){return a&&a.stopPropagation&&g.dynamicTarget&&g.visible&&d.isDynamicTargetChanged(a)?d.show(a):d[g.visible?"hide":"show"](a,b)},show:function(a,b){var c=a&&a.stopPropagation?null:e,h=f.show;if(!e.isEnabled())return f.debug&&console.log("show: not enabled",e.getTarget()),c;a&&a.stopPropagation&&f.events.show&&f.events.show[a.type]&&(c=f.events.show[a.type],c.process?c=c.process(e,a):(c.stopPropagation&&a.stopPropagation(),c.preventDefault&&
a.preventDefault(),c=c.returnValue));if(g.visible&&g.hideTimeout)return window.clearTimeout(g.hideTimeout),g.hideTimeout=window.setTimeout(d.hide,f.hide.timeout),f.debug&&console.log("show: hide timeout was set",e.getTarget()),c;if(g.hideDelay)return window.clearTimeout(g.hideDelay),g.hideDelay=null,g.visible=!0,f.debug&&console.log("show: hide delay was set; already shown",e.getTarget()),c;if(g.frozen)return f.debug&&console.log("show: frozen",e.getTarget()),c;g.destroyDelay&&(window.clearTimeout(g.destroyDelay),
g.destroyDelay=null);var q=!1;a&&a.stopPropagation&&g.dynamicTarget&&(q=d.changeDynamicTarget(a));if(g.visible)if(q)if(f.render.fn)d.hide(null,!0);else return d.reposition(a),c;else return f.debug&&console.log("show: already shown",l),c;l?q&&d.changeDynamicContent():d.render();if(!1===d.trigger("beforeshow",e,a))return f.debug&&console.log("show: beforeshow return false",e.getTarget()),c;la(l);g.visible=!0;h.single&&m.hideAll(d);d.toggleTitleAttribute(!1);h.delay&&!b?g.showDelay=window.setTimeout(function(){d.showAfterDelay(a)},
h.delay):d.showAfterDelay(a,b);return c},hide:function(a,b,c){g.hideTimeout=null;var h=a&&a.stopPropagation?null:e;a&&a.stopPropagation&&f.events.hide&&f.events.hide[a.type]&&(h=f.events.hide[a.type],h.process?h=h.process(e,a):(h.stopPropagation&&a.stopPropagation(),h.preventDefault&&a.preventDefault(),h=h.returnValue));!g.visible&&g.hideDelay&&b&&(window.clearTimeout(g.hideDelay),g.hideDelay=null,g.visible=!0);if(!l||!g.visible||!d.isEnabled())return f.debug&&console.log("hide: elem/visible/enabled: ",
l,g.visible,d.isEnabled()),h;if(g.showDelay)return f.hide.cancelShowDelay||c?(window.clearTimeout(g.showDelay),g.showDelay=null,g.visible=!1,f.debug&&console.log("hide: cancelShowDelay: ",d.getTarget())):f.debug&&console.log("hide: show delay was set",d.getTarget()),h;if(g.frozen)return f.debug&&console.log("hide: frozen",d.getTarget()),h;if(!1===d.trigger("beforehide",e,a))return f.debug&&console.log("hide: beforehide returned false",d.getTarget()),h;la(l);g.visible=!1;d.toggleTitleAttribute(!0);
g.dynamicTarget&&d.resetDynamicTarget();f.hide.delay&&!b?g.hideDelay=window.setTimeout(function(){d.hideAfterDelay(a)},f.hide.delay):d.hideAfterDelay(a,b);return h},setPositionType:function(a){a&&(z(a)?(f.position.get=a,f.position.type=!1):(f.position.get=null,f.position.type=a));a=f.position.type;!1===a?g.position=!1:f.position.get&&"m"!=a?g.position="fn":(a=a.substr(0,1),g.position="w"==a?"window":"m"==a?"mouse":"target");s&&(s.remove(),l&&s.render())},getPosition:function(a){if(!l)return null;
var b,c=f.position;switch(g.position){case !1:return null;case "target":b=d.getTargetPosition(a);break;case "mouse":b=d.getMousePosition(a);break;case "window":b=d.getWindowPosition(a);break;case "fn":b=c.get.call(q,e,a)}if(!1!==c.screenX||!1!==c.screenY)b=d.correctScreenPosition(b,c.screenX,c.screenY);return b},reposition:function(b){b&&(b=T(b));if(b=d.getPosition(b))void 0!=b.x&&a(l,{left:b.x+"px"}),void 0!=b.y&&a(l,{top:b.y+"px"}),void 0==b.x&&void 0==b.y&&a(l,b)},getContentElem:function(){return l?
f.selector.content?M(f.selector.content,l).shift()||l:l:null},setContent:function(a,b){b=b||"";if(!l)return f.content.value=a,e;f.content.prepare&&(a=f.content.prepare(e,b,a));var c=e.getContentElem(),h=g.rendered&&!f.selector.content&&s,q=h&&s.getEl();if(h&&q)try{l.removeChild(q)}catch(u){}if(z(a))c.innerHTML=a;else for(var m in a){var n=f.selector[m];n&&(n=M(n,c).shift())&&(n.innerHTML=a[m])}if(h&&q)try{l.appendChild(q)}catch(v){}c=M("img",c);g.images=c.length;m=-1;for(h=c.length;++m<h;F(c[m],"load",
d.onImageLoad));d.trigger("contentchange",e,a,b);d.onContentChange();return e},readContent:function(){var a=e.getTarget(),b;a&&(b=f.content.attr?a.getAttribute(f.content.attr):a.getAttribute("tooltip")||a.getAttribute("title")||a.getAttribute("alt"));b&&d.setContent(b,"attribute");return e},loadContent:function(a){K(l,f.cls.loading);a=E({},f.ajax,a,!0,!0);d.trigger("beforeajax",e,a);return Da(a).done(d.onAjaxLoad)},destroy:function(){d.trigger("destroy",e);L(window,"resize",d.onWindowResize);L(window,
"scroll",d.onWindowScroll);d.destroyElem();s&&(s.destroy(),s=null);d.setHandlers("unbind");B.destroy();v=g=e=d=B=null},setFocus:function(){var a=f.show.focus,b;if(!0===a)if(a=M("input",l).concat(M("textarea",l)),0<a.length)a[0].focus();else{if(f.buttons)for(b in f.buttons){(b=M(f.buttons[b],l).shift())&&b.focus();break}}else(b=M(a,l).shift())&&b.focus()}},!0,!1);E(d,e,{init:function(){m.register(d);f.modal&&(f.overlay.enabled=!0);d.setPositionType();d.setTarget(f.target);if(f.pointer.size||f.pointer.el)s=
new h(d,f.pointer);f.render.lazy||d.render();d.setHandlers("bind")},setHandlers:function(a,b){for(var c=["show","hide","toggle"],h="bind"==a?F:L,q="bind"==a?Ea:Fa,u,m,n,s,w,B,y,x,A,E;u=c.shift();)if(m=f[u].events,!1!==m){if(z(m)||X(m))g.dynamicTarget?(w={},w[m]=f.target,m={_html:w}):m={_target:m};for(n in m){if(b)if("_self"==b){if("_self"!=n&&"_overlay"!=n&&">"!=n.substr(0,1))continue}else if(n!=b)continue;if("_self"!=n&&"_overlay"!=n&&">"!=n.substr(0,1)||l){if(y=m[n]){switch(n){case "_target":x=
[d.getTarget()];break;case "_self":x=[l];break;case "_window":x=[window];break;case "_document":x=[document];break;case "_html":x=[document.documentElement];break;case "_overlay":x=[v];break;default:x=">"==n.substr(0,1)?M(n.substr(1),l):M(n)}if(x&&x.length)if(z(y)&&(y=[y]),X(y))for(w=0,B=y.length;w<B;w++)for(A=-1,E=x.length;++A<E;h(x[A],y[w],e[u]));else for(s in y)for(A=-1,E=x.length;++A<E;q(x[A],y[s],s,e[u]));}}else g.bindSelfOnRender=!0}}},resetDynamicTarget:function(){var a=g.dynamicTargetEl;a&&
(d.setHandlers("unbind","_target"),d.trigger("targetchange",e,null,a))},isDynamicTargetChanged:function(a){var b=f.target;a=a.target;for(var d=g.dynamicTargetEl;a&&!ka(a,b);)a=a.parentNode;return a?!d||d!==a:!1},changeDynamicTarget:function(a){var b=f.target;a=a.target;for(var c=g.dynamicTargetEl;a&&!ka(a,b);)a=a.parentNode;if(!a||c&&c===a)return!1;c&&d.setHandlers("unbind","_target");g.dynamicTargetEl=a;d.setHandlers("bind","_target");d.trigger("targetchange",e,a,c);return!0},showAfterDelay:function(a,
b){g.showDelay=null;if(g.visible){f.position.manual||d.reposition(a);"mouse"==g.position&&F(document.documentElement,"mousemove",d.onMouseMove);var c=f.position;(c.resize||c.screenX||c.screenY)&&F(window,"resize",d.onWindowResize);(c.scroll||c.screenX||c.screenY)&&F(window,"scroll",d.onWindowScroll);if(b||!1!==d.trigger("afterdelay",e,a)){v&&(f.overlay.animateShow?d.animate("show",null,!0):v.style.display="");if(f.show.preventScroll){var c=f.show.preventScroll,h,l;!0===c&&(c="body");c=M(c);h=-1;for(l=
c.length;++h<l;F(c[h],"mousewheel",d.onPreventScroll)&&F(c[h],"touchmove",d.onPreventScroll));}f.show.animate&&!b?d.animate("show").done(function(){d.showAfterAnimation(a)}):d.showAfterAnimation(a)}else g.visible=!1,f.debug&&console.log("showAfterDelay: afterdelay returned false",e.getTarget())}else f.debug&&console.log("showAfterDelay: already hidden",d.getTarget())},showAfterAnimation:function(a){g.visible?(S(l,f.cls.hidden),K(l,f.cls.visible),f.render.keepVisible||(l.style.display=""),f.hide.timeout&&
(g.hideTimeout=window.setTimeout(d.hide,f.hide.timeout)),f.show.focus&&window.setTimeout(d.setFocus,20),d.trigger("show",e,a)):f.debug&&console.log("showAfterAnimation: already hidden",d.getTarget())},hideAfterDelay:function(a,b){g.hideDelay=null;if(g.visible)f.debug&&console.log("hideAfterDelay: already shown again",d.getTarget());else{"mouse"==g.position&&L(document.documentElement,"mousemove",d.onMouseMove);var c=f.position;(c.resize||c.screenX||c.screenY)&&L(window,"resize",d.onWindowResize);
(c.scroll||c.screenX||c.screenY)&&L(window,"scroll",d.onWindowScroll);if(b||!1!==d.trigger("afterhidedelay",e,a)){if(f.show.preventScroll){var c=f.show.preventScroll,h,q;!0===c&&(c="body");c=M(c);h=-1;for(q=c.length;++h<q;L(c[h],"mousewheel",d.onPreventScroll)&&L(c[h],"touchmove",d.onPreventScroll));}v&&(f.overlay.animateShow?d.animate("hide",null,!0).done(function(){v.style.display="none"}):v.style.display="none");f.hide.animate&&!b?d.animate("hide").done(function(){d.hideAfterAnimation(a)}):d.hideAfterAnimation(a)}else g.visible=
f.cls.hidden?!ia(l,f.cls.hidden):!(0>=l.offsetWidth||0>=l.offsetHeight),f.debug&&console.log("hideAfterDelay: afterhdelay returned false",d.getTarget())}},hideAfterAnimation:function(a){g.visible?f.debug&&console.log("hideAfterAnimation: already shown again",d.getTarget()):(S(l,f.cls.visible),K(l,f.cls.hidden),f.render.keepVisible||(l.style.display="none"),d.trigger("hide",e,a),a=f.render.lifetime,null!==a&&(0===a?d.destroyElem():g.destroyDelay=window.setTimeout(d.destroyElem,a)),l&&f.hide.destroy&&
window.setTimeout(function(){H(l,f.instanceName,null);d.destroy()},0))},render:function(){if(l)f.debug&&console.log("element already rendered",l);else{var b=f.render,c=f.cls;if(b.fn){var h=b.fn.call(q,e);b[z(h)?"tpl":"el"]=h}b.el?z(b.el)?(l=M(b.el).shift(),b.keepInDOM=!0):l=b.el:(h=document.createElement("div"),h.innerHTML=b.tpl,l=h.firstChild);l||(l=document.createElement("div"));b.id&&l.setAttribute("id",b.id);f.render.keepVisible||(l.style.display="none");K(l,c.dialog);K(l,c.hidden);b.style&&a(l,
b.style);f.overlay.enabled&&(v=document.createElement("div"),a(v,{display:"none",position:"fixed",left:0,top:0,right:0,bottom:0,opacity:f.overlay.opacity,backgroundColor:f.overlay.color}),document.body.appendChild(v),F(v,"click",d.onOverlayClick),b.zIndex&&a(v,{zIndex:b.zIndex}),f.overlay.cls&&K(v,f.overlay.cls));b.appendTo?b.appendTo.appendChild(l):!1!==b.appendTo&&document.body.appendChild(l);b.zIndex&&a(l,{zIndex:b.zIndex});b=f.content;if(!1!==b.value)if(b.value)d.setContent(b.value);else if(b.fn)d.setContent(b.fn.call(q,
e));else d[f.ajax.url?"loadContent":"readContent"]();s&&s.render();if(f.buttons)for(var m in f.buttons)if(b=M(f.buttons[m],l).shift())H(b,"metaphorjsTooltip-button-id",m),F(b,"click",d.onButtonClick),F(b,"keyup",d.onButtonKeyup);g.bindSelfOnRender&&(d.setHandlers("bind","_self"),g.bindSelfOnRender=!1);g.rendered=!0;d.trigger("render",e)}},animate:function(a,b,c){var e,g;e=c?"show"==a?f.overlay.animateShow:f.overlay.animateHide:f[a].animate;J(e)&&(e=e(d,b));g=e.skipDisplayChange||!1;"boolean"==typeof e?
e=a:z(e)&&(e=[e]);return Ba(l,e,function(){"show"!=a||g||(c?v.style.display="":l.style.display="")})},toggleTitleAttribute:function(a){var b=e.getTarget(),c;b&&(!1===a?(H(b,"tmp-title",b.getAttribute("title")),b.removeAttribute("title")):(c=H(b,"tmp-title"))&&b.setAttribute("title",c))},changeDynamicContent:function(){f.content.fn?d.setContent(f.content.fn.call(q,e)):f.content.attr&&d.readContent()},getDialogSize:function(){var b=f.cls.hidden?ia(l,f.cls.hidden):!!(0>=l.offsetWidth||0>=l.offsetHeight),
c,d=l.style.left;b&&(a(l,{left:"-1000px"}),l.style.display="");c={width:G(l).width,height:G(l).height};b&&(a(l,{left:d}),l.style.display="none");return c},getTargetSize:function(){var a=d.getTarget();return a?{width:G(a).width,height:G(a).height}:null},getTargetPosition:function(a,b){var c=d.getTarget();if(!c)return null;var e=d.getDialogSize(),c=G(c),g=d.getTargetSize(),h={};b=b||f.position.type;var l=b.substr(0,1),q=b.substr(1),m=f.position.offsetX,n=f.position.offsetY,r=s?s.getDialogPositionOffset():
null;switch(l){case "t":h.y=c.top-e.height-n;break;case "r":h.x=c.left+g.width+m;break;case "b":h.y=c.top+g.height+n;break;case "l":h.x=c.left-e.width-m}switch(q){case "t":h.y=c.top+n;break;case "r":h.x=c.left+g.width-e.width-m;break;case "b":h.y=c.top+g.height-e.height-n;break;case "l":h.x=c.left+m;break;case "rc":h.x=c.left+g.width+m;break;case "lc":h.x=c.left-e.width-m;break;case "":switch(l){case "t":case "b":h.x=c.left+g.width/2-e.width/2;break;case "r":case "l":h.y=c.top+g.height/2-e.height/
2}}r&&(h.x+=r.x,h.y+=r.y);return h},getMousePosition:function(a){if(!a)return null;var b=d.getDialogSize(),c={},g=f.position.type.substr(1),h=f.position.offsetX,l=f.position.offsetY,m=f.position.axis,n=s?s.getDialogPositionOffset():null;switch(g){case "":c=f.position.get.call(q,e,a);break;case "t":c.y=a.pageY-b.height-l;c.x=a.pageX-b.width/2;break;case "r":c.y=a.pageY-b.height/2;c.x=a.pageX+h;break;case "b":c.y=a.pageY+l;c.x=a.pageX-b.width/2;break;case "l":c.y=a.pageY-b.height/2;c.x=a.pageX-b.width-
h;break;case "rt":c.y=a.pageY-b.height-l;c.x=a.pageX+h;break;case "rb":c.y=a.pageY+l;c.x=a.pageX+h;break;case "lt":c.y=a.pageY-b.height-l;c.x=a.pageX-b.width-h;break;case "lb":c.y=a.pageY+l,c.x=a.pageX-b.width-h}n&&(c.x+=n.x,c.y+=n.y);m&&(a=d.getTargetPosition(a,g))&&("x"==m?c.y=a.y:c.x=a.x);return c},getWindowPosition:function(){var a=d.getDialogSize(),b={},c=f.position.type.substr(1),e=f.position.offsetX,g=f.position.offsetY,h=pa(),l=qa(),m=G(window).width,n=G(window).height;switch(c){case "c":b.y=
n/2-a.height/2+h;b.x=m/2-a.width/2+l;break;case "t":b.y=h+g;b.x=m/2-a.width/2+l;break;case "r":b.y=n/2-a.height/2+h;b.x=m-a.width+l-e;break;case "b":b.y=n-a.height+h-g;b.x=m/2-a.width/2+l;break;case "l":b.y=n/2-a.height/2+h;b.x=l+e;break;case "rt":b.y=h+g;b.x=m-a.width+l-e;break;case "rb":b.y=n-a.height+h-g;b.x=m-a.width+l-e;break;case "lt":b.y=h+g;b.x=l+e;break;case "lb":b.y=n-a.height+h-g,b.x=l+e}return b},correctScreenPosition:function(a,b,c){var e=d.getDialogSize(),f=pa(),g=qa(),h=G(window).width,
l=G(window).height;c&&a.y+e.height>l+f-c&&(a.y=l+f-c-e.height);b&&a.x+e.width>h+g-b&&(a.x=h+g-b-e.width);c&&a.y<f+c&&(a.y=f+c);b&&a.x<g+b&&(a.x=g+b);return a},onMouseMove:function(a){d.reposition(T(a))},onWindowResize:function(a){d.reposition(T(a))},onWindowScroll:function(a){d.reposition(T(a))},onPreventScroll:function(a){T(a).preventDefault()},onOverlayClick:function(a){return f.modal?(a=T(a),a.preventDefault(),a.stopPropagation(),!1):null},onButtonClick:function(a){var b=T(a).target;(b=H(b,"metaphorjsTooltip-button-id"))&&
d.trigger("button",e,b,a)},onButtonKeyup:function(a){if(13==a.keyCode||32==a.keyCode){var b=H(a.target,"metaphorjsTooltip-button-id");b&&d.trigger("button",e,b,T(a))}},onAjaxLoad:function(a){S(l,f.cls.loading);d.setContent(a,"ajax")},onImageLoad:function(){g.images--;d.onContentChange()},onContentChange:function(){g.visible&&d.reposition()},destroyElem:function(){d.setHandlers("unbind","_self");g.bindSelfOnRender=!0;s&&s.remove();v&&(v.parentNode.removeChild(v),v=null);l&&(f.render.keepInDOM||l.parentNode.removeChild(l),
l=null);d.trigger("lifetime",e)}},!0,!1);delete f.callback.scope;for(var N in f.callback)e.on(N,f.callback[N],q);f.target&&f.useHref&&(N=f.target.getAttribute("href"),"#"==N.substr(0,1)?f.render.el=N:f.ajax.url=N);d.init();return e};E(w,{defaults:{}});return w}();window.jQuery&&(jQuery.fn.metaphorjsTooltip=function(a,b,c){var d="dialog",e;"string"==typeof a&&"destroy"!=a&&(e=a,a=b,b=c);a=a||{};d+="-"+(b||"default");this.each(function(){var b=H(this,d);if(b)if("destroy"==a)b.destroy(),H(this,d,null);
else throw Error("MetaphorJs tooltip already instantiated for this html element");else a.target=this,a.instanceName=d,H(this,d,new ya(e,a))})});aa.lib.Dialog=ya;aa.onReady=function(a){var b=!1,c=!0,d=window,e=d.document,m=e.documentElement,h=function(c){if("readystatechange"!=c.type||"complete"==e.readyState)L("load"==c.type?d:e,c.type,h),!b&&(b=!0)&&a.call(d,c.type||c)},x=function(){try{m.doScroll("left")}catch(a){setTimeout(x,50);return}h("poll")};if("complete"==e.readyState)a.call(d,"lazy");else{if(e.createEventObject&&
m.doScroll){try{c=!d.frameElement}catch(y){}c&&x()}F(e,"DOMContentLoaded",h);F(e,"readystatechange",h);F(d,"load",h)}};"undefined"!=typeof global?global.MetaphorJs=aa:window.MetaphorJs=aa})();
